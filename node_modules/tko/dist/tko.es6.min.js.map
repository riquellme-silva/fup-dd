{"version":3,"file":"tko.es6.min.js","sources":["../../tko.utils/src/array.js","../../tko.utils/src/error.js","../../tko.utils/src/async.js","../../tko.utils/src/object.js","../../tko.utils/src/function.js","../../tko.utils/src/string.js","../../tko.utils/src/symbol.js","../../tko.utils/src/css.js","../../tko.utils/src/dom/info.js","../../tko.utils/src/dom/data.js","../../tko.utils/src/dom/disposal.js","../../tko.utils/src/dom/event.js","../../tko.utils/src/dom/manipulation.js","../../tko.utils/src/dom/fixes.js","../../tko.utils/src/dom/virtualElements.js","../../tko.utils/src/dom/html.js","../../tko.utils/src/memoization.js","../../tko.utils/src/tasks.js","../../tko.observable/src/subscribableSymbol.js","../../tko.observable/src/dependencyDetection.js","../../tko.observable/src/defer.js","../../tko.observable/src/extenders.js","../../tko.observable/src/subscribable.js","../../tko.observable/src/observable.js","../../tko.observable/src/observableArray.changeTracking.js","../../tko.observable/src/observableArray.js","../../tko.observable/src/mappingHelpers.js","../../tko.utils.parser/src/operators.js","../../tko.utils.parser/src/preparse.js","../../tko.computed/src/computed.js","../../tko.computed/src/proxy.js","../../tko.computed/src/when.js","../../tko.bind/src/bindingContext.js","../../tko.bind/src/applyBindings.js","../../tko.bind/src/arrayToDomNodeChildren.js","../../tko.binding.template/src/templateSources.js","../../tko.binding.template/src/templateEngine.js","../../tko.binding.template/src/templating.js","../../tko.binding.template/src/nativeTemplateEngine.js","../../tko.utils.component/src/registry.js","../../tko.utils.component/src/loaders.js","../../tko.provider.mustache/src/mustacheParser.js","../../tko.binding.core/src/event.js","../../tko.binding.foreach/src/foreach.js","../../tko.utils.jsx/src/jsx.js","../../tko.utils/src/options.js","../../tko.utils/src/ie.js","../../tko.utils/src/jquery.js","../../tko.utils/src/dom/selectExtensions.js","../../tko.observable/src/Subscription.js","../../tko.utils.parser/src/Node.js","../../tko.utils.parser/src/Expression.js","../../tko.utils.parser/src/Arguments.js","../../tko.utils.parser/src/identifierExpressions.js","../../tko.utils.parser/src/Identifier.js","../../tko.utils.parser/src/Ternary.js","../../tko.utils.parser/src/Parser.js","../../tko.computed/src/throttleExtender.js","../../tko.lifecycle/src/LifeCycle.js","../../tko.bind/src/bindingEvent.js","../../tko.bind/src/BindingResult.js","../../tko.bind/src/BindingHandler.js","../../tko.bind/src/LegacyBindingHandler.js","../../tko.bind/src/DescendantBindingHandler.js","../../tko.binding.template/src/foreach.js","../../tko.builder/src/Builder.js","../../tko.provider/src/BindingHandlerObject.js","../../tko.provider/src/Provider.js","../../tko.provider.bindingstring/src/BindingStringProvider.js","../../tko.provider.virtual/src/VirtualProvider.js","../../tko.provider.databind/src/DataBindProvider.js","../../tko.utils.component/src/ComponentABC.js","../../tko.utils.component/src/index.js","../../tko.provider.component/src/ComponentProvider.js","../../tko.provider.attr/src/AttributeProvider.js","../../tko.provider.multi/src/MultiProvider.js","../../tko.provider.mustache/src/AttributeMustacheProvider.js","../../tko.provider.mustache/src/TextMustacheProvider.js","../../tko.provider.native/src/NativeProvider.js","../../tko.binding.core/src/click.js","../../tko.binding.core/src/css.js","../../tko.binding.core/src/descendantsComplete.js","../../tko.binding.core/src/enableDisable.js","../../tko.binding.core/src/hasfocus.js","../../tko.binding.core/src/options.js","../../tko.binding.core/src/style.js","../../tko.binding.core/src/textInput.js","../../tko.binding.core/src/uniqueName.js","../../tko.binding.core/src/value.js","../../tko.binding.core/src/visible.js","../../tko.binding.if/src/ConditionalBindingHandler.js","../../tko.binding.if/src/ifUnless.js","../../tko.binding.if/src/with.js","../../tko.binding.if/src/else.js","../../tko.binding.foreach/src/index.js","../../tko.binding.component/src/componentBinding.js","../../tko.binding.component/src/slotBinding.js","../../tko.filter.punches/src/index.js","../src/index.js","../../tko.binding.core/src/index.js","../../tko.binding.core/src/attr.js","../../tko.binding.core/src/checked.js","../../tko.binding.core/src/html.js","../../tko.binding.core/src/let.js","../../tko.binding.core/src/selectedOptions.js","../../tko.binding.core/src/submit.js","../../tko.binding.core/src/text.js","../../tko.binding.core/src/using.js","../../tko.binding.template/src/index.js","../../tko.binding.if/src/index.js","../../tko.binding.component/src/index.js"],"sourcesContent":["//\n// Array utilities\n//\n// Note that the array functions may be called with\n// Array-like things, such as NodeList.\n\nconst {isArray} = Array\n\nexport function arrayForEach (array, action, thisArg) {\n  if (arguments.length > 2) { action = action.bind(thisArg) }\n  for (let i = 0, j = array.length; i < j; ++i) {\n    action(array[i], i, array)\n  }\n}\n\nexport function arrayIndexOf (array, item) {\n  return (isArray(array) ? array : [...array]).indexOf(item)\n}\n\nexport function arrayFirst (array, predicate, predicateOwner) {\n  return (isArray(array) ? array : [...array])\n    .find(predicate, predicateOwner)\n}\n\nexport function arrayMap (array = [], mapping, thisArg) {\n  if (arguments.length > 2) { mapping = mapping.bind(thisArg) }\n  return array === null ? [] : Array.from(array, mapping)\n}\n\nexport function arrayRemoveItem (array, itemToRemove) {\n  var index = arrayIndexOf(array, itemToRemove)\n  if (index > 0) {\n    array.splice(index, 1)\n  } else if (index === 0) {\n    array.shift()\n  }\n}\n\nexport function arrayGetDistinctValues (array = []) {\n  const seen = new Set()\n  if (array === null) { return [] }\n  return (isArray(array) ? array : [...array])\n    .filter(item => seen.has(item) ? false : seen.add(item))\n}\n\nexport function arrayFilter (array, predicate, thisArg) {\n  if (arguments.length > 2) { predicate = predicate.bind(thisArg) }\n  return array === null ? [] : (isArray(array) ? array : [...array]).filter(predicate)\n}\n\nexport function arrayPushAll (array, valuesToPush) {\n  if (isArray(valuesToPush)) {\n    array.push.apply(array, valuesToPush)\n  } else {\n    for (var i = 0, j = valuesToPush.length; i < j; i++) { array.push(valuesToPush[i]) }\n  }\n  return array\n}\n\nexport function addOrRemoveItem (array, value, included) {\n  var existingEntryIndex = arrayIndexOf(typeof array.peek === 'function' ? array.peek() : array, value)\n  if (existingEntryIndex < 0) {\n    if (included) { array.push(value) }\n  } else {\n    if (!included) { array.splice(existingEntryIndex, 1) }\n  }\n}\n\nexport function makeArray (arrayLikeObject) {\n  return Array.from(arrayLikeObject)\n}\n\nexport function range (min, max) {\n  min = typeof min === 'function' ? min() : min\n  max = typeof max === 'function' ? max() : max\n  var result = []\n  for (var i = min; i <= max; i++) { result.push(i) }\n  return result\n}\n\n// Go through the items that have been added and deleted and try to find matches between them.\nexport function findMovesInArrayComparison (left, right, limitFailedCompares) {\n  if (left.length && right.length) {\n    var failedCompares, l, r, leftItem, rightItem\n    for (failedCompares = l = 0; (!limitFailedCompares || failedCompares < limitFailedCompares) && (leftItem = left[l]); ++l) {\n      for (r = 0; rightItem = right[r]; ++r) {\n        if (leftItem['value'] === rightItem['value']) {\n          leftItem['moved'] = rightItem['index']\n          rightItem['moved'] = leftItem['index']\n          right.splice(r, 1)         // This item is marked as moved; so remove it from right list\n          failedCompares = r = 0     // Reset failed compares count because we're checking for consecutive failures\n          break\n        }\n      }\n      failedCompares += r\n    }\n  }\n}\n\nvar statusNotInOld = 'added', statusNotInNew = 'deleted'\n\n    // Simple calculation based on Levenshtein distance.\nexport function compareArrays (oldArray, newArray, options) {\n    // For backward compatibility, if the third arg is actually a bool, interpret\n    // it as the old parameter 'dontLimitMoves'. Newer code should use { dontLimitMoves: true }.\n  options = (typeof options === 'boolean') ? { 'dontLimitMoves': options } : (options || {})\n  oldArray = oldArray || []\n  newArray = newArray || []\n\n  if (oldArray.length < newArray.length) { return compareSmallArrayToBigArray(oldArray, newArray, statusNotInOld, statusNotInNew, options) } else { return compareSmallArrayToBigArray(newArray, oldArray, statusNotInNew, statusNotInOld, options) }\n}\n\nfunction compareSmallArrayToBigArray (smlArray, bigArray, statusNotInSml, statusNotInBig, options) {\n  var myMin = Math.min,\n    myMax = Math.max,\n    editDistanceMatrix = [],\n    smlIndex, smlIndexMax = smlArray.length,\n    bigIndex, bigIndexMax = bigArray.length,\n    compareRange = (bigIndexMax - smlIndexMax) || 1,\n    maxDistance = smlIndexMax + bigIndexMax + 1,\n    thisRow, lastRow,\n    bigIndexMaxForRow, bigIndexMinForRow\n\n  for (smlIndex = 0; smlIndex <= smlIndexMax; smlIndex++) {\n    lastRow = thisRow\n    editDistanceMatrix.push(thisRow = [])\n    bigIndexMaxForRow = myMin(bigIndexMax, smlIndex + compareRange)\n    bigIndexMinForRow = myMax(0, smlIndex - 1)\n    for (bigIndex = bigIndexMinForRow; bigIndex <= bigIndexMaxForRow; bigIndex++) {\n      if (!bigIndex) { thisRow[bigIndex] = smlIndex + 1 } else if (!smlIndex)  // Top row - transform empty array into new array via additions\n              { thisRow[bigIndex] = bigIndex + 1 } else if (smlArray[smlIndex - 1] === bigArray[bigIndex - 1]) { thisRow[bigIndex] = lastRow[bigIndex - 1] }                  // copy value (no edit)\n      else {\n                var northDistance = lastRow[bigIndex] || maxDistance       // not in big (deletion)\n                var westDistance = thisRow[bigIndex - 1] || maxDistance    // not in small (addition)\n                thisRow[bigIndex] = myMin(northDistance, westDistance) + 1\n              }\n    }\n  }\n\n  var editScript = [], meMinusOne, notInSml = [], notInBig = []\n  for (smlIndex = smlIndexMax, bigIndex = bigIndexMax; smlIndex || bigIndex;) {\n    meMinusOne = editDistanceMatrix[smlIndex][bigIndex] - 1\n    if (bigIndex && meMinusOne === editDistanceMatrix[smlIndex][bigIndex - 1]) {\n      notInSml.push(editScript[editScript.length] = {     // added\n        'status': statusNotInSml,\n        'value': bigArray[--bigIndex],\n        'index': bigIndex })\n    } else if (smlIndex && meMinusOne === editDistanceMatrix[smlIndex - 1][bigIndex]) {\n      notInBig.push(editScript[editScript.length] = {     // deleted\n        'status': statusNotInBig,\n        'value': smlArray[--smlIndex],\n        'index': smlIndex })\n    } else {\n      --bigIndex\n      --smlIndex\n      if (!options['sparse']) {\n        editScript.push({\n          'status': 'retained',\n          'value': bigArray[bigIndex] })\n      }\n    }\n  }\n\n    // Set a limit on the number of consecutive non-matching comparisons; having it a multiple of\n    // smlIndexMax keeps the time complexity of this algorithm linear.\n  findMovesInArrayComparison(notInBig, notInSml, !options['dontLimitMoves'] && smlIndexMax * 10)\n\n  return editScript.reverse()\n}\n","//\n// Error handling\n// ---\n//\n// The default onError handler is to re-throw.\nimport options from './options.js'\n\nexport function catchFunctionErrors (delegate) {\n  if (!options.onError) { return delegate }\n  return (...args) => {\n    try {\n      return delegate(...args)\n    } catch (err) {\n      options.onError(err)\n    }\n  }\n}\n\nexport function deferError (error) {\n  safeSetTimeout(function () { throw error }, 0)\n}\n\nexport function safeSetTimeout (handler, timeout) {\n  return setTimeout(catchFunctionErrors(handler), timeout)\n}\n","//\n// Asynchronous functionality\n// ---\nimport { safeSetTimeout } from './error.js'\n\nexport function throttle (callback, timeout) {\n  var timeoutInstance\n  return function (...args) {\n    if (!timeoutInstance) {\n      timeoutInstance = safeSetTimeout(function () {\n        timeoutInstance = undefined\n        callback(...args)\n      }, timeout)\n    }\n  }\n}\n\nexport function debounce (callback, timeout) {\n  var timeoutInstance\n  return function (...args) {\n    clearTimeout(timeoutInstance)\n    timeoutInstance = safeSetTimeout(() => callback(...args), timeout)\n  }\n}\n","//\n// Object functions\n//\n\nexport function hasOwnProperty(obj, propName) {\n  return Object.prototype.hasOwnProperty.call(obj, propName)\n}\n\nexport function extend (target, source) {\n  if (source) {\n    for (var prop in source) {\n      if (hasOwnProperty(source, prop)) {\n        target[prop] = source[prop]\n      }\n    }\n  }\n  return target\n}\n\nexport function objectForEach (obj, action) {\n  for (var prop in obj) {\n    if (hasOwnProperty(obj, prop)) {\n      action(prop, obj[prop])\n    }\n  }\n}\n\nexport function objectMap (source, mapping, thisArg) {\n  if (!source) { return source }\n  if (arguments.length > 2) { mapping = mapping.bind(thisArg) }\n  var target = {}\n  for (var prop in source) {\n    if (hasOwnProperty(source, prop)) {\n      target[prop] = mapping(source[prop], prop, source)\n    }\n  }\n  return target\n}\nexport function getObjectOwnProperty (obj, propName) {\n  return hasOwnProperty(obj, propName) ? obj[propName] : undefined\n}\n\nexport function clonePlainObjectDeep (obj, seen) {\n  if (!seen) { seen = [] }\n\n  if (!obj || typeof obj !== 'object' ||\n        obj.constructor !== Object ||\n        seen.indexOf(obj) !== -1) {\n    return obj\n  }\n\n    // Anything that makes it below is a plain object that has not yet\n    // been seen/cloned.\n  seen.push(obj)\n\n  var result = {}\n  for (var prop in obj) {\n    if (hasOwnProperty(obj, prop)) {\n      result[prop] = clonePlainObjectDeep(obj[prop], seen)\n    }\n  }\n  return result\n}\n","\nfunction testOverwrite () {\n  try {\n    Object.defineProperty(function x () {}, 'length', {})\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nexport const functionSupportsLengthOverwrite = testOverwrite()\n\nexport function overwriteLengthPropertyIfSupported (fn, descriptor) {\n  if (functionSupportsLengthOverwrite) {\n    Object.defineProperty(fn, 'length', descriptor)\n  }\n}\n","//\n// String (and JSON)\n//\n\nexport function stringTrim (string) {\n  return string === null || string === undefined ? ''\n        : string.trim\n            ? string.trim()\n            : string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, '')\n}\n\nexport function stringStartsWith (string, startsWith) {\n  string = string || ''\n  if (startsWith.length > string.length) { return false }\n  return string.substring(0, startsWith.length) === startsWith\n}\n\nexport function parseJson (jsonString) {\n  if (typeof jsonString === 'string') {\n    jsonString = stringTrim(jsonString)\n    if (jsonString) {\n      if (JSON && JSON.parse) // Use native parsing where available\n            { return JSON.parse(jsonString) }\n      return (new Function('return ' + jsonString))() // Fallback on less safe parsing for older browsers\n    }\n  }\n  return null\n}\n","//\n// ES6 Symbols\n//\n\nexport var useSymbols = typeof Symbol === 'function'\n\nexport function createSymbolOrString (identifier) {\n  return useSymbols ? Symbol(identifier) : identifier\n}\n","//\n// DOM - CSS\n//\n\nimport { arrayForEach, addOrRemoveItem } from './array.js'\n\n// For details on the pattern for changing node classes\n// see: https://github.com/knockout/knockout/issues/1597\nvar cssClassNameRegex = /\\S+/g\n\nfunction toggleDomNodeCssClass (node, classNames, shouldHaveClass) {\n  var addOrRemoveFn\n  if (!classNames) { return }\n  if (typeof node.classList === 'object') {\n    addOrRemoveFn = node.classList[shouldHaveClass ? 'add' : 'remove']\n    arrayForEach(classNames.match(cssClassNameRegex), function (className) {\n      addOrRemoveFn.call(node.classList, className)\n    })\n  } else if (typeof node.className['baseVal'] === 'string') {\n        // SVG tag .classNames is an SVGAnimatedString instance\n    toggleObjectClassPropertyString(node.className, 'baseVal', classNames, shouldHaveClass)\n  } else {\n        // node.className ought to be a string.\n    toggleObjectClassPropertyString(node, 'className', classNames, shouldHaveClass)\n  }\n}\n\nfunction toggleObjectClassPropertyString (obj, prop, classNames, shouldHaveClass) {\n    // obj/prop is either a node/'className' or a SVGAnimatedString/'baseVal'.\n  var currentClassNames = obj[prop].match(cssClassNameRegex) || []\n  arrayForEach(classNames.match(cssClassNameRegex), function (className) {\n    addOrRemoveItem(currentClassNames, className, shouldHaveClass)\n  })\n  obj[prop] = currentClassNames.join(' ')\n}\n\nexport { toggleDomNodeCssClass }\n","//\n// Information about the DOM\n//\nimport { arrayFirst } from '../array.js'\n\nexport function domNodeIsContainedBy (node, containedByNode) {\n  if (node === containedByNode) { return true }\n  if (node.nodeType === 11) { return false } // Fixes issue #1162 - can't use node.contains for document fragments on IE8\n  if (containedByNode.contains) { return containedByNode.contains(node.nodeType !== 1 ? node.parentNode : node) }\n  if (containedByNode.compareDocumentPosition) { return (containedByNode.compareDocumentPosition(node) & 16) == 16 }\n  while (node && node != containedByNode) {\n    node = node.parentNode\n  }\n  return !!node\n}\n\nexport function domNodeIsAttachedToDocument (node) {\n  return domNodeIsContainedBy(node, node.ownerDocument.documentElement)\n}\n\nexport function anyDomNodeIsAttachedToDocument (nodes) {\n  return !!arrayFirst(nodes, domNodeIsAttachedToDocument)\n}\n\nexport function tagNameLower (element) {\n    // For HTML elements, tagName will always be upper case; for XHTML elements, it'll be lower case.\n    // Possible future optimization: If we know it's an element from an XHTML document (not HTML),\n    // we don't need to do the .toLowerCase() as it will always be lower case anyway.\n  return element && element.tagName && element.tagName.toLowerCase()\n}\n\nexport function isDomElement (obj) {\n  if (window.HTMLElement) {\n    return obj instanceof HTMLElement\n  } else {\n    return obj && obj.tagName && obj.nodeType === 1\n  }\n}\n\nexport function isDocumentFragment (obj) {\n  if (window.DocumentFragment) {\n    return obj instanceof DocumentFragment\n  } else {\n    return obj && obj.nodeType === 11\n  }\n}\n","//\n// DOM node data\n//\nimport { ieVersion } from '../ie'\n\nconst datastoreTime = new Date().getTime()\nconst dataStoreKeyExpandoPropertyName = `__ko__${datastoreTime}`\nconst dataStoreSymbol = Symbol('Knockout data')\nvar dataStore\nlet uniqueId = 0\n\n/*\n * We considered using WeakMap, but it has a problem in IE 11 and Edge that\n * prevents using it cross-window, so instead we just store the data directly\n * on the node. See https://github.com/knockout/knockout/issues/2141\n */\nconst modern = {\n  getDataForNode (node, createIfNotFound) {\n    let dataForNode = node[dataStoreSymbol]\n    if (!dataForNode && createIfNotFound) {\n      dataForNode = node[dataStoreSymbol] = {}\n    }\n    return dataForNode\n  },\n\n  clear (node) {\n    if (node[dataStoreSymbol]) {\n      delete node[dataStoreSymbol]\n      return true\n    }\n    return false\n  }\n}\n\n/**\n * Old IE versions have memory issues if you store objects on the node, so we\n * use a separate data storage and link to it from the node using a string key.\n */\nconst IE = {\n  getDataforNode (node, createIfNotFound) {\n    let dataStoreKey = node[dataStoreKeyExpandoPropertyName]\n    const hasExistingDataStore = dataStoreKey && (dataStoreKey !== 'null') && dataStore[dataStoreKey]\n    if (!hasExistingDataStore) {\n      if (!createIfNotFound) {\n        return undefined\n      }\n      dataStoreKey = node[dataStoreKeyExpandoPropertyName] = 'ko' + uniqueId++\n      dataStore[dataStoreKey] = {}\n    }\n    return dataStore[dataStoreKey]\n  },\n\n  clear (node) {\n    const dataStoreKey = node[dataStoreKeyExpandoPropertyName]\n    if (dataStoreKey) {\n      delete dataStore[dataStoreKey]\n      node[dataStoreKeyExpandoPropertyName] = null\n      return true // Exposing 'did clean' flag purely so specs can infer whether things have been cleaned up as intended\n    }\n    return false\n  }\n}\n\nconst {getDataForNode, clear} = ieVersion ? IE : modern\n\n/**\n * Create a unique key-string identifier.\n */\nexport function nextKey () {\n  return (uniqueId++) + dataStoreKeyExpandoPropertyName\n}\n\nfunction get (node, key) {\n  const dataForNode = getDataForNode(node, false)\n  return dataForNode && dataForNode[key]\n}\n\nfunction set (node, key, value) {\n  // Make sure we don't actually create a new domData key if we are actually deleting a value\n  var dataForNode = getDataForNode(node, value !== undefined /* createIfNotFound */)\n  dataForNode && (dataForNode[key] = value)\n}\n\nfunction getOrSet (node, key, value) {\n  const dataForNode = getDataForNode(node, true, /* createIfNotFound */)\n  return dataForNode[key] || (dataForNode[key] = value)\n}\n\nexport { get, set, getOrSet, clear }\n","//\n// DOM node disposal\n//\n/* eslint no-cond-assign: 0 */\nimport * as domData from './data.js'\nimport { default as options } from '../options.js'\nimport {arrayRemoveItem, arrayIndexOf} from '../array.js'\nimport {jQueryInstance} from '../jquery.js'\n\nvar domDataKey = domData.nextKey()\n// Node types:\n// 1: Element\n// 8: Comment\n// 9: Document\nvar cleanableNodeTypes = { 1: true, 8: true, 9: true }\nvar cleanableNodeTypesWithDescendants = { 1: true, 9: true }\n\nfunction getDisposeCallbacksCollection (node, createIfNotFound) {\n  var allDisposeCallbacks = domData.get(node, domDataKey)\n  if ((allDisposeCallbacks === undefined) && createIfNotFound) {\n    allDisposeCallbacks = []\n    domData.set(node, domDataKey, allDisposeCallbacks)\n  }\n  return allDisposeCallbacks\n}\nfunction destroyCallbacksCollection (node) {\n  domData.set(node, domDataKey, undefined)\n}\n\nfunction cleanSingleNode (node) {\n    // Run all the dispose callbacks\n  var callbacks = getDisposeCallbacksCollection(node, false)\n  if (callbacks) {\n    callbacks = callbacks.slice(0) // Clone, as the array may be modified during iteration (typically, callbacks will remove themselves)\n    for (let i = 0; i < callbacks.length; i++) { callbacks[i](node) }\n  }\n\n    // Erase the DOM data\n  domData.clear(node)\n\n    // Perform cleanup needed by external libraries (currently only jQuery, but can be extended)\n  for (let i = 0, j = otherNodeCleanerFunctions.length; i < j; ++i) {\n    otherNodeCleanerFunctions[i](node)\n  }\n\n  if (options.cleanExternalData) {\n    options.cleanExternalData(node)\n  }\n\n    // Clear any immediate-child comment nodes, as these wouldn't have been found by\n    // node.getElementsByTagName('*') in cleanNode() (comment nodes aren't elements)\n  if (cleanableNodeTypesWithDescendants[node.nodeType]) {\n    cleanNodesInList(node.childNodes, true /* onlyComments */)\n  }\n}\n\nfunction cleanNodesInList (nodeList, onlyComments) {\n  const cleanedNodes = []\n  let lastCleanedNode\n  for (var i = 0; i < nodeList.length; i++) {\n    if (!onlyComments || nodeList[i].nodeType === 8) {\n      cleanSingleNode(cleanedNodes[cleanedNodes.length] = lastCleanedNode = nodeList[i]);\n      if (nodeList[i] !== lastCleanedNode) {\n        while (i-- && arrayIndexOf(cleanedNodes, nodeList[i]) === -1) {}\n      }\n    }\n  }\n}\n\n// Exports\nexport function addDisposeCallback (node, callback) {\n  if (typeof callback !== 'function') { throw new Error('Callback must be a function') }\n  getDisposeCallbacksCollection(node, true).push(callback)\n}\n\nexport function removeDisposeCallback (node, callback) {\n  var callbacksCollection = getDisposeCallbacksCollection(node, false)\n  if (callbacksCollection) {\n    arrayRemoveItem(callbacksCollection, callback)\n    if (callbacksCollection.length === 0) { destroyCallbacksCollection(node) }\n  }\n}\n\nexport function cleanNode (node) {\n  // First clean this node, where applicable\n  if (cleanableNodeTypes[node.nodeType]) {\n    cleanSingleNode(node)\n\n    // ... then its descendants, where applicable\n    if (cleanableNodeTypesWithDescendants[node.nodeType]) {\n      cleanNodesInList(node.getElementsByTagName(\"*\"))\n    }\n  }\n  return node\n}\n\nexport function removeNode (node) {\n  cleanNode(node)\n  if (node.parentNode) { node.parentNode.removeChild(node) }\n}\n\n// Expose supplemental node cleaning functions.\nexport const otherNodeCleanerFunctions = []\n\nexport function addCleaner (fn) {\n  otherNodeCleanerFunctions.push(fn)\n}\n\nexport function removeCleaner (fn) {\n  const fnIndex = otherNodeCleanerFunctions.indexOf(fn)\n  if (fnIndex >= 0) { otherNodeCleanerFunctions.splice(fnIndex, 1) }\n}\n\n// Special support for jQuery here because it's so commonly used.\n// Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData\n// so notify it to tear down any resources associated with the node & descendants here.\nexport function cleanjQueryData (node) {\n  var jQueryCleanNodeFn = jQueryInstance ? jQueryInstance.cleanData : null\n\n  if (jQueryCleanNodeFn) {\n    jQueryCleanNodeFn([node])\n  }\n}\n\notherNodeCleanerFunctions.push(cleanjQueryData)\n","//\n// DOM Events\n//\n\nimport { objectForEach } from '../object.js'\nimport { jQueryInstance } from '../jquery.js'\nimport { ieVersion } from '../ie.js'\nimport { catchFunctionErrors } from '../error.js'\n\nimport { tagNameLower } from './info.js'\nimport { addDisposeCallback } from './disposal.js'\nimport options from '../options.js'\n\n// Represent the known event types in a compact way, then at runtime transform it into a hash with event name as key (for fast lookup)\nvar knownEvents = {},\n  knownEventTypesByEventName = {}\n\nvar keyEventTypeName = (options.global.navigator && /Firefox\\/2/i.test(options.global.navigator.userAgent)) ? 'KeyboardEvent' : 'UIEvents'\n\nknownEvents[keyEventTypeName] = ['keyup', 'keydown', 'keypress']\n\nknownEvents['MouseEvents'] = [\n  'click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseover',\n  'mouseout', 'mouseenter', 'mouseleave']\n\nobjectForEach(knownEvents, function (eventType, knownEventsForType) {\n  if (knownEventsForType.length) {\n    for (var i = 0, j = knownEventsForType.length; i < j; i++) { knownEventTypesByEventName[knownEventsForType[i]] = eventType }\n  }\n})\n\nfunction isClickOnCheckableElement (element, eventType) {\n  if ((tagNameLower(element) !== 'input') || !element.type) return false\n  if (eventType.toLowerCase() != 'click') return false\n  var inputType = element.type\n  return (inputType == 'checkbox') || (inputType == 'radio')\n}\n\n// Workaround for an IE9 issue - https://github.com/SteveSanderson/knockout/issues/406\nvar eventsThatMustBeRegisteredUsingAttachEvent = { 'propertychange': true }\nlet jQueryEventAttachName\n\nexport function registerEventHandler (element, eventType, handler, eventOptions = false) {\n  const wrappedHandler = catchFunctionErrors(handler)\n  const mustUseAttachEvent = ieVersion && eventsThatMustBeRegisteredUsingAttachEvent[eventType]\n  const mustUseNative = Boolean(eventOptions)\n\n  if (!options.useOnlyNativeEvents && !mustUseAttachEvent && !mustUseNative && jQueryInstance) {\n    if (!jQueryEventAttachName) {\n      jQueryEventAttachName = (typeof jQueryInstance(element).on === 'function') ? 'on' : 'bind'\n    }\n    jQueryInstance(element)[jQueryEventAttachName](eventType, wrappedHandler)\n  } else if (!mustUseAttachEvent && typeof element.addEventListener === 'function') {\n    element.addEventListener(eventType, wrappedHandler, eventOptions)\n  } else if (typeof element.attachEvent !== 'undefined') {\n    const attachEventHandler = function (event) { wrappedHandler.call(element, event) }\n    const attachEventName = 'on' + eventType\n    element.attachEvent(attachEventName, attachEventHandler)\n\n    // IE does not dispose attachEvent handlers automatically (unlike with addEventListener)\n    // so to avoid leaks, we have to remove them manually. See bug #856\n    addDisposeCallback(element, function () {\n      element.detachEvent(attachEventName, attachEventHandler)\n    })\n  } else {\n    throw new Error(\"Browser doesn't support addEventListener or attachEvent\")\n  }\n}\n\nexport function triggerEvent (element, eventType) {\n  if (!(element && element.nodeType)) { throw new Error('element must be a DOM node when calling triggerEvent') }\n\n    // For click events on checkboxes and radio buttons, jQuery toggles the element checked state *after* the\n    // event handler runs instead of *before*. (This was fixed in 1.9 for checkboxes but not for radio buttons.)\n    // IE doesn't change the checked state when you trigger the click event using \"fireEvent\".\n    // In both cases, we'll use the click method instead.\n  var useClickWorkaround = isClickOnCheckableElement(element, eventType)\n\n  if (!options.useOnlyNativeEvents && jQueryInstance && !useClickWorkaround) {\n    jQueryInstance(element).trigger(eventType)\n  } else if (typeof document.createEvent === 'function') {\n    if (typeof element.dispatchEvent === 'function') {\n      var eventCategory = knownEventTypesByEventName[eventType] || 'HTMLEvents'\n      var event = document.createEvent(eventCategory)\n      event.initEvent(eventType, true, true, options.global, 0, 0, 0, 0, 0, false, false, false, false, 0, element)\n      element.dispatchEvent(event)\n    } else { throw new Error(\"The supplied element doesn't support dispatchEvent\") }\n  } else if (useClickWorkaround && element.click) {\n    element.click()\n  } else if (typeof element.fireEvent !== 'undefined') {\n    element.fireEvent('on' + eventType)\n  } else {\n    throw new Error(\"Browser doesn't support triggering events\")\n  }\n}\n","//\n// DOM manipulation\n//\n/* eslint no-empty: 0 */\nimport { makeArray } from '../array.js'\nimport { ieVersion } from '../ie.js'\nimport { cleanNode, removeNode } from './disposal.js'\n\nexport function moveCleanedNodesToContainerElement (nodes) {\n    // Ensure it's a real array, as we're about to reparent the nodes and\n    // we don't want the underlying collection to change while we're doing that.\n  var nodesArray = makeArray(nodes)\n  var templateDocument = (nodesArray[0] && nodesArray[0].ownerDocument) || document\n\n  var container = templateDocument.createElement('div')\n  for (var i = 0, j = nodesArray.length; i < j; i++) {\n    container.appendChild(cleanNode(nodesArray[i]))\n  }\n  return container\n}\n\nexport function cloneNodes (nodesArray, shouldCleanNodes) {\n  for (var i = 0, j = nodesArray.length, newNodesArray = []; i < j; i++) {\n    var clonedNode = nodesArray[i].cloneNode(true)\n    newNodesArray.push(shouldCleanNodes ? cleanNode(clonedNode) : clonedNode)\n  }\n  return newNodesArray\n}\n\nexport function setDomNodeChildren (domNode, childNodes) {\n  emptyDomNode(domNode)\n  if (childNodes) {\n    for (var i = 0, j = childNodes.length; i < j; i++) { domNode.appendChild(childNodes[i]) }\n  }\n}\n\nexport function replaceDomNodes (nodeToReplaceOrNodeArray, newNodesArray) {\n  var nodesToReplaceArray = nodeToReplaceOrNodeArray.nodeType ? [nodeToReplaceOrNodeArray] : nodeToReplaceOrNodeArray\n  if (nodesToReplaceArray.length > 0) {\n    var insertionPoint = nodesToReplaceArray[0]\n    var parent = insertionPoint.parentNode\n    for (var i = 0, j = newNodesArray.length; i < j; i++) { parent.insertBefore(newNodesArray[i], insertionPoint) }\n    for (i = 0, j = nodesToReplaceArray.length; i < j; i++) {\n      removeNode(nodesToReplaceArray[i])\n    }\n  }\n}\n\nexport function setElementName (element, name) {\n  element.name = name\n\n    // Workaround IE 6/7 issue\n    // - https://github.com/SteveSanderson/knockout/issues/197\n    // - http://www.matts411.com/post/setting_the_name_attribute_in_ie_dom/\n  if (ieVersion <= 7) {\n    try {\n      element.mergeAttributes(document.createElement(\"<input name='\" + element.name + \"'/>\"), false)\n    } catch (e) {} // For IE9 with doc mode \"IE9 Standards\" and browser mode \"IE9 Compatibility View\"\n  }\n}\n\nexport function emptyDomNode (domNode) {\n  while (domNode.firstChild) {\n    removeNode(domNode.firstChild)\n  }\n}\n","//\n//  DOM node manipulation\n//\nimport { ieVersion } from '../ie.js'\n\nexport function fixUpContinuousNodeArray (continuousNodeArray, parentNode) {\n    // Before acting on a set of nodes that were previously outputted by a template function, we have to reconcile\n    // them against what is in the DOM right now. It may be that some of the nodes have already been removed, or that\n    // new nodes might have been inserted in the middle, for example by a binding. Also, there may previously have been\n    // leading comment nodes (created by rewritten string-based templates) that have since been removed during binding.\n    // So, this function translates the old \"map\" output array into its best guess of the set of current DOM nodes.\n    //\n    // Rules:\n    //   [A] Any leading nodes that have been removed should be ignored\n    //       These most likely correspond to memoization nodes that were already removed during binding\n    //       See https://github.com/knockout/knockout/pull/440\n    //   [B] Any trailing nodes that have been remove should be ignored\n    //       This prevents the code here from adding unrelated nodes to the array while processing rule [C]\n    //       See https://github.com/knockout/knockout/pull/1903\n    //   [C] We want to output a continuous series of nodes. So, ignore any nodes that have already been removed,\n    //       and include any nodes that have been inserted among the previous collection\n\n  if (continuousNodeArray.length) {\n        // The parent node can be a virtual element; so get the real parent node\n    parentNode = (parentNode.nodeType === 8 && parentNode.parentNode) || parentNode\n\n        // Rule [A]\n    while (continuousNodeArray.length && continuousNodeArray[0].parentNode !== parentNode) { continuousNodeArray.splice(0, 1) }\n\n        // Rule [B]\n    while (continuousNodeArray.length > 1 && continuousNodeArray[continuousNodeArray.length - 1].parentNode !== parentNode) { continuousNodeArray.length-- }\n\n        // Rule [C]\n    if (continuousNodeArray.length > 1) {\n      var current = continuousNodeArray[0], last = continuousNodeArray[continuousNodeArray.length - 1]\n            // Replace with the actual new continuous node set\n      continuousNodeArray.length = 0\n      while (current !== last) {\n        continuousNodeArray.push(current)\n        current = current.nextSibling\n      }\n      continuousNodeArray.push(last)\n    }\n  }\n  return continuousNodeArray\n}\n\nexport function setOptionNodeSelectionState (optionNode, isSelected) {\n    // IE6 sometimes throws \"unknown error\" if you try to write to .selected directly, whereas Firefox struggles with setAttribute. Pick one based on browser.\n  if (ieVersion < 7) { optionNode.setAttribute('selected', isSelected) } else { optionNode.selected = isSelected }\n}\n\nexport function forceRefresh (node) {\n    // Workaround for an IE9 rendering bug - https://github.com/SteveSanderson/knockout/issues/209\n  if (ieVersion >= 9) {\n        // For text nodes and comment nodes (most likely virtual elements), we will have to refresh the container\n    var elem = node.nodeType == 1 ? node : node.parentNode\n    if (elem.style) { elem.style.zoom = elem.style.zoom }\n  }\n}\n\nexport function ensureSelectElementIsRenderedCorrectly (selectElement) {\n    // Workaround for IE9 rendering bug - it doesn't reliably display all the text in dynamically-added select boxes unless you force it to re-render by updating the width.\n    // (See https://github.com/SteveSanderson/knockout/issues/312, http://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)\n    // Also fixes IE7 and IE8 bug that causes selects to be zero width if enclosed by 'if' or 'with'. (See issue #839)\n  if (ieVersion) {\n    var originalWidth = selectElement.style.width\n    selectElement.style.width = 0\n    selectElement.style.width = originalWidth\n  }\n}\n","/* eslint no-cond-assign: 0 */\n//\n// Virtual Elements\n//\n//\n// \"Virtual elements\" is an abstraction on top of the usual DOM API which understands the notion that comment nodes\n// may be used to represent hierarchy (in addition to the DOM's natural hierarchy).\n// If you call the DOM-manipulating functions on ko.virtualElements, you will be able to read and write the state\n// of that virtual hierarchy\n//\n// The point of all this is to support containerless templates (e.g., <!-- ko foreach:someCollection -->blah<!-- /ko -->)\n// without having to scatter special cases all over the binding and templating code.\n\n// IE 9 cannot reliably read the \"nodeValue\" property of a comment node (see https://github.com/SteveSanderson/knockout/issues/186)\n// but it does give them a nonstandard alternative property called \"text\" that it can read reliably. Other browsers don't have that property.\n// So, use node.text where available, and node.nodeValue elsewhere\nimport { emptyDomNode, setDomNodeChildren as setRegularDomNodeChildren } from './manipulation.js'\nimport { removeNode } from './disposal.js'\nimport { tagNameLower } from './info.js'\nimport * as domData from './data'\nimport options from '../options'\n\nvar commentNodesHaveTextProperty = options.document && options.document.createComment('test').text === '<!--test-->'\n\nexport var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/ : /^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/\nexport var endCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*\\/ko\\s*-->$/ : /^\\s*\\/ko\\s*$/\nvar htmlTagsWithOptionallyClosingChildren = { 'ul': true, 'ol': true }\n\nexport function isStartComment (node) {\n  return (node.nodeType == 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue)\n}\n\nexport function isEndComment (node) {\n  return (node.nodeType == 8) && endCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue)\n}\n\nfunction isUnmatchedEndComment (node) {\n  return isEndComment(node) && !domData.get(node, matchedEndCommentDataKey)\n}\n\nconst matchedEndCommentDataKey = '__ko_matchedEndComment__'\n\nexport function getVirtualChildren (startComment, allowUnbalanced) {\n  var currentNode = startComment\n  var depth = 1\n  var children = []\n  while (currentNode = currentNode.nextSibling) {\n    if (isEndComment(currentNode)) {\n      domData.set(currentNode, matchedEndCommentDataKey, true)\n      depth--\n      if (depth === 0) { return children }\n    }\n\n    children.push(currentNode)\n\n    if (isStartComment(currentNode)) { depth++ }\n  }\n  if (!allowUnbalanced) { throw new Error('Cannot find closing comment tag to match: ' + startComment.nodeValue) }\n  return null\n}\n\nfunction getMatchingEndComment (startComment, allowUnbalanced) {\n  var allVirtualChildren = getVirtualChildren(startComment, allowUnbalanced)\n  if (allVirtualChildren) {\n    if (allVirtualChildren.length > 0) { return allVirtualChildren[allVirtualChildren.length - 1].nextSibling }\n    return startComment.nextSibling\n  } else { return null } // Must have no matching end comment, and allowUnbalanced is true\n}\n\nfunction getUnbalancedChildTags (node) {\n    // e.g., from <div>OK</div><!-- ko blah --><span>Another</span>, returns: <!-- ko blah --><span>Another</span>\n    //       from <div>OK</div><!-- /ko --><!-- /ko -->,             returns: <!-- /ko --><!-- /ko -->\n  var childNode = node.firstChild, captureRemaining = null\n  if (childNode) {\n    do {\n      if (captureRemaining)                   // We already hit an unbalanced node and are now just scooping up all subsequent nodes\n          { captureRemaining.push(childNode) } else if (isStartComment(childNode)) {\n            var matchingEndComment = getMatchingEndComment(childNode, /* allowUnbalanced: */ true)\n            if (matchingEndComment)             // It's a balanced tag, so skip immediately to the end of this virtual set\n                  { childNode = matchingEndComment } else { captureRemaining = [childNode] } // It's unbalanced, so start capturing from this point\n          } else if (isEndComment(childNode)) {\n            captureRemaining = [childNode]     // It's unbalanced (if it wasn't, we'd have skipped over it already), so start capturing\n          }\n    } while (childNode = childNode.nextSibling)\n  }\n  return captureRemaining\n}\n\nexport var allowedBindings = {}\nexport var hasBindingValue = isStartComment\n\nexport function childNodes (node) {\n  return isStartComment(node) ? getVirtualChildren(node) : node.childNodes\n}\n\nexport function emptyNode (node) {\n  if (!isStartComment(node)) { emptyDomNode(node) } else {\n    var virtualChildren = childNodes(node)\n    for (var i = 0, j = virtualChildren.length; i < j; i++) { removeNode(virtualChildren[i]) }\n  }\n}\n\nexport function setDomNodeChildren (node, childNodes) {\n  if (!isStartComment(node)) { setRegularDomNodeChildren(node, childNodes) } else {\n    emptyNode(node)\n    const endCommentNode = node.nextSibling // Must be the next sibling, as we just emptied the children\n    const parentNode = endCommentNode.parentNode\n    for (var i = 0, j = childNodes.length; i < j; ++i) {\n      parentNode.insertBefore(childNodes[i], endCommentNode)\n    }\n  }\n}\n\nexport function prepend (containerNode, nodeToPrepend) {\n  if (!isStartComment(containerNode)) {\n    if (containerNode.firstChild) { containerNode.insertBefore(nodeToPrepend, containerNode.firstChild) } else { containerNode.appendChild(nodeToPrepend) }\n  } else {\n        // Start comments must always have a parent and at least one following sibling (the end comment)\n    containerNode.parentNode.insertBefore(nodeToPrepend, containerNode.nextSibling)\n  }\n}\n\nexport function insertAfter (containerNode, nodeToInsert, insertAfterNode) {\n  if (!insertAfterNode) {\n    prepend(containerNode, nodeToInsert)\n  } else if (!isStartComment(containerNode)) {\n        // Insert after insertion point\n    if (insertAfterNode.nextSibling) { containerNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling) } else { containerNode.appendChild(nodeToInsert) }\n  } else {\n        // Children of start comments must always have a parent and at least one following sibling (the end comment)\n    containerNode.parentNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling)\n  }\n}\n\nexport function firstChild (node) {\n  if (!isStartComment(node)) {\n    if (node.firstChild && isEndComment(node.firstChild)) {\n      throw new Error('Found invalid end comment, as the first child of ' + node.outerHTML)\n    }\n    return node.firstChild\n  }\n  if (!node.nextSibling || isEndComment(node.nextSibling)) {\n    return null\n  }\n  return node.nextSibling\n}\n\nexport function lastChild (node) {\n  let nextChild = firstChild(node)\n  let lastChildNode\n\n  do {\n    lastChildNode = nextChild\n  } while (nextChild = nextSibling(nextChild))\n\n  return lastChildNode\n}\n\nexport function nextSibling (node) {\n  if (isStartComment(node)) {\n    node = getMatchingEndComment(node)\n  }\n\n  if (node.nextSibling && isEndComment(node.nextSibling)) {\n    if (isUnmatchedEndComment(node.nextSibling)) {\n      throw Error('Found end comment without a matching opening comment, as next sibling of ' + node.outerHTML)\n    }\n    return null\n  } else {\n    return node.nextSibling\n  }\n}\n\nexport function previousSibling (node) {\n  var depth = 0\n  do {\n    if (node.nodeType === 8) {\n      if (isStartComment(node)) {\n        if (--depth === 0) {\n          return node\n        }\n      } else if (isEndComment(node)) {\n        depth++\n      }\n    } else {\n      if (depth === 0) { return node }\n    }\n  } while (node = node.previousSibling)\n}\n\nexport function virtualNodeBindingValue (node) {\n  var regexMatch = (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex)\n  return regexMatch ? regexMatch[1] : null\n}\n\nexport function normaliseVirtualElementDomStructure (elementVerified) {\n    // Workaround for https://github.com/SteveSanderson/knockout/issues/155\n    // (IE <= 8 or IE 9 quirks mode parses your HTML weirdly, treating closing </li> tags as if they don't exist, thereby moving comment nodes\n    // that are direct descendants of <ul> into the preceding <li>)\n  if (!htmlTagsWithOptionallyClosingChildren[tagNameLower(elementVerified)]) { return }\n\n    // Scan immediate children to see if they contain unbalanced comment tags. If they do, those comment tags\n    // must be intended to appear *after* that child, so move them there.\n  var childNode = elementVerified.firstChild\n  if (childNode) {\n    do {\n      if (childNode.nodeType === 1) {\n        var unbalancedTags = getUnbalancedChildTags(childNode)\n        if (unbalancedTags) {\n                    // Fix up the DOM by moving the unbalanced tags to where they most likely were intended to be placed - *after* the child\n          var nodeToInsertBefore = childNode.nextSibling\n          for (var i = 0; i < unbalancedTags.length; i++) {\n            if (nodeToInsertBefore) { elementVerified.insertBefore(unbalancedTags[i], nodeToInsertBefore) } else { elementVerified.appendChild(unbalancedTags[i]) }\n          }\n        }\n      }\n    } while (childNode = childNode.nextSibling)\n  }\n}\n","//\n// HTML-based manipulation\n//\nimport { stringTrim } from '../string.js'\nimport { makeArray } from '../array.js'\nimport { emptyDomNode, moveCleanedNodesToContainerElement } from './manipulation.js'\nimport { jQueryInstance } from '../jquery.js'\nimport { forceRefresh } from './fixes.js'\nimport * as virtualElements from './virtualElements'\nimport options from '../options'\n\nvar none = [0, '', ''],\n  table = [1, '<table>', '</table>'],\n  tbody = [2, '<table><tbody>', '</tbody></table>'],\n  colgroup = [ 2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  tr = [3, '<table><tbody><tr>', '</tr></tbody></table>'],\n  select = [1, \"<select multiple='multiple'>\", '</select>'],\n  fieldset = [1, '<fieldset>', '</fieldset>'],\n  map = [1, '<map>', '</map>'],\n  object = [1, '<object>', '</object>'],\n  lookup = {\n    'area': map,\n    'col': colgroup,\n    'colgroup': table,\n    'caption': table,\n    'legend': fieldset,\n    'thead': table,\n    'tbody': table,\n    'tfoot': table,\n    'tr': tbody,\n    'td': tr,\n    'th': tr,\n    'option': select,\n    'optgroup': select,\n    'param': object\n  },\n\n    // The canonical way to test that the HTML5 <template> tag is supported\n  supportsTemplateTag = options.document && 'content' in options.document.createElement('template')\n\nfunction getWrap (tags) {\n  const m = tags.match(/^(?:<!--.*?-->\\s*?)*?<([a-z]+)[\\s>]/)\n  return (m && lookup[m[1]]) || none\n}\n\nfunction simpleHtmlParse (html, documentContext) {\n  documentContext || (documentContext = document)\n  var windowContext = documentContext['parentWindow'] || documentContext['defaultView'] || window\n\n    // Based on jQuery's \"clean\" function, but only accounting for table-related elements.\n    // If you have referenced jQuery, this won't be used anyway - KO will use jQuery's \"clean\" function directly\n\n    // Note that there's still an issue in IE < 9 whereby it will discard comment nodes that are the first child of\n    // a descendant node. For example: \"<div><!-- mycomment -->abc</div>\" will get parsed as \"<div>abc</div>\"\n    // This won't affect anyone who has referenced jQuery, and there's always the workaround of inserting a dummy node\n    // (possibly a text node) in front of the comment. So, KO does not attempt to workaround this IE issue automatically at present.\n\n    // Trim whitespace, otherwise indexOf won't work as expected\n  var tags = stringTrim(html).toLowerCase(), div = documentContext.createElement('div'),\n    wrap = getWrap(tags),\n    depth = wrap[0]\n\n    // Go to html and back, then peel off extra wrappers\n    // Note that we always prefix with some dummy text, because otherwise, IE<9 will strip out leading comment nodes in descendants. Total madness.\n  var markup = 'ignored<div>' + wrap[1] + html + wrap[2] + '</div>'\n  if (typeof windowContext['innerShiv'] === 'function') {\n        // Note that innerShiv is deprecated in favour of html5shiv. We should consider adding\n        // support for html5shiv (except if no explicit support is needed, e.g., if html5shiv\n        // somehow shims the native APIs so it just works anyway)\n    div.appendChild(windowContext['innerShiv'](markup))\n  } else {\n    div.innerHTML = markup\n  }\n\n    // Move to the right depth\n  while (depth--) { div = div.lastChild }\n\n  return makeArray(div.lastChild.childNodes)\n}\n\nfunction templateHtmlParse (html, documentContext) {\n  if (!documentContext) { documentContext = document }\n  var template = documentContext.createElement('template')\n  template.innerHTML = html\n  return makeArray(template.content.childNodes)\n}\n\nfunction jQueryHtmlParse (html, documentContext) {\n    // jQuery's \"parseHTML\" function was introduced in jQuery 1.8.0 and is a documented public API.\n  if (jQueryInstance.parseHTML) {\n    return jQueryInstance.parseHTML(html, documentContext) || [] // Ensure we always return an array and never null\n  } else {\n        // For jQuery < 1.8.0, we fall back on the undocumented internal \"clean\" function.\n    var elems = jQueryInstance.clean([html], documentContext)\n\n        // As of jQuery 1.7.1, jQuery parses the HTML by appending it to some dummy parent nodes held in an in-memory document fragment.\n        // Unfortunately, it never clears the dummy parent nodes from the document fragment, so it leaks memory over time.\n        // Fix this by finding the top-most dummy parent element, and detaching it from its owner fragment.\n    if (elems && elems[0]) {\n            // Find the top-most parent element that's a direct child of a document fragment\n      var elem = elems[0]\n      while (elem.parentNode && elem.parentNode.nodeType !== 11 /* i.e., DocumentFragment */) { elem = elem.parentNode }\n            // ... then detach it\n      if (elem.parentNode) { elem.parentNode.removeChild(elem) }\n    }\n\n    return elems\n  }\n}\n\n/**\n * parseHtmlFragment converts a string into an array of DOM Nodes.\n * If supported, it uses <template>-tag parsing, falling back on\n * jQuery parsing (if jQuery is present), and finally on a\n * straightforward parser.\n *\n * @param  {string} html            To be parsed.\n * @param  {Object} documentContext That owns the executing code.\n * @return {[DOMNode]}              Parsed DOM Nodes\n */\nexport function parseHtmlFragment (html, documentContext) {\n    // Prefer <template>-tag based HTML parsing.\n  return supportsTemplateTag ? templateHtmlParse(html, documentContext)\n\n        // Benefit from jQuery's on old browsers, where possible\n        // NOTE: jQuery's HTML parsing fails on element names like tr-*.\n        // See: https://github.com/jquery/jquery/pull/1988\n        : (jQueryInstance ? jQueryHtmlParse(html, documentContext)\n\n        // ... otherwise, this simple logic will do in most common cases.\n        : simpleHtmlParse(html, documentContext))\n}\n\nexport function parseHtmlForTemplateNodes (html, documentContext) {\n  const nodes = parseHtmlFragment(html, documentContext)\n  return (nodes.length && nodes[0].parentElement) || moveCleanedNodesToContainerElement(nodes)\n}\n\n/**\n  * setHtml empties the node's contents, unwraps the HTML, and\n  * sets the node's HTML using jQuery.html or parseHtmlFragment\n  *\n  * @param {DOMNode} node Node in which HTML needs to be set\n  * @param {DOMNode} html HTML to be inserted in node\n  * @returns undefined\n  */\nexport function setHtml (node, html) {\n  emptyDomNode(node)\n\n    // There's few cases where we would want to display a stringified\n    // function, so we unwrap it.\n  if (typeof html === 'function') {\n    html = html()\n  }\n\n  if ((html !== null) && (html !== undefined)) {\n    if (typeof html !== 'string') { html = html.toString() }\n\n        // If the browser supports <template> tags, prefer that, as\n        // it obviates all the complex workarounds of jQuery.\n        //\n        // However, jQuery contains a lot of sophisticated code to parse arbitrary HTML fragments,\n        // for example <tr> elements which are not normally allowed to exist on their own.\n        // If you've referenced jQuery (and template tags are not supported) we'll use that rather than duplicating its code.\n    if (jQueryInstance && !supportsTemplateTag) {\n      jQueryInstance(node).html(html)\n    } else {\n            // ... otherwise, use KO's own parsing logic.\n      var parsedNodes = parseHtmlFragment(html, node.ownerDocument)\n\n      if (node.nodeType === 8) {\n        if (html === null) {\n          virtualElements.emptyNode(node)\n        } else {\n          virtualElements.setDomNodeChildren(node, parsedNodes)\n        }\n      } else {\n        for (var i = 0; i < parsedNodes.length; i++) { node.appendChild(parsedNodes[i]) }\n      }\n    }\n  }\n}\n\n\nexport function setTextContent (element, textContent) {\n  var value = typeof textContent === 'function' ? textContent() : textContent\n  if ((value === null) || (value === undefined)) { value = '' }\n\n    // We need there to be exactly one child: a text node.\n    // If there are no children, more than one, or if it's not a text node,\n    // we'll clear everything and create a single text node.\n  var innerTextNode = virtualElements.firstChild(element)\n  if (!innerTextNode || innerTextNode.nodeType != 3 || virtualElements.nextSibling(innerTextNode)) {\n    virtualElements.setDomNodeChildren(element, [element.ownerDocument.createTextNode(value)])\n  } else {\n    innerTextNode.data = value\n  }\n\n  forceRefresh(element)\n}\n","//\n// Memoization\n//\nimport { arrayPushAll } from './array.js'\n\nvar memos = {}\n\nfunction randomMax8HexChars () {\n  return (((1 + Math.random()) * 0x100000000) | 0).toString(16).substring(1)\n}\n\nfunction generateRandomId () {\n  return randomMax8HexChars() + randomMax8HexChars()\n}\n\nfunction findMemoNodes (rootNode, appendToArray) {\n  if (!rootNode) { return }\n  if (rootNode.nodeType == 8) {\n    var memoId = parseMemoText(rootNode.nodeValue)\n    if (memoId != null) { appendToArray.push({ domNode: rootNode, memoId: memoId }) }\n  } else if (rootNode.nodeType == 1) {\n    for (var i = 0, childNodes = rootNode.childNodes, j = childNodes.length; i < j; i++) { findMemoNodes(childNodes[i], appendToArray) }\n  }\n}\n\nexport function memoize (callback) {\n  if (typeof callback !== 'function') { throw new Error('You can only pass a function to memoization.memoize()') }\n  var memoId = generateRandomId()\n  memos[memoId] = callback\n  return '<!--[ko_memo:' + memoId + ']-->'\n}\n\nexport function unmemoize (memoId, callbackParams) {\n  var callback = memos[memoId]\n  if (callback === undefined) { throw new Error(\"Couldn't find any memo with ID \" + memoId + \". Perhaps it's already been unmemoized.\") }\n  try {\n    callback.apply(null, callbackParams || [])\n    return true\n  } finally { delete memos[memoId] }\n}\n\nexport function unmemoizeDomNodeAndDescendants (domNode, extraCallbackParamsArray) {\n  var memos = []\n  findMemoNodes(domNode, memos)\n  for (var i = 0, j = memos.length; i < j; i++) {\n    var node = memos[i].domNode\n    var combinedParams = [node]\n    if (extraCallbackParamsArray) { arrayPushAll(combinedParams, extraCallbackParamsArray) }\n    unmemoize(memos[i].memoId, combinedParams)\n    node.nodeValue = '' // Neuter this node so we don't try to unmemoize it again\n    if (node.parentNode) { node.parentNode.removeChild(node) } // If possible, erase it totally (not always possible - someone else might just hold a reference to it then call unmemoizeDomNodeAndDescendants again)\n  }\n}\n\nexport function parseMemoText (memoText) {\n  var match = memoText.match(/^\\[ko_memo\\:(.*?)\\]$/)\n  return match ? match[1] : null\n}\n","//\n//  Tasks Micro-scheduler\n//  ===\n//\n/* eslint no-cond-assign: 0 */\nimport options from './options'\nimport { deferError } from './error.js'\n\nvar taskQueue = [],\n  taskQueueLength = 0,\n  nextHandle = 1,\n  nextIndexToProcess = 0,\n  w = options.global\n\nif (w && w.MutationObserver && !(w.navigator && w.navigator.standalone)) {\n    // Chrome 27+, Firefox 14+, IE 11+, Opera 15+, Safari 6.1+, node\n    // From https://github.com/petkaantonov/bluebird * Copyright (c) 2014 Petka Antonov * License: MIT\n  options.taskScheduler = (function (callback) {\n    var div = w.document.createElement('div')\n    new w.MutationObserver(callback).observe(div, {attributes: true})\n    return function () { div.classList.toggle('foo') }\n  })(scheduledProcess)\n} else if (w && w.document && 'onreadystatechange' in w.document.createElement('script')) {\n    // IE 6-10\n    // From https://github.com/YuzuJS/setImmediate * Copyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola * License: MIT\n  options.taskScheduler = function (callback) {\n    var script = document.createElement('script')\n    script.onreadystatechange = function () {\n      script.onreadystatechange = null\n      document.documentElement.removeChild(script)\n      script = null\n      callback()\n    }\n    document.documentElement.appendChild(script)\n  }\n} else {\n  options.taskScheduler = function (callback) {\n    setTimeout(callback, 0)\n  }\n}\n\nfunction processTasks () {\n  if (taskQueueLength) {\n        // Each mark represents the end of a logical group of tasks and the number of these groups is\n        // limited to prevent unchecked recursion.\n    var mark = taskQueueLength, countMarks = 0\n\n        // nextIndexToProcess keeps track of where we are in the queue; processTasks can be called recursively without issue\n    for (var task; nextIndexToProcess < taskQueueLength;) {\n      if (task = taskQueue[nextIndexToProcess++]) {\n        if (nextIndexToProcess > mark) {\n          if (++countMarks >= 5000) {\n            nextIndexToProcess = taskQueueLength   // skip all tasks remaining in the queue since any of them could be causing the recursion\n            deferError(Error(\"'Too much recursion' after processing \" + countMarks + ' task groups.'))\n            break\n          }\n          mark = taskQueueLength\n        }\n        try {\n          task()\n        } catch (ex) {\n          deferError(ex)\n        }\n      }\n    }\n  }\n}\n\nfunction scheduledProcess () {\n  processTasks()\n\n    // Reset the queue\n  nextIndexToProcess = taskQueueLength = taskQueue.length = 0\n}\n\nfunction scheduleTaskProcessing () {\n  options.taskScheduler(scheduledProcess)\n}\n\nexport function schedule (func) {\n  if (!taskQueueLength) {\n    scheduleTaskProcessing()\n  }\n\n  taskQueue[taskQueueLength++] = func\n  return nextHandle++\n}\n\nexport function cancel (handle) {\n  var index = handle - (nextHandle - taskQueueLength)\n  if (index >= nextIndexToProcess && index < taskQueueLength) {\n    taskQueue[index] = null\n  }\n}\n\n// For testing only: reset the queue and return the previous queue length\nexport function resetForTesting () {\n  var length = taskQueueLength - nextIndexToProcess\n  nextIndexToProcess = taskQueueLength = taskQueue.length = 0\n  return length\n}\n\nexport {processTasks as runEarly}\n","/**\n * Create a subscribable symbol that's used to identify subscribables.\n */\nexport const SUBSCRIBABLE_SYM = Symbol('Knockout Subscribable')\n\nexport function isSubscribable (instance) {\n  return (instance && instance[SUBSCRIBABLE_SYM]) || false\n}\n","//\n// dependencyDetection\n// ---\n//\n// In KO 3.x, dependencyDetection was also known as computedContext.\n//\nimport { isSubscribable } from './subscribableSymbol.js'\n\nconst outerFrames = []\nlet currentFrame\nlet lastId = 0\n\n// Return a unique ID that can be assigned to an observable for dependency tracking.\n// Theoretically, you could eventually overflow the number storage size, resulting\n// in duplicate IDs. But in JavaScript, the largest exact integral value is 2^53\n// or 9,007,199,254,740,992. If you created 1,000,000 IDs per second, it would\n// take over 285 years to reach that number.\n// Reference http://blog.vjeux.com/2010/javascript/javascript-max_int-number-limits.html\nfunction getId () {\n  return ++lastId\n}\n\nexport function begin (options) {\n  outerFrames.push(currentFrame)\n  currentFrame = options\n}\n\nexport function end () {\n  currentFrame = outerFrames.pop()\n}\n\nexport function registerDependency (subscribable) {\n  if (currentFrame) {\n    if (!isSubscribable(subscribable)) { throw new Error('Only subscribable things can act as dependencies') }\n    currentFrame.callback.call(currentFrame.callbackTarget, subscribable, subscribable._id || (subscribable._id = getId()))\n  }\n}\n\nexport function ignore (callback, callbackTarget, callbackArgs) {\n  try {\n    begin()\n    return callback.apply(callbackTarget, callbackArgs || [])\n  } finally {\n    end()\n  }\n}\n\nexport function getDependenciesCount () {\n  if (currentFrame) { return currentFrame.computed.getDependenciesCount() }\n}\n\nexport function getDependencies () {\n  if (currentFrame) { return currentFrame.computed.getDependencies() }\n}\n\nexport function isInitial () {\n  if (currentFrame) { return currentFrame.isInitial }\n}\n\nexport { ignore as ignoreDependencies }\n","//\n//  Defer Updates\n//  ===\n//\nimport { tasks } from 'tko.utils'\n\nexport function deferUpdates (target) {\n  if (target._deferUpdates) { return }\n  target._deferUpdates = true\n  target.limit(function (callback) {\n    let handle\n    let ignoreUpdates = false\n    return function () {\n      if (!ignoreUpdates) {\n        tasks.cancel(handle)\n        handle = tasks.schedule(callback)\n        try {\n          ignoreUpdates = true\n          target.notifySubscribers(undefined, 'dirty')\n        } finally {\n          ignoreUpdates = false\n        }\n      }\n    }\n  })\n}\n","//\n// Observable extenders\n// ---\n//\nimport {\n    options, objectForEach,\n    throttle as throttleFn, debounce as debounceFn\n} from 'tko.utils'\n\nimport { deferUpdates } from './defer.js'\n\nvar primitiveTypes = {\n  'undefined': 1, 'boolean': 1, 'number': 1, 'string': 1\n}\n\nexport function valuesArePrimitiveAndEqual (a, b) {\n  var oldValueIsPrimitive = (a === null) || (typeof (a) in primitiveTypes)\n  return oldValueIsPrimitive ? (a === b) : false\n}\n\nexport function applyExtenders (requestedExtenders) {\n  var target = this\n  if (requestedExtenders) {\n    objectForEach(requestedExtenders, function (key, value) {\n      var extenderHandler = extenders[key]\n      if (typeof extenderHandler === 'function') {\n        target = extenderHandler(target, value) || target\n      } else {\n        options.onError(new Error('Extender not found: ' + key))\n      }\n    })\n  }\n  return target\n}\n\n/*\n                --- DEFAULT EXTENDERS ---\n */\n\n// Change when notifications are published.\nexport function notify (target, notifyWhen) {\n  target.equalityComparer = notifyWhen == 'always'\n        ? null  // null equalityComparer means to always notify\n        : valuesArePrimitiveAndEqual\n}\n\nexport function deferred (target, option) {\n  if (option !== true) {\n    throw new Error('The \\'deferred\\' extender only accepts the value \\'true\\', because it is not supported to turn deferral off once enabled.')\n  }\n  deferUpdates(target)\n}\n\nexport function rateLimit (target, options) {\n  var timeout, method, limitFunction\n\n  if (typeof options === 'number') {\n    timeout = options\n  } else {\n    timeout = options.timeout\n    method = options.method\n  }\n\n    // rateLimit supersedes deferred updates\n  target._deferUpdates = false\n\n  limitFunction = method === 'notifyWhenChangesStop' ? debounceFn : throttleFn\n\n  target.limit(function (callback) {\n    return limitFunction(callback, timeout)\n  })\n}\n\nexport var extenders = {\n  notify: notify,\n  deferred: deferred,\n  rateLimit: rateLimit\n}\n","/* eslint no-cond-assign: 0 */\nimport {\n    arrayRemoveItem, objectForEach, options\n} from 'tko.utils'\n\nimport Subscription from './Subscription'\nimport { SUBSCRIBABLE_SYM } from './subscribableSymbol'\nimport { applyExtenders } from './extenders.js'\nimport * as dependencyDetection from './dependencyDetection.js'\nexport { isSubscribable } from './subscribableSymbol'\n\n// Descendants may have a LATEST_VALUE, which if present\n// causes TC39 subscriptions to emit the latest value when\n// subscribed.\nexport const LATEST_VALUE = Symbol('Knockout latest value')\n\nexport function subscribable () {\n  Object.setPrototypeOf(this, ko_subscribable_fn)\n  ko_subscribable_fn.init(this)\n}\n\nexport var defaultEvent = 'change'\n\nvar ko_subscribable_fn = {\n  [SUBSCRIBABLE_SYM]: true,\n  [Symbol.observable] () { return this },\n\n  init (instance) {\n    instance._subscriptions = { change: [] }\n    instance._versionNumber = 1\n  },\n\n  subscribe (callback, callbackTarget, event) {\n    // TC39 proposed standard Observable { next: () => ... }\n    const isTC39Callback = typeof callback === 'object' && callback.next\n\n    event = event || defaultEvent\n    const observer = isTC39Callback ? callback : {\n      next: callbackTarget ? callback.bind(callbackTarget) : callback\n    }\n\n    const subscriptionInstance = new Subscription(this, observer, () => {\n      arrayRemoveItem(this._subscriptions[event], subscriptionInstance)\n      if (this.afterSubscriptionRemove) {\n        this.afterSubscriptionRemove(event)\n      }\n    })\n\n    if (this.beforeSubscriptionAdd) {\n      this.beforeSubscriptionAdd(event)\n    }\n\n    if (!this._subscriptions[event]) {\n      this._subscriptions[event] = []\n    }\n    this._subscriptions[event].push(subscriptionInstance)\n\n    // Have TC39 `subscribe` immediately emit.\n    // https://github.com/tc39/proposal-observable/issues/190\n\n    if (isTC39Callback && LATEST_VALUE in this) {\n      observer.next(this[LATEST_VALUE])\n    }\n\n    return subscriptionInstance\n  },\n\n  notifySubscribers (valueToNotify, event) {\n    event = event || defaultEvent\n    if (event === defaultEvent) {\n      this.updateVersion()\n    }\n    if (this.hasSubscriptionsForEvent(event)) {\n      const subs = event === defaultEvent && this._changeSubscriptions\n        || [...this._subscriptions[event]]\n\n      try {\n        dependencyDetection.begin() // Begin suppressing dependency detection (by setting the top frame to undefined)\n        for (let i = 0, subscriptionInstance; subscriptionInstance = subs[i]; ++i) {\n                    // In case a subscription was disposed during the arrayForEach cycle, check\n                    // for isDisposed on each subscription before invoking its callback\n          if (!subscriptionInstance._isDisposed) {\n            subscriptionInstance._callback(valueToNotify)\n          }\n        }\n      } finally {\n        dependencyDetection.end() // End suppressing dependency detection\n      }\n    }\n  },\n\n  getVersion () {\n    return this._versionNumber\n  },\n\n  hasChanged (versionToCheck) {\n    return this.getVersion() !== versionToCheck\n  },\n\n  updateVersion () {\n    ++this._versionNumber\n  },\n\n  hasSubscriptionsForEvent (event) {\n    return this._subscriptions[event] && this._subscriptions[event].length\n  },\n\n  getSubscriptionsCount (event) {\n    if (event) {\n      return this._subscriptions[event] && this._subscriptions[event].length || 0\n    } else {\n      var total = 0\n      objectForEach(this._subscriptions, function (eventName, subscriptions) {\n        if (eventName !== 'dirty') {\n          total += subscriptions.length\n        }\n      })\n      return total\n    }\n  },\n\n  isDifferent (oldValue, newValue) {\n    return !this.equalityComparer ||\n               !this.equalityComparer(oldValue, newValue)\n  },\n\n  once (cb) {\n    const subs = this.subscribe((nv) => {\n      subs.dispose()\n      cb(nv)\n    })\n  },\n\n  when (test, returnValue) {\n    const current = this.peek()\n    const givenRv = arguments.length > 1\n    const testFn = typeof test === 'function' ? test : v => v === test\n    if (testFn(current)) {\n      return options.Promise.resolve(givenRv ? returnValue : current)\n    }\n    return new options.Promise((resolve, reject) => {\n      const subs = this.subscribe(newValue => {\n        if (testFn(newValue)) {\n          subs.dispose()\n          resolve(givenRv ? returnValue : newValue)\n        }\n      })\n    })\n  },\n\n  yet (test, ...args) {\n    const testFn = typeof test === 'function' ? test : v => v === test\n    const negated = v => !testFn(v)\n    return this.when(negated, ...args)\n  },\n\n  next () { return new Promise(resolve => this.once(resolve)) },\n\n  toString () { return '[object Object]' },\n\n  extend: applyExtenders\n}\n\n// For browsers that support proto assignment, we overwrite the prototype of each\n// observable instance. Since observables are functions, we need Function.prototype\n// to still be in the prototype chain.\nObject.setPrototypeOf(ko_subscribable_fn, Function.prototype)\n\nsubscribable.fn = ko_subscribable_fn\n","//\n//  Observable values\n//  ---\n//\nimport {\n  options, overwriteLengthPropertyIfSupported\n} from 'tko.utils'\n\nimport * as dependencyDetection from './dependencyDetection.js'\nimport { deferUpdates } from './defer.js'\nimport { subscribable, defaultEvent, LATEST_VALUE } from './subscribable.js'\nimport { valuesArePrimitiveAndEqual } from './extenders.js'\n\nexport function observable (initialValue) {\n  function Observable () {\n    if (arguments.length > 0) {\n            // Write\n            // Ignore writes if the value hasn't changed\n      if (Observable.isDifferent(Observable[LATEST_VALUE], arguments[0])) {\n        Observable.valueWillMutate()\n        Observable[LATEST_VALUE] = arguments[0]\n        Observable.valueHasMutated()\n      }\n      return this // Permits chained assignments\n    } else {\n            // Read\n      dependencyDetection.registerDependency(Observable) // The caller only needs to be notified of changes if they did a \"read\" operation\n      return Observable[LATEST_VALUE]\n    }\n  }\n\n  overwriteLengthPropertyIfSupported(Observable, { value: undefined })\n\n  Observable[LATEST_VALUE] = initialValue\n\n  subscribable.fn.init(Observable)\n\n    // Inherit from 'observable'\n  Object.setPrototypeOf(Observable, observable.fn)\n\n  if (options.deferUpdates) {\n    deferUpdates(Observable)\n  }\n\n  return Observable\n}\n\n// Define prototype for observables\nobservable.fn = {\n  equalityComparer: valuesArePrimitiveAndEqual,\n  peek () { return this[LATEST_VALUE] },\n  valueHasMutated () {\n    this.notifySubscribers(this[LATEST_VALUE], 'spectate')\n    this.notifySubscribers(this[LATEST_VALUE])\n  },\n  valueWillMutate () {\n    this.notifySubscribers(this[LATEST_VALUE], 'beforeChange')\n  },\n\n  // Some observables may not always be writeable, notably computeds.\n  isWriteable: true\n}\n\n// Moved out of \"limit\" to avoid the extra closure\nfunction limitNotifySubscribers (value, event) {\n  if (!event || event === defaultEvent) {\n    this._limitChange(value)\n  } else if (event === 'beforeChange') {\n    this._limitBeforeChange(value)\n  } else {\n    this._origNotifySubscribers(value, event)\n  }\n}\n\n// Add `limit` function to the subscribable prototype\nsubscribable.fn.limit = function limit (limitFunction) {\n  var self = this\n  var selfIsObservable = isObservable(self)\n  var beforeChange = 'beforeChange'\n  var ignoreBeforeChange, notifyNextChange, previousValue, pendingValue, didUpdate\n\n  if (!self._origNotifySubscribers) {\n    self._origNotifySubscribers = self.notifySubscribers\n    self.notifySubscribers = limitNotifySubscribers\n  }\n\n  var finish = limitFunction(function () {\n    self._notificationIsPending = false\n\n    // If an observable provided a reference to itself, access it to get the latest value.\n    // This allows computed observables to delay calculating their value until needed.\n    if (selfIsObservable && pendingValue === self) {\n      pendingValue = self._evalIfChanged ? self._evalIfChanged() : self()\n    }\n    const shouldNotify = notifyNextChange || (\n      didUpdate && self.isDifferent(previousValue, pendingValue)\n    )\n    self._notifyNextChange = didUpdate = ignoreBeforeChange = false\n    if (shouldNotify) {\n      self._origNotifySubscribers(previousValue = pendingValue)\n    }\n  })\n\n  Object.assign(self, {\n    _limitChange  (value, isDirty) {\n      if (!isDirty || !self._notificationIsPending) {\n        didUpdate = !isDirty\n      }\n      self._changeSubscriptions = [...self._subscriptions[defaultEvent]]\n      self._notificationIsPending = ignoreBeforeChange = true\n      pendingValue = value\n      finish()\n    },\n\n    _limitBeforeChange (value) {\n      if (!ignoreBeforeChange) {\n        previousValue = value\n        self._origNotifySubscribers(value, beforeChange)\n      }\n    },\n\n    _notifyNextChangeIfValueIsDifferent () {\n      if (self.isDifferent(previousValue, self.peek(true /* evaluate */))) {\n        notifyNextChange = true\n      }\n    },\n\n    _recordUpdate () {\n      didUpdate = true\n    }\n  })\n}\n\nObject.setPrototypeOf(observable.fn, subscribable.fn)\n\nvar protoProperty = observable.protoProperty = options.protoProperty\nobservable.fn[protoProperty] = observable\n\n// Subclasses can add themselves to observableProperties so that\n// isObservable will be `true`.\nobservable.observablePrototypes = new Set([observable])\n\nexport function isObservable (instance) {\n  const proto = typeof instance === 'function' && instance[protoProperty]\n  if (proto && !observable.observablePrototypes.has(proto)) {\n    throw Error('Invalid object that looks like an observable; possibly from another Knockout instance')\n  }\n  return !!proto\n}\n\nexport function unwrap (value) {\n  return isObservable(value) ? value() : value\n}\n\nexport function peek (value) {\n  return isObservable(value) ? value.peek() : value\n}\n\nexport function isWriteableObservable (instance) {\n  return isObservable(instance) && instance.isWriteable\n}\n\nexport { isWriteableObservable as isWritableObservable }\n","//\n// Observable Array - Change Tracking Extender\n// ---\n//\n/* eslint no-fallthrough: 0 */\n\nimport {\n    extend, compareArrays, findMovesInArrayComparison\n} from 'tko.utils'\n\nimport { defaultEvent } from './subscribable.js'\nimport { extenders } from './extenders.js'\n\nexport var arrayChangeEventName = 'arrayChange'\n\nexport function trackArrayChanges (target, options) {\n    // Use the provided options--each call to trackArrayChanges overwrites the previously set options\n  target.compareArrayOptions = {}\n  if (options && typeof options === 'object') {\n    extend(target.compareArrayOptions, options)\n  }\n  target.compareArrayOptions.sparse = true\n\n    // Only modify the target observable once\n  if (target.cacheDiffForKnownOperation) {\n    return\n  }\n  let trackingChanges = false\n  let cachedDiff = null\n  let arrayChangeSubscription\n  let pendingNotifications = 0\n  let underlyingNotifySubscribersFunction\n  let underlyingBeforeSubscriptionAddFunction = target.beforeSubscriptionAdd\n  let underlyingAfterSubscriptionRemoveFunction = target.afterSubscriptionRemove\n\n    // Watch \"subscribe\" calls, and for array change events, ensure change tracking is enabled\n  target.beforeSubscriptionAdd = function (event) {\n    if (underlyingBeforeSubscriptionAddFunction) { underlyingBeforeSubscriptionAddFunction.call(target, event) }\n    if (event === arrayChangeEventName) {\n      trackChanges()\n    }\n  }\n\n    // Watch \"dispose\" calls, and for array change events, ensure change tracking is disabled when all are disposed\n  target.afterSubscriptionRemove = function (event) {\n    if (underlyingAfterSubscriptionRemoveFunction) { underlyingAfterSubscriptionRemoveFunction.call(target, event) }\n    if (event === arrayChangeEventName && !target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n      if (underlyingNotifySubscribersFunction) {\n        target.notifySubscribers = underlyingNotifySubscribersFunction\n        underlyingNotifySubscribersFunction = undefined\n      }\n      if (arrayChangeSubscription) {\n        arrayChangeSubscription.dispose()\n      }\n      arrayChangeSubscription = null\n      trackingChanges = false\n    }\n  }\n\n  function trackChanges () {\n        // Calling 'trackChanges' multiple times is the same as calling it once\n    if (trackingChanges) {\n      return\n    }\n\n    trackingChanges = true\n\n        // Intercept \"notifySubscribers\" to track how many times it was called.\n    underlyingNotifySubscribersFunction = target['notifySubscribers']\n    target['notifySubscribers'] = function (valueToNotify, event) {\n      if (!event || event === defaultEvent) {\n        ++pendingNotifications\n      }\n      return underlyingNotifySubscribersFunction.apply(this, arguments)\n    }\n\n        // Each time the array changes value, capture a clone so that on the next\n        // change it's possible to produce a diff\n    var previousContents = [].concat(target.peek() || [])\n    cachedDiff = null\n    arrayChangeSubscription = target.subscribe(function (currentContents) {\n            // Make a copy of the current contents and ensure it's an array\n      currentContents = [].concat(currentContents || [])\n\n            // Compute the diff and issue notifications, but only if someone is listening\n      if (target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n        var changes = getChanges(previousContents, currentContents)\n      }\n\n            // Eliminate references to the old, removed items, so they can be GCed\n      previousContents = currentContents\n      cachedDiff = null\n      pendingNotifications = 0\n\n      if (changes && changes.length) {\n        target['notifySubscribers'](changes, arrayChangeEventName)\n      }\n    })\n  }\n\n  function getChanges (previousContents, currentContents) {\n        // We try to re-use cached diffs.\n        // The scenarios where pendingNotifications > 1 are when using rate-limiting or the Deferred Updates\n        // plugin, which without this check would not be compatible with arrayChange notifications. Normally,\n        // notifications are issued immediately so we wouldn't be queueing up more than one.\n    if (!cachedDiff || pendingNotifications > 1) {\n      cachedDiff = trackArrayChanges.compareArrays(previousContents, currentContents, target.compareArrayOptions)\n    }\n\n    return cachedDiff\n  }\n\n  target.cacheDiffForKnownOperation = function (rawArray, operationName, args) {\n    var index, argsIndex\n        // Only run if we're currently tracking changes for this observable array\n        // and there aren't any pending deferred notifications.\n    if (!trackingChanges || pendingNotifications) {\n      return\n    }\n    var diff = [],\n      arrayLength = rawArray.length,\n      argsLength = args.length,\n      offset = 0\n\n    function pushDiff (status, value, index) {\n      return diff[diff.length] = { 'status': status, 'value': value, 'index': index }\n    }\n    switch (operationName) {\n      case 'push':\n        offset = arrayLength\n      case 'unshift':\n        for (index = 0; index < argsLength; index++) {\n          pushDiff('added', args[index], offset + index)\n        }\n        break\n\n      case 'pop':\n        offset = arrayLength - 1\n      case 'shift':\n        if (arrayLength) {\n          pushDiff('deleted', rawArray[offset], offset)\n        }\n        break\n\n      case 'splice':\n            // Negative start index means 'from end of array'. After that we clamp to [0...arrayLength].\n            // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\n        var startIndex = Math.min(Math.max(0, args[0] < 0 ? arrayLength + args[0] : args[0]), arrayLength),\n          endDeleteIndex = argsLength === 1 ? arrayLength : Math.min(startIndex + (args[1] || 0), arrayLength),\n          endAddIndex = startIndex + argsLength - 2,\n          endIndex = Math.max(endDeleteIndex, endAddIndex),\n          additions = [], deletions = []\n        for (index = startIndex, argsIndex = 2; index < endIndex; ++index, ++argsIndex) {\n          if (index < endDeleteIndex) { deletions.push(pushDiff('deleted', rawArray[index], index)) }\n          if (index < endAddIndex) { additions.push(pushDiff('added', args[argsIndex], index)) }\n        }\n        findMovesInArrayComparison(deletions, additions)\n        break\n\n      default:\n        return\n    }\n    cachedDiff = diff\n  }\n}\n\n// Expose compareArrays for testing.\ntrackArrayChanges.compareArrays = compareArrays\n\n// Add the trackArrayChanges extender so we can use\n// obs.extend({ trackArrayChanges: true })\nextenders.trackArrayChanges = trackArrayChanges\n","//\n// Observable Arrays\n// ===\n//\nimport {\n    arrayIndexOf, arrayForEach, overwriteLengthPropertyIfSupported\n} from 'tko.utils'\n\nimport { observable, isObservable } from './observable.js'\n\nimport { trackArrayChanges } from './observableArray.changeTracking.js'\n\nexport function observableArray (initialValues) {\n  initialValues = initialValues || []\n\n  if (typeof initialValues !== 'object' || !('length' in initialValues)) { throw new Error('The argument passed when initializing an observable array must be an array, or null, or undefined.') }\n\n  var result = observable(initialValues)\n  Object.setPrototypeOf(result, observableArray.fn)\n  trackArrayChanges(result)\n        // ^== result.extend({ trackArrayChanges: true })\n  overwriteLengthPropertyIfSupported(result, { get: () => result().length })\n  return result\n}\n\nexport function isObservableArray (instance) {\n  return isObservable(instance) && typeof instance.remove === 'function' && typeof instance.push === 'function'\n}\n\nobservableArray.fn = {\n  remove (valueOrPredicate) {\n    var underlyingArray = this.peek()\n    var removedValues = []\n    var predicate = typeof valueOrPredicate === 'function' && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate }\n    for (var i = 0; i < underlyingArray.length; i++) {\n      var value = underlyingArray[i]\n      if (predicate(value)) {\n        if (removedValues.length === 0) {\n          this.valueWillMutate()\n        }\n        if (underlyingArray[i] !== value) {\n          throw Error(\"Array modified during remove; cannot remove item\")\n        }\n        removedValues.push(value)\n        underlyingArray.splice(i, 1)\n        i--\n      }\n    }\n    if (removedValues.length) {\n      this.valueHasMutated()\n    }\n    return removedValues\n  },\n\n  removeAll (arrayOfValues) {\n        // If you passed zero args, we remove everything\n    if (arrayOfValues === undefined) {\n      var underlyingArray = this.peek()\n      var allValues = underlyingArray.slice(0)\n      this.valueWillMutate()\n      underlyingArray.splice(0, underlyingArray.length)\n      this.valueHasMutated()\n      return allValues\n    }\n        // If you passed an arg, we interpret it as an array of entries to remove\n    if (!arrayOfValues) {\n      return []\n    }\n    return this['remove'](function (value) {\n      return arrayIndexOf(arrayOfValues, value) >= 0\n    })\n  },\n\n  destroy (valueOrPredicate) {\n    var underlyingArray = this.peek()\n    var predicate = typeof valueOrPredicate === 'function' && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate }\n    this.valueWillMutate()\n    for (var i = underlyingArray.length - 1; i >= 0; i--) {\n      var value = underlyingArray[i]\n      if (predicate(value)) {\n        value['_destroy'] = true\n      }\n    }\n    this.valueHasMutated()\n  },\n\n  destroyAll (arrayOfValues) {\n        // If you passed zero args, we destroy everything\n    if (arrayOfValues === undefined) { return this.destroy(function () { return true }) }\n\n        // If you passed an arg, we interpret it as an array of entries to destroy\n    if (!arrayOfValues) {\n      return []\n    }\n    return this.destroy(function (value) {\n      return arrayIndexOf(arrayOfValues, value) >= 0\n    })\n  },\n\n  indexOf (item) {\n    return arrayIndexOf(this(), item)\n  },\n\n  replace (oldItem, newItem) {\n    var index = this.indexOf(oldItem)\n    if (index >= 0) {\n      this.valueWillMutate()\n      this.peek()[index] = newItem\n      this.valueHasMutated()\n    }\n  },\n\n  sorted (compareFn) {\n    return [...this()].sort(compareFn)\n  },\n\n  reversed () {\n    return [...this()].reverse()\n  },\n\n  [Symbol.iterator]: function * () {\n    yield * this()\n  }\n}\n\nObject.setPrototypeOf(observableArray.fn, observable.fn)\n\n// Populate ko.observableArray.fn with read/write functions from native arrays\n// Important: Do not add any additional functions here that may reasonably be used to *read* data from the array\n// because we'll eval them without causing subscriptions, so ko.computed output could end up getting stale\narrayForEach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (methodName) {\n  observableArray.fn[methodName] = function () {\n        // Use \"peek\" to avoid creating a subscription in any computed that we're executing in the context of\n        // (for consistency with mutating regular observables)\n    var underlyingArray = this.peek()\n    this.valueWillMutate()\n    this.cacheDiffForKnownOperation(underlyingArray, methodName, arguments)\n    var methodCallResult = underlyingArray[methodName].apply(underlyingArray, arguments)\n    this.valueHasMutated()\n        // The native sort and reverse methods return a reference to the array, but it makes more sense to return the observable array instead.\n    return methodCallResult === underlyingArray ? this : methodCallResult\n  }\n})\n\n// Populate ko.observableArray.fn with read-only functions from native arrays\narrayForEach(['slice'], function (methodName) {\n  observableArray.fn[methodName] = function () {\n    var underlyingArray = this()\n    return underlyingArray[methodName].apply(underlyingArray, arguments)\n  }\n})\n\n// Expose for testing.\nobservableArray.trackArrayChanges = trackArrayChanges\n","//\n// Helpers\n// ---\n// toJS & toJSON\n//\nimport {\n    arrayIndexOf\n} from 'tko.utils'\n\nimport { isObservable } from './observable.js'\n\nvar maxNestedObservableDepth = 10 // Escape the (unlikely) pathological case where an observable's current value is itself (or similar reference cycle)\n\nexport function toJS (rootObject) {\n  if (arguments.length == 0) { throw new Error('When calling ko.toJS, pass the object you want to convert.') }\n\n    // We just unwrap everything at every level in the object graph\n  return mapJsObjectGraph(rootObject, function (valueToMap) {\n        // Loop because an observable's value might in turn be another observable wrapper\n    for (var i = 0; isObservable(valueToMap) && (i < maxNestedObservableDepth); i++) { valueToMap = valueToMap() }\n    return valueToMap\n  })\n}\n\nexport function toJSON (rootObject, replacer, space) {     // replacer and space are optional\n  var plainJavaScriptObject = toJS(rootObject)\n  return JSON.stringify(plainJavaScriptObject, replacer, space)\n}\n\nfunction mapJsObjectGraph (rootObject, mapInputCallback, visitedObjects) {\n  visitedObjects = visitedObjects || new objectLookup()\n\n  rootObject = mapInputCallback(rootObject)\n  var canHaveProperties = (typeof rootObject === 'object') && (rootObject !== null) && (rootObject !== undefined) && (!(rootObject instanceof RegExp)) && (!(rootObject instanceof Date)) && (!(rootObject instanceof String)) && (!(rootObject instanceof Number)) && (!(rootObject instanceof Boolean))\n  if (!canHaveProperties) { return rootObject }\n\n  var outputProperties = rootObject instanceof Array ? [] : {}\n  visitedObjects.save(rootObject, outputProperties)\n\n  visitPropertiesOrArrayEntries(rootObject, function (indexer) {\n    var propertyValue = mapInputCallback(rootObject[indexer])\n\n    switch (typeof propertyValue) {\n      case 'boolean':\n      case 'number':\n      case 'string':\n      case 'function':\n        outputProperties[indexer] = propertyValue\n        break\n      case 'object':\n      case 'undefined':\n        var previouslyMappedValue = visitedObjects.get(propertyValue)\n        outputProperties[indexer] = (previouslyMappedValue !== undefined)\n                ? previouslyMappedValue\n                : mapJsObjectGraph(propertyValue, mapInputCallback, visitedObjects)\n        break\n    }\n  })\n\n  return outputProperties\n}\n\nfunction visitPropertiesOrArrayEntries (rootObject, visitorCallback) {\n  if (rootObject instanceof Array) {\n    for (var i = 0; i < rootObject.length; i++) { visitorCallback(i) }\n\n        // For arrays, also respect toJSON property for custom mappings (fixes #278)\n    if (typeof rootObject['toJSON'] === 'function') { visitorCallback('toJSON') }\n  } else {\n    for (var propertyName in rootObject) {\n      visitorCallback(propertyName)\n    }\n  }\n}\n\nfunction objectLookup () {\n  this.keys = []\n  this.values = []\n}\n\nobjectLookup.prototype = {\n  constructor: objectLookup,\n  save: function (key, value) {\n    var existingIndex = arrayIndexOf(this.keys, key)\n    if (existingIndex >= 0) { this.values[existingIndex] = value } else {\n      this.keys.push(key)\n      this.values.push(value)\n    }\n  },\n  get: function (key) {\n    var existingIndex = arrayIndexOf(this.keys, key)\n    return (existingIndex >= 0) ? this.values[existingIndex] : undefined\n  }\n}\n","import {\n  unwrap\n} from 'tko.observable'\n\nexport function LAMBDA () {}\n\n/**\n * @ operator - recursively call the identifier if it's a function\n * @param  {operand} a ignored\n * @param  {operand} b The variable to be called (if a function) and unwrapped\n * @return {value}   The result.\n */\nfunction unwrapOrCall (a, b) {\n  while (typeof b === 'function') { b = b() }\n  return b\n}\n\nconst operators = {\n  // unary\n  '@': unwrapOrCall,\n  '#': (a, b) => () => unwrap(b), // Convert to read-only.\n  '=>': LAMBDA,\n  '!': function not (a, b) { return !b },\n  '!!': function notnot (a, b) { return !!b },\n  '++': function preinc (a, b) { return ++b },\n  '--': function preinc (a, b) { return --b },\n  // mul/div\n  '*': function mul (a, b) { return a * b },\n  '/': function div (a, b) { return a / b },\n  '%': function mod (a, b) { return a % b },\n  // sub/add\n  '+': function add (a, b) { return a + b },\n  '-': function sub (a, b) { return (a || 0) - (b || 0) },\n  '&-': function neg (a, b) { return -1 * b },\n  // relational\n  '<': function lt (a, b) { return a < b },\n  '<=': function le (a, b) { return a <= b },\n  '>': function gt (a, b) { return a > b },\n  '>=': function ge (a, b) { return a >= b },\n  //    TODO: 'in': function (a, b) { return a in b; },\n  //    TODO: 'instanceof': function (a, b) { return a instanceof b; },\n  // equality\n  '==': function equal (a, b) { return a === b },\n  '!=': function ne (a, b) { return a !== b },\n  '===': function sequal (a, b) { return a === b },\n  '!==': function sne (a, b) { return a !== b },\n  // bitwise\n  '&': function bitAnd (a, b) { return a & b },\n  '^': function xor (a, b) { return a ^ b },\n  '|': function bitOr (a, b) { return a | b },\n  // logic\n  '&&': function logicAnd (a, b) { return a && b },\n  '||': function logicOr (a, b) { return a || b },\n  // Access\n  '.': function member (a, b) { return a[b] },\n  '[': function member (a, b) { return a[b] },\n  // conditional/ternary\n  // '?': ternary See Node.js\n  // Function-Call\n  'call': function callOp (a, b) { return a.apply(null, b) }\n}\n\n/* Order of precedence from:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\n*/\n\n  // Our operator - unwrap/call\noperators['@'].precedence = 21\noperators['#'].precedence = 21\n\n  // lambda\noperators['=>'].precedence = 20\n\n  // Member\noperators['.'].precedence = 19\noperators['['].precedence = 19\n\n  // Logical not\noperators['!'].precedence = 16\noperators['!!'].precedence = 16 // explicit double-negative\n\n  // Prefix inc/dec\noperators['++'].precedence = 16\noperators['--'].precedence = 16\noperators['&-'].precedence = 16\n\n  // mul/div/remainder\noperators['%'].precedence = 14\noperators['*'].precedence = 14\noperators['/'].precedence = 14\n\n  // add/sub\noperators['+'].precedence = 13\noperators['-'].precedence = 13\n\n  // bitwise\noperators['|'].precedence = 12\noperators['^'].precedence = 11\noperators['&'].precedence = 10\n\n  // comparison\noperators['<'].precedence = 11\noperators['<='].precedence = 11\noperators['>'].precedence = 11\noperators['>='].precedence = 11\n\n  // operators['in'].precedence = 8;\n  // operators['instanceof'].precedence = 8;\n  // equality\noperators['=='].precedence = 10\noperators['!='].precedence = 10\noperators['==='].precedence = 10\noperators['!=='].precedence = 10\n\n  // logic\noperators['&&'].precedence = 6\noperators['||'].precedence = 5\n\noperators['&&'].earlyOut = (a) => !a\noperators['||'].earlyOut = (a) => a\n\n  // Call a function\noperators['call'].precedence = 1\n\nexport { operators as default }\n","import {\n  stringTrim\n} from 'tko.utils'\n\n/* eslint no-cond-assign: 0 */\n\n// The following regular expressions will be used to split an object-literal string into tokens\n\n// These characters have special meaning to the parser and must not appear in the middle of a\n// token, except as part of a string.\nconst specials = ',\"\\'`{}()/:[\\\\]'\nconst bindingToken = RegExp([\n    // These match strings, either with double quotes, single quotes, or backticks\n  '\"(?:\\\\\\\\.|[^\"])*\"',\n  \"'(?:\\\\\\\\.|[^'])*'\",\n  '`(?:\\\\\\\\.|[^`])*`',\n    // Match C style comments\n  '/\\\\*(?:[^*]|\\\\*+[^*/])*\\\\*+/',\n    // Match C++ style comments\n  '//.*\\n',\n    // Match a regular expression (text enclosed by slashes), but will also match sets of divisions\n    // as a regular expression (this is handled by the parsing loop below).\n  '/(?:\\\\\\\\.|[^/])+/\\\\w*',\n    // Match text (at least two characters) that does not contain any of the above special characters,\n    // although some of the special characters are allowed to start it (all but the colon and comma).\n    // The text can contain spaces, but leading or trailing spaces are skipped.\n  '[^\\\\s:,/][^' + specials + ']*[^\\\\s' + specials + ']',\n    // Match any non-space character not matched already. This will match colons and commas, since they're\n    // not matched by \"everyThingElse\", but will also match any other single character that wasn't already\n    // matched (for example: in \"a: 1, b: 2\", each of the non-space characters will be matched by oneNotSpace).\n  '[^\\\\s]'\n].join('|'), 'g')\n\n  // Match end of previous token to determine whether a slash is a division or regex.\nconst divisionLookBehind = /[\\])\"'A-Za-z0-9_$]+$/\nconst keywordRegexLookBehind = { 'in': 1, 'return': 1, 'typeof': 1 }\n\n/**\n * Break a binding string (data-bind='x: val, y: ..') into a stable array\n * of {key: value}.\n */\nexport default function parseObjectLiteral (objectLiteralString) {\n  // Trim leading and trailing spaces from the string\n  var str = stringTrim(objectLiteralString)\n\n  // Trim braces '{' surrounding the whole object literal\n  if (str.charCodeAt(0) === 123) str = str.slice(1, -1)\n\n  // Add a newline to correctly match a C++ style comment at the end of the string and\n  // add a comma so that we don't need a separate code block to deal with the last item\n  str += '\\n,'\n\n  // Split into tokens\n  var result = []\n  var toks = str.match(bindingToken)\n  var key\n  var values = []\n  var depth = 0\n\n  if (toks.length <= 1) { return [] }\n\n  for (var i = 0, tok; tok = toks[i]; ++i) {\n    var c = tok.charCodeAt(0)\n    // A comma signals the end of a key/value pair if depth is zero\n    if (c === 44) { // \",\"\n      if (depth <= 0) {\n        result.push((key && values.length) ? {\n          key: key,\n          value: values.join('')\n        } : {\n          'unknown': key || values.join('')\n        })\n        key = depth = 0\n        values = []\n        continue\n      }\n      // Simply skip the colon that separates the name and value\n    } else if (c === 58) { // \":\"\n      if (!depth && !key && values.length === 1) {\n        key = values.pop()\n        continue\n      }\n      // A set of slashes is initially matched as a regular expression, but could be division\n    } else if (c === 47 && tok.length > 1 && (tok.charCodeAt(1) === 47 || tok.charCodeAt(1) === 42)) { // \"//\" or \"/*\"\n      // skip comments\n      continue\n    } else if (c === 47 && i && tok.length > 1) { // \"/\"\n      // Look at the end of the previous token to determine if the slash is actually division\n      var match = toks[i - 1].match(divisionLookBehind)\n      if (match && !keywordRegexLookBehind[match[0]]) {\n        // The slash is actually a division punctuator; re-parse the remainder of the string (not including the slash)\n        str = str.substr(str.indexOf(tok) + 1)\n        toks = str.match(bindingToken)\n        i = -1\n        // Continue with just the slash\n        tok = '/'\n      }\n      // Increment depth for parentheses, braces, and brackets so that interior commas are ignored\n    } else if (c === 40 || c === 123 || c === 91) { // '(', '{', '['\n      ++depth\n    } else if (c === 41 || c === 125 || c === 93) { // ')', '}', ']'\n      --depth\n      // The key will be the first token; if it's a string, trim the quotes\n    } else if (!key && !values.length && (c === 34 || c === 39)) { // '\"', \"'\"\n      tok = tok.slice(1, -1)\n    }\n    values.push(tok)\n  }\n\n  return result\n}\n","//\n// Computed Observable Values\n//\n// (before tko, `computed` was also known as `dependentObservable`)\n//\nimport {\n    addDisposeCallback,\n    arrayForEach,\n    createSymbolOrString,\n    domNodeIsAttachedToDocument,\n    extend,\n    options,\n    hasOwnProperty,\n    objectForEach,\n    options as koOptions,\n    removeDisposeCallback,\n    safeSetTimeout,\n} from 'tko.utils'\n\nimport {\n    dependencyDetection,\n    extenders,\n    valuesArePrimitiveAndEqual,\n    observable,\n    subscribable,\n    LATEST_VALUE\n} from 'tko.observable'\n\nconst computedState = createSymbolOrString('_state')\nconst DISPOSED_STATE = {\n  dependencyTracking: null,\n  dependenciesCount: 0,\n  isDisposed: true,\n  isStale: false,\n  isDirty: false,\n  isSleeping: false,\n  disposeWhenNodeIsRemoved: null,\n  readFunction: null,\n  _options: null\n}\n\nexport function computed (evaluatorFunctionOrOptions, evaluatorFunctionTarget, options) {\n  if (typeof evaluatorFunctionOrOptions === 'object') {\n        // Single-parameter syntax - everything is on this \"options\" param\n    options = evaluatorFunctionOrOptions\n  } else {\n        // Multi-parameter syntax - construct the options according to the params passed\n    options = options || {}\n    if (evaluatorFunctionOrOptions) {\n      options.read = evaluatorFunctionOrOptions\n    }\n  }\n  if (typeof options.read !== 'function') {\n    throw Error('Pass a function that returns the value of the computed')\n  }\n\n  var writeFunction = options.write\n  var state = {\n    latestValue: undefined,\n    isStale: true,\n    isDirty: true,\n    isBeingEvaluated: false,\n    suppressDisposalUntilDisposeWhenReturnsFalse: false,\n    isDisposed: false,\n    pure: false,\n    isSleeping: false,\n    readFunction: options.read,\n    evaluatorFunctionTarget: evaluatorFunctionTarget || options.owner,\n    disposeWhenNodeIsRemoved: options.disposeWhenNodeIsRemoved || options.disposeWhenNodeIsRemoved || null,\n    disposeWhen: options.disposeWhen || options.disposeWhen,\n    domNodeDisposalCallback: null,\n    dependencyTracking: {},\n    dependenciesCount: 0,\n    evaluationTimeoutInstance: null\n  }\n\n  function computedObservable () {\n    if (arguments.length > 0) {\n      if (typeof writeFunction === 'function') {\n                // Writing a value\n        writeFunction.apply(state.evaluatorFunctionTarget, arguments)\n      } else {\n        throw new Error(\"Cannot write a value to a computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\")\n      }\n      return this // Permits chained assignments\n    } else {\n      // Reading the value\n      if (!state.isDisposed) {\n        dependencyDetection.registerDependency(computedObservable)\n      }\n      if (state.isDirty || (state.isSleeping && computedObservable.haveDependenciesChanged())) {\n        computedObservable.evaluateImmediate()\n      }\n      return state.latestValue\n    }\n  }\n\n  computedObservable[computedState] = state\n  computedObservable.isWriteable = typeof writeFunction === 'function'\n\n  subscribable.fn.init(computedObservable)\n\n  // Inherit from 'computed'\n  Object.setPrototypeOf(computedObservable, computed.fn)\n\n  if (options.pure) {\n    state.pure = true\n    state.isSleeping = true     // Starts off sleeping; will awake on the first subscription\n    extend(computedObservable, pureComputedOverrides)\n  } else if (options.deferEvaluation) {\n    extend(computedObservable, deferEvaluationOverrides)\n  }\n\n  if (koOptions.deferUpdates) {\n    extenders.deferred(computedObservable, true)\n  }\n\n  if (koOptions.debug) {\n        // #1731 - Aid debugging by exposing the computed's options\n    computedObservable._options = options\n  }\n\n  if (state.disposeWhenNodeIsRemoved) {\n        // Since this computed is associated with a DOM node, and we don't want to dispose the computed\n        // until the DOM node is *removed* from the document (as opposed to never having been in the document),\n        // we'll prevent disposal until \"disposeWhen\" first returns false.\n    state.suppressDisposalUntilDisposeWhenReturnsFalse = true\n\n        // disposeWhenNodeIsRemoved: true can be used to opt into the \"only dispose after first false result\"\n        // behaviour even if there's no specific node to watch. In that case, clear the option so we don't try\n        // to watch for a non-node's disposal. This technique is intended for KO's internal use only and shouldn't\n        // be documented or used by application code, as it's likely to change in a future version of KO.\n    if (!state.disposeWhenNodeIsRemoved.nodeType) {\n      state.disposeWhenNodeIsRemoved = null\n    }\n  }\n\n    // Evaluate, unless sleeping or deferEvaluation is true\n  if (!state.isSleeping && !options.deferEvaluation) {\n    computedObservable.evaluateImmediate()\n  }\n\n    // Attach a DOM node disposal callback so that the computed will be proactively disposed as soon as the node is\n    // removed using ko.removeNode. But skip if isActive is false (there will never be any dependencies to dispose).\n  if (state.disposeWhenNodeIsRemoved && computedObservable.isActive()) {\n    addDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback = function () {\n      computedObservable.dispose()\n    })\n  }\n\n  return computedObservable\n}\n\n// Utility function that disposes a given dependencyTracking entry\nfunction computedDisposeDependencyCallback (id, entryToDispose) {\n  if (entryToDispose !== null && entryToDispose.dispose) {\n    entryToDispose.dispose()\n  }\n}\n\n// This function gets called each time a dependency is detected while evaluating a computed.\n// It's factored out as a shared function to avoid creating unnecessary function instances during evaluation.\nfunction computedBeginDependencyDetectionCallback (subscribable, id) {\n  var computedObservable = this.computedObservable,\n    state = computedObservable[computedState]\n  if (!state.isDisposed) {\n    if (this.disposalCount && this.disposalCandidates[id]) {\n      // Don't want to dispose this subscription, as it's still being used\n      computedObservable.addDependencyTracking(id, subscribable, this.disposalCandidates[id])\n      this.disposalCandidates[id] = null // No need to actually delete the property - disposalCandidates is a transient object anyway\n      --this.disposalCount\n    } else if (!state.dependencyTracking[id]) {\n      // Brand new subscription - add it\n      computedObservable.addDependencyTracking(id, subscribable, state.isSleeping ? { _target: subscribable } : computedObservable.subscribeToDependency(subscribable))\n    }\n    // If the observable we've accessed has a pending notification, ensure\n    // we get notified of the actual final value (bypass equality checks)\n    if (subscribable._notificationIsPending) {\n      subscribable._notifyNextChangeIfValueIsDifferent()\n    }\n  }\n}\n\ncomputed.fn = {\n  equalityComparer: valuesArePrimitiveAndEqual,\n  getDependenciesCount () {\n    return this[computedState].dependenciesCount\n  },\n\n  getDependencies () {\n    const dependencyTracking = this[computedState].dependencyTracking\n    const dependentObservables = []\n\n    objectForEach(dependencyTracking, function (id, dependency) {\n      dependentObservables[dependency._order] = dependency._target\n    })\n\n    return dependentObservables\n  },\n\n  addDependencyTracking (id, target, trackingObj) {\n    if (this[computedState].pure && target === this) {\n      throw Error(\"A 'pure' computed must not be called recursively\")\n    }\n\n    this[computedState].dependencyTracking[id] = trackingObj\n    trackingObj._order = this[computedState].dependenciesCount++\n    trackingObj._version = target.getVersion()\n  },\n  haveDependenciesChanged () {\n    var id, dependency, dependencyTracking = this[computedState].dependencyTracking\n    for (id in dependencyTracking) {\n      if (hasOwnProperty(dependencyTracking, id)) {\n        dependency = dependencyTracking[id]\n        if ((this._evalDelayed && dependency._target._notificationIsPending) || dependency._target.hasChanged(dependency._version)) {\n          return true\n        }\n      }\n    }\n  },\n  markDirty () {\n        // Process \"dirty\" events if we can handle delayed notifications\n    if (this._evalDelayed && !this[computedState].isBeingEvaluated) {\n      this._evalDelayed(false /* notifyChange */)\n    }\n  },\n  isActive () {\n    const state = this[computedState]\n    return state.isDirty || state.dependenciesCount > 0\n  },\n  respondToChange () {\n        // Ignore \"change\" events if we've already scheduled a delayed notification\n    if (!this._notificationIsPending) {\n      this.evaluatePossiblyAsync()\n    } else if (this[computedState].isDirty) {\n      this[computedState].isStale = true\n    }\n  },\n  subscribeToDependency (target) {\n    if (target._deferUpdates) {\n      var dirtySub = target.subscribe(this.markDirty, this, 'dirty'),\n        changeSub = target.subscribe(this.respondToChange, this)\n      return {\n        _target: target,\n        dispose () {\n          dirtySub.dispose()\n          changeSub.dispose()\n        }\n      }\n    } else {\n      return target.subscribe(this.evaluatePossiblyAsync, this)\n    }\n  },\n  evaluatePossiblyAsync () {\n    var computedObservable = this,\n      throttleEvaluationTimeout = computedObservable.throttleEvaluation\n    if (throttleEvaluationTimeout && throttleEvaluationTimeout >= 0) {\n      clearTimeout(this[computedState].evaluationTimeoutInstance)\n      this[computedState].evaluationTimeoutInstance = safeSetTimeout(function () {\n        computedObservable.evaluateImmediate(true /* notifyChange */)\n      }, throttleEvaluationTimeout)\n    } else if (computedObservable._evalDelayed) {\n      computedObservable._evalDelayed(true /* notifyChange */)\n    } else {\n      computedObservable.evaluateImmediate(true /* notifyChange */)\n    }\n  },\n  evaluateImmediate (notifyChange) {\n    var computedObservable = this,\n      state = computedObservable[computedState],\n      disposeWhen = state.disposeWhen,\n      changed = false\n\n    if (state.isBeingEvaluated) {\n      // If the evaluation of a ko.computed causes side effects, it's possible that it will trigger its own re-evaluation.\n      // This is not desirable (it's hard for a developer to realise a chain of dependencies might cause this, and they almost\n      // certainly didn't intend infinite re-evaluations). So, for predictability, we simply prevent ko.computeds from causing\n      // their own re-evaluation. Further discussion at https://github.com/SteveSanderson/knockout/pull/387\n      return\n    }\n\n        // Do not evaluate (and possibly capture new dependencies) if disposed\n    if (state.isDisposed) {\n      return\n    }\n\n    if (state.disposeWhenNodeIsRemoved && !domNodeIsAttachedToDocument(state.disposeWhenNodeIsRemoved) || disposeWhen && disposeWhen()) {\n            // See comment above about suppressDisposalUntilDisposeWhenReturnsFalse\n      if (!state.suppressDisposalUntilDisposeWhenReturnsFalse) {\n        computedObservable.dispose()\n        return\n      }\n    } else {\n            // It just did return false, so we can stop suppressing now\n      state.suppressDisposalUntilDisposeWhenReturnsFalse = false\n    }\n\n    state.isBeingEvaluated = true\n    try {\n      changed = this.evaluateImmediate_CallReadWithDependencyDetection(notifyChange)\n    } finally {\n      state.isBeingEvaluated = false\n    }\n\n    return changed\n  },\n  evaluateImmediate_CallReadWithDependencyDetection (notifyChange) {\n        // This function is really just part of the evaluateImmediate logic. You would never call it from anywhere else.\n        // Factoring it out into a separate function means it can be independent of the try/catch block in evaluateImmediate,\n        // which contributes to saving about 40% off the CPU overhead of computed evaluation (on V8 at least).\n\n    var computedObservable = this,\n      state = computedObservable[computedState],\n      changed = false\n\n        // Initially, we assume that none of the subscriptions are still being used (i.e., all are candidates for disposal).\n        // Then, during evaluation, we cross off any that are in fact still being used.\n    var isInitial = state.pure ? undefined : !state.dependenciesCount,   // If we're evaluating when there are no previous dependencies, it must be the first time\n      dependencyDetectionContext = {\n        computedObservable: computedObservable,\n        disposalCandidates: state.dependencyTracking,\n        disposalCount: state.dependenciesCount\n      }\n\n    dependencyDetection.begin({\n      callbackTarget: dependencyDetectionContext,\n      callback: computedBeginDependencyDetectionCallback,\n      computed: computedObservable,\n      isInitial: isInitial\n    })\n\n    state.dependencyTracking = {}\n    state.dependenciesCount = 0\n\n    var newValue = this.evaluateImmediate_CallReadThenEndDependencyDetection(state, dependencyDetectionContext)\n\n    if (!state.dependenciesCount) {\n      computedObservable.dispose()\n      changed = true // When evaluation causes a disposal, make sure all dependent computeds get notified so they'll see the new state\n    } else {\n      changed = computedObservable.isDifferent(state.latestValue, newValue)\n    }\n\n    if (changed) {\n      if (!state.isSleeping) {\n        computedObservable.notifySubscribers(state.latestValue, 'beforeChange')\n      } else {\n        computedObservable.updateVersion()\n      }\n\n      state.latestValue = newValue\n      if (options.debug) { computedObservable._latestValue = newValue }\n\n      computedObservable.notifySubscribers(state.latestValue, 'spectate')\n\n      if (!state.isSleeping && notifyChange) {\n        computedObservable.notifySubscribers(state.latestValue)\n      }\n\n      if (computedObservable._recordUpdate) {\n        computedObservable._recordUpdate()\n      }\n    }\n\n    if (isInitial) {\n      computedObservable.notifySubscribers(state.latestValue, 'awake')\n    }\n\n    return changed\n  },\n  evaluateImmediate_CallReadThenEndDependencyDetection (state, dependencyDetectionContext) {\n    // This function is really part of the evaluateImmediate_CallReadWithDependencyDetection logic.\n    // You'd never call it from anywhere else. Factoring it out means that evaluateImmediate_CallReadWithDependencyDetection\n    // can be independent of try/finally blocks, which contributes to saving about 40% off the CPU\n    // overhead of computed evaluation (on V8 at least).\n\n    try {\n      var readFunction = state.readFunction\n      return state.evaluatorFunctionTarget ? readFunction.call(state.evaluatorFunctionTarget) : readFunction()\n    } finally {\n      dependencyDetection.end()\n\n      // For each subscription no longer being used, remove it from the active subscriptions list and dispose it\n      if (dependencyDetectionContext.disposalCount && !state.isSleeping) {\n        objectForEach(dependencyDetectionContext.disposalCandidates, computedDisposeDependencyCallback)\n      }\n\n      state.isStale = state.isDirty = false\n    }\n  },\n  peek (forceEvaluate) {\n    // Peek won't ordinarily re-evaluate, except while the computed is sleeping\n    //  or to get the initial value when \"deferEvaluation\" is set.\n    const state = this[computedState]\n    if ((state.isDirty && (forceEvaluate || !state.dependenciesCount)) || (state.isSleeping && this.haveDependenciesChanged())) {\n      this.evaluateImmediate()\n    }\n    return state.latestValue\n  },\n\n  get [LATEST_VALUE] () {\n    return this.peek()\n  },\n\n  limit (limitFunction) {\n    const state = this[computedState]\n    // Override the limit function with one that delays evaluation as well\n    subscribable.fn.limit.call(this, limitFunction)\n    Object.assign(this, {\n      _evalIfChanged () {\n        if (!this[computedState].isSleeping) {\n          if (this[computedState].isStale) {\n            this.evaluateImmediate()\n          } else {\n            this[computedState].isDirty = false\n          }\n        }\n        return state.latestValue\n      },\n      _evalDelayed (isChange) {\n        this._limitBeforeChange(state.latestValue)\n\n        // Mark as dirty\n        state.isDirty = true\n        if (isChange) {\n          state.isStale = true\n        }\n\n        // Pass the observable to the \"limit\" code, which will evaluate it when\n        // it's time to do the notification.\n        this._limitChange(this, !isChange /* isDirty */)\n      }\n    })\n  },\n  dispose () {\n    var state = this[computedState]\n    if (!state.isSleeping && state.dependencyTracking) {\n      objectForEach(state.dependencyTracking, function (id, dependency) {\n        if (dependency.dispose) {\n          dependency.dispose()\n        }\n      })\n    }\n    if (state.disposeWhenNodeIsRemoved && state.domNodeDisposalCallback) {\n      removeDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback)\n    }\n    Object.assign(state, DISPOSED_STATE)\n  }\n}\n\nvar pureComputedOverrides = {\n  beforeSubscriptionAdd (event) {\n        // If asleep, wake up the computed by subscribing to any dependencies.\n    var computedObservable = this,\n      state = computedObservable[computedState]\n    if (!state.isDisposed && state.isSleeping && event === 'change') {\n      state.isSleeping = false\n      if (state.isStale || computedObservable.haveDependenciesChanged()) {\n        state.dependencyTracking = null\n        state.dependenciesCount = 0\n        if (computedObservable.evaluateImmediate()) {\n          computedObservable.updateVersion()\n        }\n      } else {\n        // First put the dependencies in order\n        var dependenciesOrder = []\n        objectForEach(state.dependencyTracking, function (id, dependency) {\n          dependenciesOrder[dependency._order] = id\n        })\n                // Next, subscribe to each one\n        arrayForEach(dependenciesOrder, function (id, order) {\n          var dependency = state.dependencyTracking[id],\n            subscription = computedObservable.subscribeToDependency(dependency._target)\n          subscription._order = order\n          subscription._version = dependency._version\n          state.dependencyTracking[id] = subscription\n        })\n\n        // Waking dependencies may have triggered effects\n        if (computedObservable.haveDependenciesChanged()) {\n          if (computedObservable.evaluateImmediate()) {\n            computedObservable.updateVersion()\n          }\n        }\n      }\n\n      if (!state.isDisposed) {     // test since evaluating could trigger disposal\n        computedObservable.notifySubscribers(state.latestValue, 'awake')\n      }\n    }\n  },\n  afterSubscriptionRemove (event) {\n    var state = this[computedState]\n    if (!state.isDisposed && event === 'change' && !this.hasSubscriptionsForEvent('change')) {\n      objectForEach(state.dependencyTracking, function (id, dependency) {\n        if (dependency.dispose) {\n          state.dependencyTracking[id] = {\n            _target: dependency._target,\n            _order: dependency._order,\n            _version: dependency._version\n          }\n          dependency.dispose()\n        }\n      })\n      state.isSleeping = true\n      this.notifySubscribers(undefined, 'asleep')\n    }\n  },\n  getVersion () {\n        // Because a pure computed is not automatically updated while it is sleeping, we can't\n        // simply return the version number. Instead, we check if any of the dependencies have\n        // changed and conditionally re-evaluate the computed observable.\n    var state = this[computedState]\n    if (state.isSleeping && (state.isStale || this.haveDependenciesChanged())) {\n      this.evaluateImmediate()\n    }\n    return subscribable.fn.getVersion.call(this)\n  }\n}\n\nvar deferEvaluationOverrides = {\n  beforeSubscriptionAdd (event) {\n        // This will force a computed with deferEvaluation to evaluate when the first subscription is registered.\n    if (event === 'change' || event === 'beforeChange') {\n      this.peek()\n    }\n  }\n}\n\nObject.setPrototypeOf(computed.fn, subscribable.fn)\n\n// Set the proto values for ko.computed\nvar protoProp = observable.protoProperty // == \"__ko_proto__\"\ncomputed.fn[protoProp] = computed\n\n/* This is used by ko.isObservable */\nobservable.observablePrototypes.add(computed)\n\nexport function isComputed (instance) {\n  return (typeof instance === 'function' && instance[protoProp] === computed)\n}\n\nexport function isPureComputed (instance) {\n  return isComputed(instance) && instance[computedState] && instance[computedState].pure\n}\n\nexport function pureComputed (evaluatorFunctionOrOptions, evaluatorFunctionTarget) {\n  if (typeof evaluatorFunctionOrOptions === 'function') {\n    return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget, {'pure': true})\n  } else {\n    evaluatorFunctionOrOptions = extend({}, evaluatorFunctionOrOptions)   // make a copy of the parameter object\n    evaluatorFunctionOrOptions.pure = true\n    return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget)\n  }\n}\n","/**\n * Create an ES\n */\n\nimport {\n  observable, observableArray, unwrap\n} from 'tko.observable'\n\nimport {\n  computed\n} from './computed.js'\n\nconst PROXY_SYM = Symbol('Knockout Proxied Object')\nconst MIRROR_SYM = Symbol('Knockout Proxied Observables')\n\nfunction makeComputed (proxy, fn) {\n  return computed({\n    owner: proxy,\n    read: fn,\n    write: fn,\n    pure: 'pure' in fn ? fn.pure : true,\n    deferEvaluation: 'deferEvaluation' in fn ? fn.deferEvaluation : true\n  }).extend({ deferred: true })\n}\n\nfunction setOrCreate (mirror, prop, value, proxy) {\n  if (!mirror[prop]) {\n    const ctr = Array.isArray(value) ? observableArray\n      : typeof value === 'function' ? makeComputed.bind(null, proxy)\n      : observable\n    mirror[prop] = ctr(value)\n  } else {\n    mirror[prop](value)\n  }\n}\n\nfunction assignOrUpdate(mirror, object, proxy) {\n  for (const key of Object.keys(object)) {\n    setOrCreate(mirror, key, object[key], proxy)\n  }\n  return object\n}\n\nexport function proxy (object) {\n  const mirror = { [PROXY_SYM]: object }\n  mirror[MIRROR_SYM] = mirror\n  const proxy = new Proxy(function () {}, {\n    has (target, prop) { return prop in mirror },\n    get (target, prop) { return unwrap(mirror[prop]) },\n    set (target, prop, value, receiver) {\n      setOrCreate(mirror, prop, value, proxy)\n      object[prop] = value\n      return true\n    },\n    deleteProperty (property) {\n      delete mirror[property]\n      return delete object[property]\n    },\n    apply (target, thisArg, [props]) {\n      if (props) {\n        assignOrUpdate(mirror, props, proxy)\n        return Object.assign(object, props)\n      }\n      return object\n    },\n    getPrototypeOf () { return Object.getPrototypeOf(object) },\n    setPrototypeOf (target, proto) { return Object.setPrototypeOf(object, proto) },\n    defineProperty (target, prop, desc) { return Object.defineProperty(object, prop, desc) },\n    preventExtensions () { return Object.preventExtensions(object) },\n    isExtensible () { return Object.isExtensible(object) },\n    ownKeys () {\n      return [...Object.getOwnPropertyNames(object),\n              ...Object.getOwnPropertySymbols(object)]\n    }\n  })\n  assignOrUpdate(mirror, object, proxy)\n  return proxy\n}\n\nexport function getObservable (proxied, prop) { return proxied[MIRROR_SYM][prop] }\nexport function peek (proxied, prop) { return getObservable(proxied, prop).peek() }\nexport function isProxied (proxied) { return PROXY_SYM in proxied }\n\nObject.assign(proxy, { getObservable, peek, isProxied })\n","\nimport {\n  pureComputed\n} from './computed'\n\nfunction kowhen (predicate, context, resolve) {\n  const observable = pureComputed(predicate, context).extend({notify: 'always'});\n  const subscription = observable.subscribe(value => {\n    if (value) {\n      subscription.dispose()\n      resolve(value)\n    }\n  })\n  // In case the initial value is true, process it right away\n  observable.notifySubscribers(observable.peek())\n  return subscription\n}\n\nexport function when (predicate, callback, context) {\n  const whenFn = kowhen.bind(null, predicate, context)\n  return callback ? whenFn(callback.bind(context)) : new Promise(whenFn)\n}\n","import {\n    extend, options, anyDomNodeIsAttachedToDocument, addDisposeCallback,\n    arrayRemoveItem, domData\n} from 'tko.utils'\n\nimport {\n    computed, pureComputed\n} from 'tko.computed'\n\nimport {\n    unwrap, isObservable\n} from 'tko.observable'\n\nimport {\n  contextAncestorBindingInfo\n} from './bindingEvent'\n\nexport const boundElementDomDataKey = domData.nextKey()\n\nexport const contextSubscribeSymbol = Symbol('Knockout Context Subscription')\n\n// Unique stub to indicate inheritance.\nconst inheritParentIndicator = Symbol('Knockout Parent Indicator')\n\n// The bindingContext constructor is only called directly to create the root context. For child\n// contexts, use bindingContext.createChildContext or bindingContext.extend.\nexport function bindingContext (dataItemOrAccessor, parentContext, dataItemAlias, extendCallback, settings) {\n  const self = this\n  const shouldInheritData = dataItemOrAccessor === inheritParentIndicator\n  const realDataItemOrAccessor = shouldInheritData ? undefined : dataItemOrAccessor\n  const isFunc = typeof realDataItemOrAccessor === 'function' && !isObservable(realDataItemOrAccessor)\n\n  // Export 'ko' in the binding context so it will be available in bindings and templates\n  // even if 'ko' isn't exported as a global, such as when using an AMD loader.\n  // See https://github.com/SteveSanderson/knockout/issues/490\n  self.ko = options.knockoutInstance\n\n  let nodes\n  let subscribable\n\n    // The binding context object includes static properties for the current, parent, and root view models.\n    // If a view model is actually stored in an observable, the corresponding binding context object, and\n    // any child contexts, must be updated when the view model is changed.\n  function updateContext () {\n        // Most of the time, the context will directly get a view model object, but if a function is given,\n        // we call the function to retrieve the view model. If the function accesses any observables or returns\n        // an observable, the dependency is tracked, and those observables can later cause the binding\n        // context to be updated.\n    const dataItemOrObservable = isFunc ? realDataItemOrAccessor() : realDataItemOrAccessor\n    let dataItem = unwrap(dataItemOrObservable)\n\n    if (parentContext) {\n            // When a \"parent\" context is given, register a dependency on the parent context. Thus whenever the\n            // parent context is updated, this context will also be updated.\n      if (parentContext[contextSubscribeSymbol]) {\n        parentContext[contextSubscribeSymbol]()\n      }\n\n            // Copy $root and any custom properties from the parent context\n      extend(self, parentContext)\n\n       // Copy Symbol properties\n      if (contextAncestorBindingInfo in parentContext) {\n        self[contextAncestorBindingInfo] = parentContext[contextAncestorBindingInfo]\n      }\n    } else {\n      self.$parents = []\n      self.$root = dataItem\n    }\n\n    self[contextSubscribeSymbol] = subscribable\n\n    if (shouldInheritData) {\n      dataItem = self.$data\n    } else {\n      self.$rawData = dataItemOrObservable\n      self.$data = dataItem\n    }\n\n    if (dataItemAlias) { self[dataItemAlias] = dataItem }\n\n        // The extendCallback function is provided when creating a child context or extending a context.\n        // It handles the specific actions needed to finish setting up the binding context. Actions in this\n        // function could also add dependencies to this binding context.\n    if (extendCallback) { extendCallback(self, parentContext, dataItem) }\n\n    return self.$data\n  }\n\n  if (settings && settings.exportDependencies) {\n        // The \"exportDependencies\" option means that the calling code will track any dependencies and re-create\n        // the binding context when they change.\n    updateContext()\n  } else {\n    subscribable = pureComputed(updateContext)\n    subscribable.peek()\n\n    // At this point, the binding context has been initialized, and the \"subscribable\" computed observable is\n    // subscribed to any observables that were accessed in the process. If there is nothing to track, the\n    // computed will be inactive, and we can safely throw it away. If it's active, the computed is stored in\n    // the context object.\n    if (subscribable.isActive()) {\n      self[contextSubscribeSymbol] = subscribable\n\n      // Always notify because even if the model ($data) hasn't changed, other context properties might have changed\n      subscribable['equalityComparer'] = null\n    } else {\n      self[contextSubscribeSymbol] = undefined\n    }\n  }\n}\n\nObject.assign(bindingContext.prototype, {\n\n  lookup (token, globals, node) {\n    // short circuits\n    switch (token) {\n      case '$element': return node\n      case '$context': return this\n      case 'this': case '$data': return this.$data\n    }\n    const $data = this.$data\n    // instanceof Object covers 1. {}, 2. [], 3. function() {}, 4. new *;  it excludes undefined, null, primitives.\n    if ($data instanceof Object && token in $data) { return $data[token] }\n    if (token in this) { return this[token] }\n    if (token in globals) { return globals[token] }\n\n    throw new Error(`The variable \"${token}\" was not found on $data, $context, or globals.`)\n  },\n\n  // Extend the binding context hierarchy with a new view model object. If the parent context is watching\n  // any observables, the new child context will automatically get a dependency on the parent context.\n  // But this does not mean that the $data value of the child context will also get updated. If the child\n  // view model also depends on the parent view model, you must provide a function that returns the correct\n  // view model on each update.\n  createChildContext (dataItemOrAccessor, dataItemAlias, extendCallback, settings) {\n    return new bindingContext(dataItemOrAccessor, this, dataItemAlias, function (self, parentContext) {\n          // Extend the context hierarchy by setting the appropriate pointers\n      self.$parentContext = parentContext\n      self.$parent = parentContext.$data\n      self.$parents = (parentContext.$parents || []).slice(0)\n      self.$parents.unshift(self.$parent)\n      if (extendCallback) { extendCallback(self) }\n    }, settings)\n  },\n\n  // Extend the binding context with new custom properties. This doesn't change the context hierarchy.\n  // Similarly to \"child\" contexts, provide a function here to make sure that the correct values are set\n  // when an observable view model is updated.\n  extend (properties) {\n    // If the parent context references an observable view model, \"_subscribable\" will always be the\n    // latest view model object. If not, \"_subscribable\" isn't set, and we can use the static \"$data\" value.\n    return new bindingContext(inheritParentIndicator, this, null, function (self, parentContext) {\n      extend(self, typeof properties === 'function' ? properties.call(self) : properties)\n    })\n  },\n\n  createStaticChildContext (dataItemOrAccessor, dataItemAlias) {\n    return this.createChildContext(dataItemOrAccessor, dataItemAlias, null, { 'exportDependencies': true })\n  }\n})\n\nexport function storedBindingContextForNode (node) {\n  const bindingInfo = domData.get(node, boundElementDomDataKey)\n  return bindingInfo && bindingInfo.context\n}\n\n// Retrieving binding context from arbitrary nodes\nexport function contextFor (node) {\n  // We can only do something meaningful for elements and comment nodes (in particular, not text nodes, as IE can't store domdata for them)\n  if (node && (node.nodeType === 1 || node.nodeType === 8)) {\n    return storedBindingContextForNode(node)\n  }\n}\n\nexport function dataFor (node) {\n  var context = contextFor(node)\n  return context ? context.$data : undefined\n}\n","\n/* eslint no-cond-assign: 0 */\n\nimport {\n    extend, objectMap, virtualElements, tagNameLower, domData, objectForEach,\n    arrayIndexOf, arrayForEach, options\n} from 'tko.utils'\n\nimport {\n    dependencyDetection\n} from 'tko.observable'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n  dataFor, bindingContext, boundElementDomDataKey, contextSubscribeSymbol\n} from './bindingContext'\n\nimport {\n  bindingEvent\n} from './bindingEvent'\n\nimport {\n  BindingResult\n} from './BindingResult'\n\nimport {\n  LegacyBindingHandler\n} from './LegacyBindingHandler'\n\n// The following element types will not be recursed into during binding.\nconst bindingDoesNotRecurseIntoElementTypes = {\n    // Don't want bindings that operate on text nodes to mutate <script> and <textarea> contents,\n    // because it's unexpected and a potential XSS issue.\n    // Also bindings should not operate on <template> elements since this breaks in Internet Explorer\n    // and because such elements' contents are always intended to be bound in a different context\n    // from where they appear in the document.\n  'script': true,\n  'textarea': true,\n  'template': true\n}\n\nfunction getBindingProvider () {\n  return options.bindingProviderInstance.instance || options.bindingProviderInstance\n}\n\nfunction isProviderForNode (provider, node) {\n  const nodeTypes = provider.FOR_NODE_TYPES || [1, 3, 8]\n  return nodeTypes.includes(node.nodeType)\n}\n\nfunction asProperHandlerClass (handler, bindingKey) {\n  if (!handler) { return }\n  return handler.isBindingHandlerClass ? handler\n    : LegacyBindingHandler.getOrCreateFor(bindingKey, handler)\n}\n\nfunction getBindingHandlerFromComponent (bindingKey, $component) {\n  if (!$component || typeof $component.getBindingHandler !== 'function') { return }\n  return asProperHandlerClass($component.getBindingHandler(bindingKey))\n}\n\nexport function getBindingHandler (bindingKey) {\n  const bindingDefinition = options.getBindingHandler(bindingKey) || getBindingProvider().bindingHandlers.get(bindingKey)\n  return asProperHandlerClass(bindingDefinition, bindingKey)\n}\n\n// Returns the value of a valueAccessor function\nfunction evaluateValueAccessor (valueAccessor) {\n  return valueAccessor()\n}\n\nfunction applyBindingsToDescendantsInternal (bindingContext, elementOrVirtualElement, asyncBindingsApplied) {\n  let nextInQueue = virtualElements.firstChild(elementOrVirtualElement)\n\n  if (!nextInQueue) { return }\n\n  let currentChild\n  const provider = getBindingProvider()\n  const preprocessNode = provider.preprocessNode\n\n  // Preprocessing allows a binding provider to mutate a node before bindings are applied to it. For example it's\n  // possible to insert new siblings after it, and/or replace the node with a different one. This can be used to\n  // implement custom binding syntaxes, such as {{ value }} for string interpolation, or custom element types that\n  // trigger insertion of <template> contents at that point in the document.\n  if (preprocessNode) {\n    while (currentChild = nextInQueue) {\n      nextInQueue = virtualElements.nextSibling(currentChild)\n      preprocessNode.call(provider, currentChild)\n    }\n\n    // Reset nextInQueue for the next loop\n    nextInQueue = virtualElements.firstChild(elementOrVirtualElement)\n  }\n\n  while (currentChild = nextInQueue) {\n    // Keep a record of the next child *before* applying bindings, in case the binding removes the current child from its position\n    nextInQueue = virtualElements.nextSibling(currentChild)\n    applyBindingsToNodeAndDescendantsInternal(bindingContext, currentChild, asyncBindingsApplied)\n  }\n\n  bindingEvent.notify(elementOrVirtualElement, bindingEvent.childrenComplete)\n}\n\nfunction hasBindings (node) {\n  const provider = getBindingProvider()\n  return isProviderForNode(provider, node) && provider.nodeHasBindings(node)\n}\n\nfunction applyBindingsToNodeAndDescendantsInternal (bindingContext, nodeVerified, asyncBindingsApplied) {\n  var isElement = nodeVerified.nodeType === 1\n  if (isElement) { // Workaround IE <= 8 HTML parsing weirdness\n    virtualElements.normaliseVirtualElementDomStructure(nodeVerified)\n  }\n\n  // Perf optimisation: Apply bindings only if...\n  // (1) We need to store the binding info for the node (all element nodes)\n  // (2) It might have bindings (e.g., it has a data-bind attribute, or it's a marker for a containerless template)\n\n  let shouldApplyBindings = isElement || // Case (1)\n      hasBindings(nodeVerified)          // Case (2)\n\n  const {shouldBindDescendants} = shouldApplyBindings\n    ? applyBindingsToNodeInternal(nodeVerified, null, bindingContext, asyncBindingsApplied)\n    : { shouldBindDescendants: true }\n\n  if (shouldBindDescendants && !bindingDoesNotRecurseIntoElementTypes[tagNameLower(nodeVerified)]) {\n    // We're recursing automatically into (real or virtual) child nodes without changing binding contexts. So,\n    //  * For children of a *real* element, the binding context is certainly the same as on their DOM .parentNode,\n    //    hence bindingContextsMayDifferFromDomParentElement is false\n    //  * For children of a *virtual* element, we can't be sure. Evaluating .parentNode on those children may\n    //    skip over any number of intermediate virtual elements, any of which might define a custom binding context,\n    //    hence bindingContextsMayDifferFromDomParentElement is true\n    applyBindingsToDescendantsInternal(bindingContext, nodeVerified, asyncBindingsApplied)\n  }\n}\n\n\nfunction * topologicalSortBindings (bindings, $component) {\n  const results = []\n  // Depth-first sort\n  const bindingsConsidered = {}    // A temporary record of which bindings are already in 'result'\n  const cyclicDependencyStack = [] // Keeps track of a depth-search so that, if there's a cycle, we know which bindings caused it\n\n  objectForEach(bindings, function pushBinding (bindingKey) {\n    if (!bindingsConsidered[bindingKey]) {\n      const binding = getBindingHandlerFromComponent(bindingKey, $component) || getBindingHandler(bindingKey)\n      if (!binding) { return }\n        // First add dependencies (if any) of the current binding\n      if (binding.after) {\n        cyclicDependencyStack.push(bindingKey)\n        arrayForEach(binding.after, function (bindingDependencyKey) {\n          if (!bindings[bindingDependencyKey]) { return }\n          if (arrayIndexOf(cyclicDependencyStack, bindingDependencyKey) !== -1) {\n            throw Error('Cannot combine the following bindings, because they have a cyclic dependency: ' + cyclicDependencyStack.join(', '))\n          } else {\n            pushBinding(bindingDependencyKey)\n          }\n        })\n        cyclicDependencyStack.length--\n      }\n        // Next add the current binding\n      results.push([ bindingKey, binding ])\n    }\n    bindingsConsidered[bindingKey] = true\n  })\n\n  for (const result of results) { yield result }\n}\n\nfunction applyBindingsToNodeInternal (node, sourceBindings, bindingContext, asyncBindingsApplied) {\n  const bindingInfo = domData.getOrSet(node, boundElementDomDataKey, {})\n  // Prevent multiple applyBindings calls for the same node, except when a binding value is specified\n  const alreadyBound = bindingInfo.alreadyBound\n  if (!sourceBindings) {\n    if (alreadyBound) {\n      onBindingError({\n        during: 'apply',\n        errorCaptured: new Error('You cannot apply bindings multiple times to the same element.'),\n        element: node,\n        bindingContext\n      })\n      return false\n    }\n    bindingInfo.alreadyBound = true\n  }\n  if (!alreadyBound) {\n    bindingInfo.context = bindingContext\n  }\n\n  // Use bindings if given, otherwise fall back on asking the bindings provider to give us some bindings\n  var bindings\n  if (sourceBindings && typeof sourceBindings !== 'function') {\n    bindings = sourceBindings\n  } else {\n    const provider = getBindingProvider()\n    const getBindings = provider.getBindingAccessors\n\n    if (isProviderForNode(provider, node)) {\n          // Get the binding from the provider within a computed observable so that we can update the bindings whenever\n          // the binding context is updated or if the binding provider accesses observables.\n      var bindingsUpdater = computed(\n              function () {\n                bindings = sourceBindings ? sourceBindings(bindingContext, node) : getBindings.call(provider, node, bindingContext)\n                  // Register a dependency on the binding context to support observable view models.\n                if (bindings && bindingContext[contextSubscribeSymbol]) { bindingContext[contextSubscribeSymbol]() }\n                return bindings\n              },\n              null, { disposeWhenNodeIsRemoved: node }\n          )\n\n      if (!bindings || !bindingsUpdater.isActive()) { bindingsUpdater = null }\n    }\n  }\n\n  var bindingHandlerThatControlsDescendantBindings\n  if (bindings) {\n    const $component = bindingContext.$component || {}\n\n    const allBindingHandlers = {}\n    domData.set(node, 'bindingHandlers', allBindingHandlers)\n\n        // Return the value accessor for a given binding. When bindings are static (won't be updated because of a binding\n        // context update), just return the value accessor from the binding. Otherwise, return a function that always gets\n        // the latest binding value and registers a dependency on the binding updater.\n    const getValueAccessor = bindingsUpdater\n            ? (bindingKey) => function (optionalValue) {\n              var valueAccessor = bindingsUpdater()[bindingKey]\n              if (arguments.length === 0) {\n                return evaluateValueAccessor(valueAccessor)\n              } else {\n                return valueAccessor(optionalValue)\n              }\n            } : (bindingKey) => bindings[bindingKey]\n\n        // Use of allBindings as a function is maintained for backwards compatibility, but its use is deprecated\n    function allBindings () {\n      return objectMap(bindingsUpdater ? bindingsUpdater() : bindings, evaluateValueAccessor)\n    }\n        // The following is the 3.x allBindings API\n    allBindings.has = (key) => key in bindings\n    allBindings.get = (key) => bindings[key] && evaluateValueAccessor(getValueAccessor(key))\n\n    if (bindingEvent.childrenComplete in bindings) {\n      bindingEvent.subscribe(node, bindingEvent.childrenComplete, () => {\n        const callback = evaluateValueAccessor(bindings[bindingEvent.childrenComplete])\n        if (!callback) { return }\n        const nodes = virtualElements.childNodes(node)\n        if (nodes.length) { callback(nodes, dataFor(nodes[0])) }\n      })\n    }\n\n    const bindingsGenerated = topologicalSortBindings(bindings, $component)\n    const nodeAsyncBindingPromises = new Set()\n    for (const [key, BindingHandlerClass] of bindingsGenerated) {\n        // Go through the sorted bindings, calling init and update for each\n      function reportBindingError (during, errorCaptured) {\n        onBindingError({\n          during,\n          errorCaptured,\n          bindings,\n          allBindings,\n          bindingKey: key,\n          bindingContext,\n          element: node,\n          valueAccessor: getValueAccessor(key)\n        })\n      }\n\n      if (node.nodeType === 8 && !BindingHandlerClass.allowVirtualElements) {\n        throw new Error(`The binding '${key}' cannot be used with virtual elements`)\n      }\n\n      try {\n        const bindingHandler = dependencyDetection.ignore(() =>\n          new BindingHandlerClass({\n            allBindings,\n            $element: node,\n            $context: bindingContext,\n            onError: reportBindingError,\n            valueAccessor (...v) { return getValueAccessor(key)(...v) }\n          })\n        )\n\n        if (bindingHandler.onValueChange) {\n          dependencyDetection.ignore(() =>\n            bindingHandler.computed('onValueChange')\n          )\n        }\n\n        // Expose the bindings via domData.\n        allBindingHandlers[key] = bindingHandler\n\n        if (bindingHandler.controlsDescendants) {\n          if (bindingHandlerThatControlsDescendantBindings !== undefined) { throw new Error('Multiple bindings (' + bindingHandlerThatControlsDescendantBindings + ' and ' + key + ') are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.') }\n          bindingHandlerThatControlsDescendantBindings = key\n        }\n\n        if (bindingHandler.bindingCompleted instanceof Promise) {\n          asyncBindingsApplied.add(bindingHandler.bindingCompleted)\n          nodeAsyncBindingPromises.add(bindingHandler.bindingCompleted)\n        }\n      } catch (err) {\n        reportBindingError('creation', err)\n      }\n    }\n\n    triggerDescendantsComplete(node, bindings, nodeAsyncBindingPromises)\n  }\n\n  const shouldBindDescendants = bindingHandlerThatControlsDescendantBindings === undefined\n  return { shouldBindDescendants }\n}\n\n/**\n *\n * @param {HTMLElement} node\n * @param {Object} bindings\n * @param {[Promise]} nodeAsyncBindingPromises\n */\nfunction triggerDescendantsComplete (node, bindings, nodeAsyncBindingPromises) {\n  /** descendantsComplete ought to be an instance of the descendantsComplete\n    *  binding handler. */\n  const hasBindingHandler = bindingEvent.descendantsComplete in bindings\n  const hasFirstChild = virtualElements.firstChild(node)\n  const accessor = hasBindingHandler && evaluateValueAccessor(bindings[bindingEvent.descendantsComplete])\n  const callback = () => {\n    bindingEvent.notify(node, bindingEvent.descendantsComplete)\n    if (accessor && hasFirstChild) { accessor(node) }\n  }\n  if (nodeAsyncBindingPromises.size) {\n    Promise.all(nodeAsyncBindingPromises).then(callback)\n  } else {\n    callback()\n  }\n}\n\n\nfunction getBindingContext (viewModelOrBindingContext, extendContextCallback) {\n  return viewModelOrBindingContext && (viewModelOrBindingContext instanceof bindingContext)\n    ? viewModelOrBindingContext\n    : new bindingContext(viewModelOrBindingContext, undefined, undefined, extendContextCallback)\n}\n\nexport function applyBindingAccessorsToNode (node, bindings, viewModelOrBindingContext, asyncBindingsApplied) {\n  if (node.nodeType === 1) { // If it's an element, workaround IE <= 8 HTML parsing weirdness\n    virtualElements.normaliseVirtualElementDomStructure(node)\n  }\n  return applyBindingsToNodeInternal(node, bindings, getBindingContext(viewModelOrBindingContext), asyncBindingsApplied)\n}\n\nexport function applyBindingsToNode (node, bindings, viewModelOrBindingContext) {\n  const asyncBindingsApplied = new Set()\n  const bindingContext = getBindingContext(viewModelOrBindingContext)\n  const bindingAccessors = getBindingProvider().makeBindingAccessors(bindings, bindingContext, node)\n  applyBindingAccessorsToNode(node, bindingAccessors, bindingContext, asyncBindingsApplied)\n  return new BindingResult({asyncBindingsApplied, rootNode: node, bindingContext})\n}\n\nexport function applyBindingsToDescendants (viewModelOrBindingContext, rootNode) {\n  const asyncBindingsApplied = new Set()\n  if (rootNode.nodeType === 1 || rootNode.nodeType === 8) {\n    const bindingContext = getBindingContext(viewModelOrBindingContext)\n    applyBindingsToDescendantsInternal(bindingContext, rootNode, asyncBindingsApplied)\n    return new BindingResult({asyncBindingsApplied, rootNode, bindingContext})\n  }\n  return new BindingResult({asyncBindingsApplied, rootNode})\n}\n\nexport function applyBindings (viewModelOrBindingContext, rootNode, extendContextCallback) {\n  const asyncBindingsApplied = new Set()\n  // If jQuery is loaded after Knockout, we won't initially have access to it. So save it here.\n  if (!options.jQuery === undefined && options.jQuery) {\n    options.jQuery = options.jQuery\n  }\n\n  // rootNode is optional\n  if (!rootNode) {\n    rootNode = window.document.body\n    if (!rootNode) {\n      throw Error('ko.applyBindings: could not find window.document.body; has the document been loaded?')\n    }\n  } else if (rootNode.nodeType !== 1 && rootNode.nodeType !== 8) {\n    throw Error('ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node')\n  }\n  const rootContext = getBindingContext(viewModelOrBindingContext, extendContextCallback)\n  applyBindingsToNodeAndDescendantsInternal(rootContext, rootNode, asyncBindingsApplied)\n  return Promise.all(asyncBindingsApplied)\n}\n\nfunction onBindingError (spec) {\n  var error, bindingText\n  if (spec.bindingKey) {\n        // During: 'init' or initial 'update'\n    error = spec.errorCaptured\n    spec.message = 'Unable to process binding \"' + spec.bindingKey +\n            '\" in binding \"' + spec.bindingKey +\n            '\"\\nMessage: ' + (error.message ? error.message : error)\n  } else {\n        // During: 'apply'\n    error = spec.errorCaptured\n  }\n  try {\n    extend(error, spec)\n  } catch (e) {\n        // Read-only error e.g. a DOMEXception.\n    spec.stack = error.stack\n    error = new Error(error.message ? error.message : error)\n    extend(error, spec)\n  }\n  options.onError(error)\n}\n","/* eslint no-cond-assign: 0 */\nimport {\n  fixUpContinuousNodeArray, replaceDomNodes, arrayPushAll,\n  anyDomNodeIsAttachedToDocument, domData, arrayMap, arrayForEach,\n  virtualElements, extend, cleanNode, removeNode, compareArrays\n} from 'tko.utils'\n\nimport {\n  dependencyDetection, observable\n} from 'tko.observable'\n\nimport { computed } from 'tko.computed'\n\n// Objective:\n// * Given an input array, a container DOM node, and a function from array elements to arrays of DOM nodes,\n//   map the array elements to arrays of DOM nodes, concatenate together all these arrays, and use them to populate the container DOM node\n// * Next time we're given the same combination of things (with the array possibly having mutated), update the container DOM node\n//   so that its children is again the concatenation of the mappings of the array elements, but don't re-map any array elements that we\n//   previously mapped - retain those nodes, and just insert/delete other ones\n\n// \"callbackAfterAddingNodes\" will be invoked after any \"mapping\"-generated nodes are inserted into the container node\n// You can use this, for example, to activate bindings on those nodes.\n\nfunction mapNodeAndRefreshWhenChanged (containerNode, mapping, valueToMap, callbackAfterAddingNodes, index) {\n  // Map this array value inside a dependentObservable so we re-map when any dependency changes\n  var mappedNodes = []\n  var dependentObservable = computed(function () {\n    var newMappedNodes = mapping(valueToMap, index, fixUpContinuousNodeArray(mappedNodes, containerNode)) || []\n\n    // On subsequent evaluations, just replace the previously-inserted DOM nodes\n    if (mappedNodes.length > 0) {\n      replaceDomNodes(mappedNodes, newMappedNodes)\n      if (callbackAfterAddingNodes) { dependencyDetection.ignore(callbackAfterAddingNodes, null, [valueToMap, newMappedNodes, index]) }\n    }\n\n    // Replace the contents of the mappedNodes array, thereby updating the record\n    // of which nodes would be deleted if valueToMap was itself later removed\n    mappedNodes.length = 0\n    arrayPushAll(mappedNodes, newMappedNodes)\n  }, null, { disposeWhenNodeIsRemoved: containerNode, disposeWhen: function () { return !anyDomNodeIsAttachedToDocument(mappedNodes) } })\n  return { mappedNodes: mappedNodes, dependentObservable: (dependentObservable.isActive() ? dependentObservable : undefined) }\n}\n\nvar lastMappingResultDomDataKey = domData.nextKey()\nlet deletedItemDummyValue = domData.nextKey()\n\nexport function setDomNodeChildrenFromArrayMapping (domNode, array, mapping, options, callbackAfterAddingNodes, editScript) {\n  // Compare the provided array against the previous one\n  array = array || []\n  if (typeof array.length === 'undefined') {\n    array = [array]\n  }\n  options = options || {}\n  let lastMappingResult = domData.get(domNode, lastMappingResultDomDataKey)\n  let isFirstExecution = !lastMappingResult\n\n  // Build the new mapping result\n  var newMappingResult = []\n  var lastMappingResultIndex = 0\n  var newMappingResultIndex = 0\n\n  var nodesToDelete = []\n  var itemsToProcess = []\n  var itemsForBeforeRemoveCallbacks = []\n  var itemsForMoveCallbacks = []\n  var itemsForAfterAddCallbacks = []\n  var mapData\n  let countWaitingForRemove = 0\n\n  function itemAdded (value) {\n    mapData = { arrayEntry: value, indexObservable: observable(newMappingResultIndex++) }\n    newMappingResult.push(mapData)\n    itemsToProcess.push(mapData)\n    if (!isFirstExecution) {\n      itemsForAfterAddCallbacks.push(mapData)\n    }\n  }\n\n  function itemMovedOrRetained (oldPosition) {\n    mapData = lastMappingResult[oldPosition]\n    if (newMappingResultIndex !== oldPosition) {\n      itemsForMoveCallbacks.push(mapData)\n    }\n    // Since updating the index might change the nodes, do so before calling fixUpContinuousNodeArray\n    mapData.indexObservable(newMappingResultIndex++)\n    fixUpContinuousNodeArray(mapData.mappedNodes, domNode)\n    newMappingResult.push(mapData)\n    itemsToProcess.push(mapData)\n  }\n\n  function callCallback (callback, items) {\n    if (callback) {\n      for (var i = 0, n = items.length; i < n; i++) {\n        arrayForEach(items[i].mappedNodes, function (node) {\n          callback(node, i, items[i].arrayEntry)\n        })\n      }\n    }\n  }\n\n  if (isFirstExecution) {\n    arrayForEach(array, itemAdded)\n  } else {\n    if (!editScript || (lastMappingResult && lastMappingResult['_countWaitingForRemove'])) {\n      // Compare the provided array against the previous one\n      var lastArray = isFirstExecution ? [] : arrayMap(lastMappingResult, function (x) { return x.arrayEntry })\n      var compareOptions = {\n        'dontLimitMoves': options['dontLimitMoves'],\n        'sparse': true\n      }\n      editScript = compareArrays(lastArray, array, compareOptions)\n    }\n\n    for (var i = 0, editScriptItem, movedIndex, itemIndex; editScriptItem = editScript[i]; i++) {\n      movedIndex = editScriptItem['moved']\n      itemIndex = editScriptItem['index']\n      switch (editScriptItem['status']) {\n        case 'deleted':\n          while (lastMappingResultIndex < itemIndex) {\n            itemMovedOrRetained(lastMappingResultIndex++)\n          }\n          if (movedIndex === undefined) {\n            mapData = lastMappingResult[lastMappingResultIndex]\n\n            // Stop tracking changes to the mapping for these nodes\n            if (mapData.dependentObservable) {\n              mapData.dependentObservable.dispose()\n              mapData.dependentObservable = undefined\n            }\n\n            // Queue these nodes for later removal\n            if (fixUpContinuousNodeArray(mapData.mappedNodes, domNode).length) {\n              if (options['beforeRemove']) {\n                newMappingResult.push(mapData)\n                itemsToProcess.push(mapData)\n                countWaitingForRemove++\n                if (mapData.arrayEntry === deletedItemDummyValue) {\n                  mapData = null\n                } else {\n                  itemsForBeforeRemoveCallbacks.push(mapData)\n                }\n              }\n              if (mapData) {\n                nodesToDelete.push.apply(nodesToDelete, mapData.mappedNodes)\n              }\n            }\n          }\n          lastMappingResultIndex++\n          break\n\n        case 'added':\n          while (newMappingResultIndex < itemIndex) {\n            itemMovedOrRetained(lastMappingResultIndex++)\n          }\n          if (movedIndex !== undefined) {\n            itemMovedOrRetained(movedIndex)\n          } else {\n            itemAdded(editScriptItem['value'])\n          }\n          break\n      }\n    }\n\n    while (newMappingResultIndex < array.length) {\n      itemMovedOrRetained(lastMappingResultIndex++)\n    }\n\n    // Record that the current view may still contain deleted items\n    // because it means we won't be able to use a provided editScript.\n    newMappingResult['_countWaitingForRemove'] = countWaitingForRemove\n  }\n\n  // Store a copy of the array items we just considered so we can difference it next time\n  domData.set(domNode, lastMappingResultDomDataKey, newMappingResult)\n\n  // Call beforeMove first before any changes have been made to the DOM\n  callCallback(options['beforeMove'], itemsForMoveCallbacks)\n\n  // Next remove nodes for deleted items (or just clean if there's a beforeRemove callback)\n  arrayForEach(nodesToDelete, options['beforeRemove'] ? cleanNode : removeNode)\n\n  // Next add/reorder the remaining items (will include deleted items if there's a beforeRemove callback)\n  i = 0\n  for (var nextNode = virtualElements.firstChild(domNode), lastNode, node; mapData = itemsToProcess[i]; i++) {\n    // Get nodes for newly added items\n    if (!mapData.mappedNodes) { extend(mapData, mapNodeAndRefreshWhenChanged(domNode, mapping, mapData.arrayEntry, callbackAfterAddingNodes, mapData.indexObservable)) }\n\n    // Put nodes in the right place if they aren't there already\n    for (var j = 0; node = mapData.mappedNodes[j]; nextNode = node.nextSibling, lastNode = node, j++) {\n      if (node !== nextNode) { virtualElements.insertAfter(domNode, node, lastNode) }\n    }\n\n    // Run the callbacks for newly added nodes (for example, to apply bindings, etc.)\n    if (!mapData.initialized && callbackAfterAddingNodes) {\n      callbackAfterAddingNodes(mapData.arrayEntry, mapData.mappedNodes, mapData.indexObservable)\n      mapData.initialized = true\n    }\n  }\n\n  // If there's a beforeRemove callback, call it after reordering.\n  // Note that we assume that the beforeRemove callback will usually be used to remove the nodes using\n  // some sort of animation, which is why we first reorder the nodes that will be removed. If the\n  // callback instead removes the nodes right away, it would be more efficient to skip reordering them.\n  // Perhaps we'll make that change in the future if this scenario becomes more common.\n  callCallback(options['beforeRemove'], itemsForBeforeRemoveCallbacks)\n\n  // Replace the stored values of deleted items with a dummy value. This provides two benefits: it marks this item\n  // as already \"removed\" so we won't call beforeRemove for it again, and it ensures that the item won't match up\n  // with an actual item in the array and appear as \"retained\" or \"moved\".\n  for (i = 0; i < itemsForBeforeRemoveCallbacks.length; ++i) {\n    itemsForBeforeRemoveCallbacks[i].arrayEntry = deletedItemDummyValue\n  }\n\n  // Finally call afterMove and afterAdd callbacks\n  callCallback(options['afterMove'], itemsForMoveCallbacks)\n  callCallback(options['afterAdd'], itemsForAfterAddCallbacks)\n}\n","// A template source represents a read/write way of accessing a template. This is to eliminate the need for template loading/saving\n// logic to be duplicated in every template engine (and means they can all work with anonymous templates, etc.)\n//\n// Two are provided by default:\n//  1. ko.templateSources.domElement       - reads/writes the text content of an arbitrary DOM element\n//  2. ko.templateSources.anonymousElement - uses ko.utils.domData to read/write text *associated* with the DOM element, but\n//                                           without reading/writing the actual element text content, since it will be overwritten\n//                                           with the rendered template output.\n// You can implement your own template source if you want to fetch/store templates somewhere other than in DOM elements.\n// Template sources need to have the following functions:\n//   text() \t\t\t- returns the template text from your storage location\n//   text(value)\t\t- writes the supplied template text to your storage location\n//   data(key)\t\t\t- reads values stored using data(key, value) - see below\n//   data(key, value)\t- associates \"value\" with this template and the key \"key\". Is used to store information like \"isRewritten\".\n//\n// Optionally, template sources can also have the following functions:\n//   nodes()            - returns a DOM element containing the nodes of this template, where available\n//   nodes(value)       - writes the given DOM element to your storage location\n// If a DOM element is available for a given template source, template engines are encouraged to use it in preference over text()\n// for improved speed. However, all templateSources must supply text() even if they don't supply nodes().\n//\n// Once you've implemented a templateSource, make your template engine use it by subclassing whatever template engine you were\n// using and overriding \"makeTemplateSource\" to return an instance of your custom template source.\n\nimport {\n    tagNameLower as tagNameLowerFn, setHtml, domData, parseHtmlForTemplateNodes\n} from 'tko.utils'\n\n// ---- ko.templateSources.domElement -----\n\n// template types\nvar templateScript = 1,\n  templateTextArea = 2,\n  templateTemplate = 3,\n  templateElement = 4\n\nexport function domElement (element) {\n  this.domElement = element\n\n  if (!element) { return }\n  var tagNameLower = tagNameLowerFn(element)\n  this.templateType =\n        tagNameLower === 'script' ? templateScript\n        : tagNameLower === 'textarea' ? templateTextArea\n            // For browsers with proper <template> element support, where the .content property gives a document fragment\n        : tagNameLower == 'template' && element.content && element.content.nodeType === 11 ? templateTemplate\n        : templateElement\n}\n\ndomElement.prototype.text = function (/* valueToWrite */) {\n  var elemContentsProperty = this.templateType === templateScript ? 'text'\n                             : this.templateType === templateTextArea ? 'value'\n                             : 'innerHTML'\n\n  if (arguments.length == 0) {\n    return this.domElement[elemContentsProperty]\n  } else {\n    var valueToWrite = arguments[0]\n    if (elemContentsProperty === 'innerHTML') { setHtml(this.domElement, valueToWrite) } else { this.domElement[elemContentsProperty] = valueToWrite }\n  }\n}\n\nvar dataDomDataPrefix = domData.nextKey() + '_'\ndomElement.prototype.data = function (key /*, valueToWrite */) {\n  if (arguments.length === 1) {\n    return domData.get(this.domElement, dataDomDataPrefix + key)\n  } else {\n    domData.set(this.domElement, dataDomDataPrefix + key, arguments[1])\n  }\n}\n\nvar templatesDomDataKey = domData.nextKey()\nfunction getTemplateDomData (element) {\n  return domData.get(element, templatesDomDataKey) || {}\n}\nfunction setTemplateDomData (element, data) {\n  domData.set(element, templatesDomDataKey, data)\n}\n\ndomElement.prototype.nodes = function (/* valueToWrite */) {\n  var element = this.domElement\n  if (arguments.length == 0) {\n    const templateData = getTemplateDomData(element)\n    let nodes = templateData.containerData || (\n      this.templateType === templateTemplate ? element.content :\n      this.templateType === templateElement ? element :\n      undefined\n    )\n    if (!nodes || templateData.alwaysCheckText) {\n    // If the template is associated with an element that stores the template as text,\n    // parse and cache the nodes whenever there's new text content available. This allows\n    // the user to update the template content by updating the text of template node.\n      const text = this['text']()\n      if (text) {\n        nodes = parseHtmlForTemplateNodes(text, element.ownerDocument)\n        this['text']('')   // clear the text from the node\n        setTemplateDomData(element, {containerData: nodes, alwaysCheckText: true})\n      }\n    }\n\n    return nodes\n  } else {\n    var valueToWrite = arguments[0]\n    setTemplateDomData(element, {containerData: valueToWrite})\n  }\n}\n\n// ---- ko.templateSources.anonymousTemplate -----\n// Anonymous templates are normally saved/retrieved as DOM nodes through \"nodes\".\n// For compatibility, you can also read \"text\"; it will be serialized from the nodes on demand.\n// Writing to \"text\" is still supported, but then the template data will not be available as DOM nodes.\n\nexport function anonymousTemplate (element) {\n  this.domElement = element\n}\n\nanonymousTemplate.prototype = new domElement()\nanonymousTemplate.prototype.constructor = anonymousTemplate\nanonymousTemplate.prototype.text = function (/* valueToWrite */) {\n  if (arguments.length == 0) {\n    var templateData = getTemplateDomData(this.domElement)\n    if (templateData.textData === undefined && templateData.containerData) { templateData.textData = templateData.containerData.innerHTML }\n    return templateData.textData\n  } else {\n    var valueToWrite = arguments[0]\n    setTemplateDomData(this.domElement, {textData: valueToWrite})\n  }\n}\n","// If you want to make a custom template engine,\n//\n// [1] Inherit from this class (like ko.nativeTemplateEngine does)\n// [2] Override 'renderTemplateSource', supplying a function with this signature:\n//\n//        function (templateSource, bindingContext, options) {\n//            // - templateSource.text() is the text of the template you should render\n//            // - bindingContext.$data is the data you should pass into the template\n//            //   - you might also want to make bindingContext.$parent, bindingContext.$parents,\n//            //     and bindingContext.$root available in the template too\n//            // - options gives you access to any other properties set on \"data-bind: { template: options }\"\n//            // - templateDocument is the document object of the template\n//            //\n//            // Return value: an array of DOM nodes\n//        }\n//\n// [3] Override 'createJavaScriptEvaluatorBlock', supplying a function with this signature:\n//\n//        function (script) {\n//            // Return value: Whatever syntax means \"Evaluate the JavaScript statement 'script' and output the result\"\n//            //               For example, the jquery.tmpl template engine converts 'someScript' to '${ someScript }'\n//        }\n//\n//     This is only necessary if you want to allow data-bind attributes to reference arbitrary template variables.\n//     If you don't want to allow that, you can set the property 'allowTemplateRewriting' to false (like ko.nativeTemplateEngine does)\n//     and then you don't need to override 'createJavaScriptEvaluatorBlock'.\n\nimport {\n  extend, options\n} from 'tko.utils'\n\nimport {\n  domElement, anonymousTemplate\n} from './templateSources'\n\nexport function templateEngine () { };\n\nextend(templateEngine.prototype, {\n  renderTemplateSource: function (templateSource, bindingContext, options, templateDocument) {\n    options.onError('Override renderTemplateSource')\n  },\n\n  createJavaScriptEvaluatorBlock: function (script) {\n    options.onError('Override createJavaScriptEvaluatorBlock')\n  },\n\n  makeTemplateSource: function (template, templateDocument) {\n      // Named template\n    if (typeof template === 'string') {\n      templateDocument = templateDocument || document\n      var elem = templateDocument.getElementById(template)\n      if (!elem) { options.onError('Cannot find template with ID ' + template) }\n      return new domElement(elem)\n    } else if ((template.nodeType == 1) || (template.nodeType == 8)) {\n          // Anonymous template\n      return new anonymousTemplate(template)\n    } else { options.onError('Unknown template type: ' + template) }\n  },\n\n  renderTemplate: function (template, bindingContext, options, templateDocument) {\n    var templateSource = this['makeTemplateSource'](template, templateDocument)\n    return this.renderTemplateSource(templateSource, bindingContext, options, templateDocument)\n  }\n})\n","import {\n    virtualElements, fixUpContinuousNodeArray, replaceDomNodes, memoization,\n    domNodeIsAttachedToDocument, moveCleanedNodesToContainerElement,\n    arrayFilter, domData, options as koOptions\n} from 'tko.utils'\n\nimport {\n    applyBindings, setDomNodeChildrenFromArrayMapping, AsyncBindingHandler,\n    bindingEvent, bindingContext as BindingContextConstructor\n} from 'tko.bind'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n    isObservable, dependencyDetection, unwrap, observable, isObservableArray\n} from 'tko.observable'\n\nimport {\n    templateEngine\n} from './templateEngine'\n\nimport {\n  anonymousTemplate as AnonymousTemplate\n} from './templateSources'\n\nvar _templateEngine\nconst cleanContainerDomDataKey = domData.nextKey()\n\nexport function setTemplateEngine (tEngine) {\n  if ((tEngine !== undefined) && !(tEngine instanceof templateEngine)) {\n        // TODO: ko.templateEngine to appropriate name\n    throw new Error('templateEngine must inherit from ko.templateEngine')\n  }\n  _templateEngine = tEngine\n}\n\nfunction invokeForEachNodeInContinuousRange (firstNode, lastNode, action) {\n  let node\n  let nextInQueue = firstNode\n  let firstOutOfRangeNode = virtualElements.nextSibling(lastNode)\n  while (nextInQueue && ((node = nextInQueue) !== firstOutOfRangeNode)) {\n    nextInQueue = virtualElements.nextSibling(node)\n    action(node, nextInQueue)\n  }\n}\n\nfunction activateBindingsOnContinuousNodeArray (continuousNodeArray, bindingContext, afterBindingCallback) {\n  // To be used on any nodes that have been rendered by a template and have been inserted into some parent element\n  // Walks through continuousNodeArray (which *must* be continuous, i.e., an uninterrupted sequence of sibling nodes, because\n  // the algorithm for walking them relies on this), and for each top-level item in the virtual-element sense,\n  // (1) Does a regular \"applyBindings\" to associate bindingContext with this node and to activate any non-memoized bindings\n  // (2) Unmemoizes any memos in the DOM subtree (e.g., to activate bindings that had been memoized during template rewriting)\n\n  if (continuousNodeArray.length) {\n    var firstNode = continuousNodeArray[0]\n    var lastNode = continuousNodeArray[continuousNodeArray.length - 1]\n    var parentNode = firstNode.parentNode\n    var provider = koOptions.bindingProviderInstance\n    var preprocessNode = provider.preprocessNode\n\n    if (preprocessNode) {\n      invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node, nextNodeInRange) {\n        var nodePreviousSibling = node.previousSibling\n        var newNodes = preprocessNode.call(provider, node)\n        if (newNodes) {\n          if (node === firstNode) { firstNode = newNodes[0] || nextNodeInRange }\n          if (node === lastNode) { lastNode = newNodes[newNodes.length - 1] || nodePreviousSibling }\n        }\n      })\n\n      // Because preprocessNode can change the nodes, including the first and last nodes, update continuousNodeArray to match.\n      // We need the full set, including inner nodes, because the unmemoize step might remove the first node (and so the real\n      // first node needs to be in the array).\n      continuousNodeArray.length = 0\n      if (!firstNode) { // preprocessNode might have removed all the nodes, in which case there's nothing left to do\n        return\n      }\n      if (firstNode === lastNode) {\n        continuousNodeArray.push(firstNode)\n      } else {\n        continuousNodeArray.push(firstNode, lastNode)\n        fixUpContinuousNodeArray(continuousNodeArray, parentNode)\n      }\n    }\n\n    // Need to applyBindings *before* unmemoziation, because unmemoization might introduce extra nodes (that we don't want to re-bind)\n    // whereas a regular applyBindings won't introduce new memoized nodes\n    invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node) {\n      if (node.nodeType === 1 || node.nodeType === 8) { applyBindings(bindingContext, node).then(afterBindingCallback) }\n    })\n    invokeForEachNodeInContinuousRange(firstNode, lastNode, function (node) {\n      if (node.nodeType === 1 || node.nodeType === 8) { memoization.unmemoizeDomNodeAndDescendants(node, [bindingContext]) }\n    })\n\n    // Make sure any changes done by applyBindings or unmemoize are reflected in the array\n    fixUpContinuousNodeArray(continuousNodeArray, parentNode)\n  }\n}\n\nfunction getFirstNodeFromPossibleArray (nodeOrNodeArray) {\n  return nodeOrNodeArray.nodeType ? nodeOrNodeArray\n                                    : nodeOrNodeArray.length > 0 ? nodeOrNodeArray[0]\n                                    : null\n}\n\nfunction executeTemplate (targetNodeOrNodeArray, renderMode, template, bindingContext, options, afterBindingCallback) {\n  options = options || {}\n  var firstTargetNode = targetNodeOrNodeArray && getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n  var templateDocument = (firstTargetNode || template || {}).ownerDocument\n  var templateEngineToUse = (options.templateEngine || _templateEngine)\n  var renderedNodesArray = templateEngineToUse.renderTemplate(template, bindingContext, options, templateDocument)\n\n    // Loosely check result is an array of DOM nodes\n  if ((typeof renderedNodesArray.length !== 'number') || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType !== 'number')) { throw new Error('Template engine must return an array of DOM nodes') }\n\n  var haveAddedNodesToParent = false\n  switch (renderMode) {\n    case 'replaceChildren':\n      virtualElements.setDomNodeChildren(targetNodeOrNodeArray, renderedNodesArray)\n      haveAddedNodesToParent = true\n      break\n    case 'replaceNode':\n      replaceDomNodes(targetNodeOrNodeArray, renderedNodesArray)\n      haveAddedNodesToParent = true\n      break\n    case 'ignoreTargetNode': break\n    default:\n      throw new Error('Unknown renderMode: ' + renderMode)\n  }\n\n  if (haveAddedNodesToParent) {\n    activateBindingsOnContinuousNodeArray(renderedNodesArray, bindingContext, afterBindingCallback)\n    if (options.afterRender) { dependencyDetection.ignore(options.afterRender, null, [renderedNodesArray, bindingContext['$data']]) }\n    if (renderMode === 'replaceChildren') {\n      bindingEvent.notify(targetNodeOrNodeArray, bindingEvent.childrenComplete)\n    }\n  }\n\n  return renderedNodesArray\n}\n\nfunction resolveTemplateName (template, data, context) {\n    // The template can be specified as:\n  if (isObservable(template)) {\n    // 1. An observable, with string value\n    return template()\n  } else if (typeof template === 'function') {\n    // 2. A function of (data, context) returning a string\n    return template(data, context)\n  } else {\n    // 3. A string\n    return template\n  }\n}\n\nexport function renderTemplate (template, dataOrBindingContext, options, targetNodeOrNodeArray, renderMode, afterBindingCallback) {\n  options = options || {}\n  if ((options.templateEngine || _templateEngine) === undefined) { throw new Error('Set a template engine before calling renderTemplate') }\n  renderMode = renderMode || 'replaceChildren'\n\n  if (targetNodeOrNodeArray) {\n    var firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n\n    var whenToDispose = function () { return (!firstTargetNode) || !domNodeIsAttachedToDocument(firstTargetNode) } // Passive disposal (on next evaluation)\n    var activelyDisposeWhenNodeIsRemoved = (firstTargetNode && renderMode === 'replaceNode') ? firstTargetNode.parentNode : firstTargetNode\n\n    return computed( // So the DOM is automatically updated when any dependency changes\n      function () {\n        // Ensure we've got a proper binding context to work with\n        var bindingContext = (dataOrBindingContext && (dataOrBindingContext instanceof BindingContextConstructor))\n              ? dataOrBindingContext\n              : new BindingContextConstructor(dataOrBindingContext, null, null, null, { 'exportDependencies': true })\n\n        var templateName = resolveTemplateName(template, bindingContext.$data, bindingContext)\n        const renderedNodesArray = executeTemplate(targetNodeOrNodeArray, renderMode, templateName, bindingContext, options, afterBindingCallback)\n\n        if (renderMode === 'replaceNode') {\n          targetNodeOrNodeArray = renderedNodesArray\n          firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray)\n        }\n      },\n      null,\n      { disposeWhen: whenToDispose, disposeWhenNodeIsRemoved: activelyDisposeWhenNodeIsRemoved }\n    )\n  } else {\n        // We don't yet have a DOM node to evaluate, so use a memo and render the template later when there is a DOM node\n    return memoization.memoize(function (domNode) {\n      renderTemplate(template, dataOrBindingContext, options, domNode, 'replaceNode')\n    })\n  }\n}\n\nexport default function renderTemplateForEach (template, arrayOrObservableArray, options, targetNode, parentBindingContext, afterBindingCallback) {\n    // Since setDomNodeChildrenFromArrayMapping always calls executeTemplateForArrayItem and then\n    // activateBindingsCallback for added items, we can store the binding context in the former to use in the latter.\n  var arrayItemContext\n\n    // This will be called by setDomNodeChildrenFromArrayMapping to get the nodes to add to targetNode\n  function executeTemplateForArrayItem (arrayValue, index) {\n    // Support selecting template as a function of the data being rendered\n    if (options.as) {\n      if (koOptions.createChildContextWithAs) {\n        arrayItemContext = parentBindingContext.createChildContext(\n          arrayValue, options.as, context => { context.$index = index }\n        )\n      } else {\n        arrayItemContext = parentBindingContext.extend({\n          [options.as]: arrayValue,\n          $index: index\n        })\n      }\n    } else {\n      arrayItemContext = parentBindingContext.createChildContext(arrayValue, options.as, context => { context.$index = index })\n    }\n\n    var templateName = resolveTemplateName(template, arrayValue, arrayItemContext)\n    return executeTemplate(targetNode, 'ignoreTargetNode', templateName, arrayItemContext, options, afterBindingCallback)\n  }\n\n    // This will be called whenever setDomNodeChildrenFromArrayMapping has added nodes to targetNode\n  var activateBindingsCallback = function (arrayValue, addedNodesArray /*, index */) {\n    activateBindingsOnContinuousNodeArray(addedNodesArray, arrayItemContext, afterBindingCallback)\n    if (options.afterRender) { options.afterRender(addedNodesArray, arrayValue) }\n\n        // release the \"cache\" variable, so that it can be collected by\n        // the GC when its value isn't used from within the bindings anymore.\n    arrayItemContext = null\n  }\n\n  // Call setDomNodeChildrenFromArrayMapping, ignoring any observables unwrapped within (most likely from a callback function).\n  // If the array items are observables, though, they will be unwrapped in executeTemplateForArrayItem and managed within setDomNodeChildrenFromArrayMapping.\n  function localSetDomNodeChildrenFromArrayMapping (newArray, changeList) {\n    dependencyDetection.ignore(setDomNodeChildrenFromArrayMapping, null, [targetNode, newArray, executeTemplateForArrayItem, options, activateBindingsCallback, changeList])\n    bindingEvent.notify(targetNode, bindingEvent.childrenComplete)\n  }\n\n  const shouldHideDestroyed = (options.includeDestroyed === false) || (koOptions.foreachHidesDestroyed && !options.includeDestroyed);\n  if (!shouldHideDestroyed && !options.beforeRemove && isObservableArray(arrayOrObservableArray)) {\n    localSetDomNodeChildrenFromArrayMapping(arrayOrObservableArray.peek())\n    var subscription = arrayOrObservableArray.subscribe(function (changeList) {\n      localSetDomNodeChildrenFromArrayMapping(arrayOrObservableArray(), changeList)\n    }, null, 'arrayChange')\n    subscription.disposeWhenNodeIsRemoved(targetNode)\n    return subscription\n  } else {\n    return computed(function () {\n      var unwrappedArray = unwrap(arrayOrObservableArray) || []\n      const unwrappedIsIterable = Symbol.iterator in unwrappedArray\n      if (!unwrappedIsIterable) { unwrappedArray = [unwrappedArray] }\n      if (shouldHideDestroyed) {\n        // Filter out any entries marked as destroyed\n        unwrappedArray = arrayFilter(unwrappedArray, function (item) {\n          return item === undefined || item === null || !unwrap(item._destroy);\n        })\n      }\n      localSetDomNodeChildrenFromArrayMapping(unwrappedArray)\n    }, null, { disposeWhenNodeIsRemoved: targetNode })\n  }\n}\n\nlet templateComputedDomDataKey = domData.nextKey()\n\nexport class TemplateBindingHandler extends AsyncBindingHandler {\n  constructor (params) {\n    super(params)\n    const element = this.$element\n    const bindingValue = unwrap(this.value)\n\n    // Expose 'conditional' for `else` chaining.\n    domData.set(element, 'conditional', {\n      elseChainSatisfied: observable(true)\n    })\n\n    // Support anonymous templates\n    if (typeof bindingValue === 'string' || bindingValue.name) {\n      this.bindNamedTemplate()\n    } else if ('nodes' in bindingValue) {\n      this.bindNodeTemplate(bindingValue.nodes || [])\n    } else {\n      this.bindAnonymousTemplate()\n    }\n  }\n\n  bindNamedTemplate () {\n    // It's a named template - clear the element\n    virtualElements.emptyNode(this.$element)\n  }\n\n  // We've been given an array of DOM nodes. Save them as the template source.\n  // There is no known use case for the node array being an observable array (if the output\n  // varies, put that behavior *into* your template - that's what templates are for), and\n  // the implementation would be a mess, so assert that it's not observable.\n  bindNodeTemplate (nodes) {\n    if (isObservable(nodes)) {\n      throw new Error('The \"nodes\" option must be a plain, non-observable array.')\n    }\n\n    // If the nodes are already attached to a KO-generated container, we reuse that container without moving the\n    // elements to a new one (we check only the first node, as the nodes are always moved together)\n    let container = nodes[0] && nodes[0].parentNode\n    if (!container || !domData.get(container, cleanContainerDomDataKey)) {\n      container = moveCleanedNodesToContainerElement(nodes)\n      domData.set(container, cleanContainerDomDataKey, true)\n    }\n\n    new AnonymousTemplate(this.$element).nodes(container)\n  }\n\n  bindAnonymousTemplate () {\n    // It's an anonymous template - store the element contents, then clear the element\n    const templateNodes = virtualElements.childNodes(this.$element)\n    if (templateNodes.length === 0) {\n      throw new Error('Anonymous template defined, but no template content was provided.')\n    }\n    const container = moveCleanedNodesToContainerElement(templateNodes) // This also removes the nodes from their current parent\n    new AnonymousTemplate(this.$element).nodes(container)\n  }\n\n  onValueChange () {\n    const element = this.$element\n    const bindingContext = this.$context\n    var value = this.value\n    var options = unwrap(value)\n    var shouldDisplay = true\n    var templateComputed = null\n    var elseChainSatisfied = domData.get(element, 'conditional').elseChainSatisfied\n    var templateName\n\n    if (typeof options === 'string') {\n      templateName = value\n      options = {}\n    } else {\n      templateName = options.name\n\n      // Support \"if\"/\"ifnot\" conditions\n      if ('if' in options) {\n        shouldDisplay = unwrap(options.if)\n      }\n\n      if (shouldDisplay && 'ifnot' in options) {\n        shouldDisplay = !unwrap(options.ifnot)\n      }\n    }\n\n    if ('foreach' in options) {\n      // Render once for each data point (treating data set as empty if shouldDisplay==false)\n      var dataArray = (shouldDisplay && options.foreach) || []\n      templateComputed = renderTemplateForEach(templateName || element, dataArray, options, element, bindingContext, this.completeBinding)\n\n      elseChainSatisfied((unwrap(dataArray) || []).length !== 0)\n    } else if (shouldDisplay) {\n      // Render once for this single data point (or use the viewModel if no data was provided)\n      var innerBindingContext = ('data' in options)\n        ? bindingContext.createStaticChildContext(options.data, options.as)  // Given an explicit 'data' value, we create a child binding context for it\n        : bindingContext                                                        // Given no explicit 'data' value, we retain the same binding context\n      templateComputed = renderTemplate(templateName || element, innerBindingContext, options, element, undefined, this.completeBinding)\n      elseChainSatisfied(true)\n    } else {\n      virtualElements.emptyNode(element)\n      elseChainSatisfied(false)\n    }\n\n    // It only makes sense to have a single template computed per element (otherwise which one should have its output displayed?)\n    this.disposeOldComputedAndStoreNewOne(element, templateComputed)\n  }\n\n  disposeOldComputedAndStoreNewOne (element, newComputed) {\n    let oldComputed = domData.get(element, templateComputedDomDataKey)\n    if (oldComputed && (typeof oldComputed.dispose === 'function')) { oldComputed.dispose() }\n    domData.set(element, templateComputedDomDataKey, (newComputed && (!newComputed.isActive || newComputed.isActive())) ? newComputed : undefined)\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n","\nimport {\n  extend, options, ieVersion, makeArray, parseHtmlFragment\n} from 'tko.utils'\n\nimport {\n  templateEngine\n} from './templateEngine'\n\nimport {\n  setTemplateEngine\n} from './templating'\n\nexport function nativeTemplateEngine () {\n}\n\nnativeTemplateEngine.prototype = new templateEngine()\nnativeTemplateEngine.prototype.constructor = nativeTemplateEngine\nnativeTemplateEngine.prototype.renderTemplateSource = function (templateSource, bindingContext, options, templateDocument) {\n  var useNodesIfAvailable = !(ieVersion < 9), // IE<9 cloneNode doesn't work properly\n    templateNodesFunc = useNodesIfAvailable ? templateSource.nodes : null,\n    templateNodes = templateNodesFunc ? templateSource.nodes() : null\n\n  if (templateNodes) {\n    return makeArray(templateNodes.cloneNode(true).childNodes)\n  } else {\n    var templateText = templateSource.text()\n    return parseHtmlFragment(templateText, templateDocument)\n  }\n}\n\nnativeTemplateEngine.instance = new nativeTemplateEngine()\nsetTemplateEngine(nativeTemplateEngine.instance)\n","\nimport {\n  subscribable, dependencyDetection\n} from 'tko.observable'\n\nimport {\n  getObjectOwnProperty, tasks\n} from 'tko.utils'\n\nvar loadingSubscribablesCache = {}, // Tracks component loads that are currently in flight\n  loadedDefinitionsCache = {}    // Tracks component loads that have already completed\n\nfunction loadComponentAndNotify (componentName, callback) {\n  var _subscribable = getObjectOwnProperty(loadingSubscribablesCache, componentName),\n    completedAsync\n  if (!_subscribable) {\n        // It's not started loading yet. Start loading, and when it's done, move it to loadedDefinitionsCache.\n    _subscribable = loadingSubscribablesCache[componentName] = new subscribable()\n    _subscribable.subscribe(callback)\n\n    beginLoadingComponent(componentName, function (definition, config) {\n      var isSynchronousComponent = !!(config && config.synchronous)\n      loadedDefinitionsCache[componentName] = { definition: definition, isSynchronousComponent: isSynchronousComponent }\n      delete loadingSubscribablesCache[componentName]\n\n            // For API consistency, all loads complete asynchronously. However we want to avoid\n            // adding an extra task schedule if it's unnecessary (i.e., the completion is already\n            // async).\n            //\n            // You can bypass the 'always asynchronous' feature by putting the synchronous:true\n            // flag on your component configuration when you register it.\n      if (completedAsync || isSynchronousComponent) {\n                // Note that notifySubscribers ignores any dependencies read within the callback.\n                // See comment in loaderRegistryBehaviors.js for reasoning\n        _subscribable.notifySubscribers(definition)\n      } else {\n        tasks.schedule(function () {\n          _subscribable.notifySubscribers(definition)\n        })\n      }\n    })\n    completedAsync = true\n  } else {\n    _subscribable.subscribe(callback)\n  }\n}\n\nfunction beginLoadingComponent (componentName, callback) {\n  getFirstResultFromLoaders('getConfig', [componentName], function (config) {\n    if (config) {\n            // We have a config, so now load its definition\n      getFirstResultFromLoaders('loadComponent', [componentName, config], function (definition) {\n        callback(definition, config)\n      })\n    } else {\n            // The component has no config - it's unknown to all the loaders.\n            // Note that this is not an error (e.g., a module loading error) - that would abort the\n            // process and this callback would not run. For this callback to run, all loaders must\n            // have confirmed they don't know about this component.\n      callback(null, null)\n    }\n  })\n}\n\nfunction getFirstResultFromLoaders (methodName, argsExceptCallback, callback, candidateLoaders) {\n    // On the first call in the stack, start with the full set of loaders\n  if (!candidateLoaders) {\n    candidateLoaders = registry.loaders.slice(0) // Use a copy, because we'll be mutating this array\n  }\n\n    // Try the next candidate\n  var currentCandidateLoader = candidateLoaders.shift()\n  if (currentCandidateLoader) {\n    var methodInstance = currentCandidateLoader[methodName]\n    if (methodInstance) {\n      var wasAborted = false,\n        synchronousReturnValue = methodInstance.apply(currentCandidateLoader, argsExceptCallback.concat(function (result) {\n          if (wasAborted) {\n            callback(null)\n          } else if (result !== null) {\n                        // This candidate returned a value. Use it.\n            callback(result)\n          } else {\n                        // Try the next candidate\n            getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders)\n          }\n        }))\n\n            // Currently, loaders may not return anything synchronously. This leaves open the possibility\n            // that we'll extend the API to support synchronous return values in the future. It won't be\n            // a breaking change, because currently no loader is allowed to return anything except undefined.\n      if (synchronousReturnValue !== undefined) {\n        wasAborted = true\n\n                // Method to suppress exceptions will remain undocumented. This is only to keep\n                // KO's specs running tidily, since we can observe the loading got aborted without\n                // having exceptions cluttering up the console too.\n        if (!currentCandidateLoader.suppressLoaderExceptions) {\n          throw new Error('Component loaders must supply values by invoking the callback, not by returning values synchronously.')\n        }\n      }\n    } else {\n            // This candidate doesn't have the relevant handler. Synchronously move on to the next one.\n      getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders)\n    }\n  } else {\n        // No candidates returned a value\n    callback(null)\n  }\n}\n\nexport var registry = {\n  get (componentName, callback) {\n    var cachedDefinition = getObjectOwnProperty(loadedDefinitionsCache, componentName)\n    if (cachedDefinition) {\n      // It's already loaded and cached. Reuse the same definition object.\n      // Note that for API consistency, even cache hits complete asynchronously by default.\n      // You can bypass this by putting synchronous:true on your component config.\n      if (cachedDefinition.isSynchronousComponent) {\n        dependencyDetection.ignore(function () { // See comment in loaderRegistryBehaviors.js for reasoning\n          callback(cachedDefinition.definition)\n        })\n      } else {\n        tasks.schedule(function () { callback(cachedDefinition.definition) })\n      }\n    } else {\n      // Join the loading process that is already underway, or start a new one.\n      loadComponentAndNotify(componentName, callback)\n    }\n  },\n\n  clearCachedDefinition (componentName) {\n    delete loadedDefinitionsCache[componentName]\n  },\n\n  _getFirstResultFromLoaders: getFirstResultFromLoaders,\n\n  loaders: []\n}\n","\nimport {\n    isDomElement, isDocumentFragment, tagNameLower, parseHtmlFragment,\n    makeArray, cloneNodes, hasOwnProperty\n} from 'tko.utils'\n\nimport {registry} from './registry'\n\n// The default loader is responsible for two things:\n// 1. Maintaining the default in-memory registry of component configuration objects\n//    (i.e., the thing you're writing to when you call ko.components.register(someName, ...))\n// 2. Answering requests for components by fetching configuration objects\n//    from that default in-memory registry and resolving them into standard\n//    component definition objects (of the form { createViewModel: ..., template: ... })\n// Custom loaders may override either of these facilities, i.e.,\n// 1. To supply configuration objects from some other source (e.g., conventions)\n// 2. Or, to resolve configuration objects by loading viewmodels/templates via arbitrary logic.\n\nexport var defaultConfigRegistry = {}\nexport const VIEW_MODEL_FACTORY = Symbol('Knockout View Model ViewModel factory')\n\nexport function register (componentName, config) {\n  if (!config) {\n    throw new Error('Invalid configuration for ' + componentName)\n  }\n\n  if (isRegistered(componentName)) {\n    throw new Error('Component ' + componentName + ' is already registered')\n  }\n\n  const ceok = componentName.includes('-') && componentName.toLowerCase() === componentName\n\n  if (!config.ignoreCustomElementWarning && !ceok) {\n    console.log(`\n  Knockout warning: components for custom elements must be lowercase and contain a dash.  To ignore this warning, add to the 'config' of .register(componentName, config):\n\n          ignoreCustomElementWarning: true\n    `)\n  }\n\n  defaultConfigRegistry[componentName] = config\n}\n\nexport function isRegistered (componentName) {\n  return hasOwnProperty(defaultConfigRegistry, componentName)\n}\n\nexport function unregister (componentName) {\n  delete defaultConfigRegistry[componentName]\n  registry.clearCachedDefinition(componentName)\n}\n\nexport var defaultLoader = {\n  getConfig: function (componentName, callback) {\n    var result = hasOwnProperty(defaultConfigRegistry, componentName)\n            ? defaultConfigRegistry[componentName]\n            : null\n    callback(result)\n  },\n\n  loadComponent: function (componentName, config, callback) {\n    var errorCallback = makeErrorCallback(componentName)\n    possiblyGetConfigFromAmd(errorCallback, config, function (loadedConfig) {\n      resolveConfig(componentName, errorCallback, loadedConfig, callback)\n    })\n  },\n\n  loadTemplate: function (componentName, templateConfig, callback) {\n    resolveTemplate(makeErrorCallback(componentName), templateConfig, callback)\n  },\n\n  loadViewModel: function (componentName, viewModelConfig, callback) {\n    resolveViewModel(makeErrorCallback(componentName), viewModelConfig, callback)\n  }\n}\n\nvar createViewModelKey = 'createViewModel'\n\n// Takes a config object of the form { template: ..., viewModel: ... }, and asynchronously convert it\n// into the standard component definition format:\n//    { template: <ArrayOfDomNodes>, createViewModel: function(params, componentInfo) { ... } }.\n// Since both template and viewModel may need to be resolved asynchronously, both tasks are performed\n// in parallel, and the results joined when both are ready. We don't depend on any promises infrastructure,\n// so this is implemented manually below.\nfunction resolveConfig (componentName, errorCallback, config, callback) {\n  var result = {},\n    makeCallBackWhenZero = 2,\n    tryIssueCallback = function () {\n      if (--makeCallBackWhenZero === 0) {\n        callback(result)\n      }\n    },\n    templateConfig = config['template'],\n    viewModelConfig = config['viewModel']\n\n  if (templateConfig) {\n    possiblyGetConfigFromAmd(errorCallback, templateConfig, function (loadedConfig) {\n      registry._getFirstResultFromLoaders('loadTemplate', [componentName, loadedConfig], function (resolvedTemplate) {\n        result['template'] = resolvedTemplate\n        tryIssueCallback()\n      })\n    })\n  } else {\n    tryIssueCallback()\n  }\n\n  if (viewModelConfig) {\n    possiblyGetConfigFromAmd(errorCallback, viewModelConfig, function (loadedConfig) {\n      registry._getFirstResultFromLoaders('loadViewModel', [componentName, loadedConfig], function (resolvedViewModel) {\n        result[createViewModelKey] = resolvedViewModel\n        tryIssueCallback()\n      })\n    })\n  } else {\n    tryIssueCallback()\n  }\n}\n\nfunction resolveTemplate (errorCallback, templateConfig, callback) {\n  if (typeof templateConfig === 'string') {\n        // Markup - parse it\n    callback(parseHtmlFragment(templateConfig))\n  } else if (templateConfig instanceof Array) {\n        // Assume already an array of DOM nodes - pass through unchanged\n    callback(templateConfig)\n  } else if (isDocumentFragment(templateConfig)) {\n        // Document fragment - use its child nodes\n    callback(makeArray(templateConfig.childNodes))\n  } else if (templateConfig.element) {\n    var element = templateConfig.element\n    if (isDomElement(element)) {\n            // Element instance - copy its child nodes\n      callback(cloneNodesFromTemplateSourceElement(element))\n    } else if (typeof element === 'string') {\n            // Element ID - find it, then copy its child nodes\n      var elemInstance = document.getElementById(element)\n      if (elemInstance) {\n        callback(cloneNodesFromTemplateSourceElement(elemInstance))\n      } else {\n        errorCallback('Cannot find element with ID ' + element)\n      }\n    } else {\n      errorCallback('Unknown element type: ' + element)\n    }\n  } else if (templateConfig.elementName) {\n    // JSX in the style of babel-plugin-transform-jsx\n    callback(templateConfig)\n  } else {\n    errorCallback('Unknown template value: ' + templateConfig)\n  }\n}\n\nfunction resolveViewModel (errorCallback, viewModelConfig, callback) {\n  if (viewModelConfig[VIEW_MODEL_FACTORY]) {\n    callback((...args) => viewModelConfig[VIEW_MODEL_FACTORY](...args))\n  } else if (typeof viewModelConfig === 'function') {\n        // Constructor - convert to standard factory function format\n        // By design, this does *not* supply componentInfo to the constructor, as the intent is that\n        // componentInfo contains non-viewmodel data (e.g., the component's element) that should only\n        // be used in factory functions, not viewmodel constructors.\n    callback(function (params /*, componentInfo */) {\n      return new viewModelConfig(params)\n    })\n  } else if (typeof viewModelConfig[createViewModelKey] === 'function') {\n        // Already a factory function - use it as-is\n    callback(viewModelConfig[createViewModelKey])\n  } else if ('instance' in viewModelConfig) {\n        // Fixed object instance - promote to createViewModel format for API consistency\n    var fixedInstance = viewModelConfig['instance']\n    callback(function (/* params, componentInfo */) {\n      return fixedInstance\n    })\n  } else if ('viewModel' in viewModelConfig) {\n        // Resolved AMD module whose value is of the form { viewModel: ... }\n    resolveViewModel(errorCallback, viewModelConfig['viewModel'], callback)\n  } else {\n    errorCallback('Unknown viewModel value: ' + viewModelConfig)\n  }\n}\n\nfunction cloneNodesFromTemplateSourceElement (elemInstance) {\n  switch (tagNameLower(elemInstance)) {\n    case 'script':\n      return parseHtmlFragment(elemInstance.text)\n    case 'textarea':\n      return parseHtmlFragment(elemInstance.value)\n    case 'template':\n        // For browsers with proper <template> element support (i.e., where the .content property\n        // gives a document fragment), use that document fragment.\n      if (isDocumentFragment(elemInstance.content)) {\n        return cloneNodes(elemInstance.content.childNodes)\n      }\n  }\n\n    // Regular elements such as <div>, and <template> elements on old browsers that don't really\n    // understand <template> and just treat it as a regular container\n  return cloneNodes(elemInstance.childNodes)\n}\n\nfunction possiblyGetConfigFromAmd (errorCallback, config, callback) {\n  if (typeof config.require === 'string') {\n        // The config is the value of an AMD module\n    if (window.amdRequire || window.require) {\n      (window.amdRequire || window.require)([config.require], callback)\n    } else {\n      errorCallback('Uses require, but no AMD loader is present')\n    }\n  } else {\n    callback(config)\n  }\n}\n\nfunction makeErrorCallback (componentName) {\n  return function (message) {\n    throw new Error('Component \\'' + componentName + '\\': ' + message)\n  }\n}\n\n// By default, the default loader is the only registered component loader\nregistry.loaders.push(defaultLoader)\n","\nimport {\n  Parser\n} from 'tko.utils.parser'\n\nconst INNER_EXPRESSION = /^([\\s\\S]*)}}([\\s\\S]*?)\\{\\{([\\s\\S]*)$/\nconst OUTER_EXPRESSION = /^([\\s\\S]*?)\\{\\{([\\s\\S]*)}}([\\s\\S]*)$/\nconst BINDING_EXPRESSION = /^([^,\"'{}()/:[\\]\\s]+)\\s+([^\\s:].*)/\n\nclass Interpolated {\n  constructor (text) {\n    this.text = text\n  }\n\n  trim (string) {\n    return string === null ? '' : string.trim()\n  }\n}\n\nclass Expression extends Interpolated {\n  asAttr (context, globals, node) {\n    return new Parser().parseExpression(this.text, context, globals, node)()\n  }\n\n  * textNodeReplacement (textNode) {\n    const text = this.trim(this.text)\n    const ownerDocument = textNode ? textNode.ownerDocument : document\n    const firstChar = text[0]\n    const lastChar = text[text.length - 1]\n    var closeComment = true\n    var binding\n\n    if (firstChar === '#') {\n      if (lastChar === '/') {\n        binding = text.slice(1, -1)\n      } else {\n        binding = text.slice(1)\n        closeComment = false\n      }\n      const matches = binding.match(BINDING_EXPRESSION)\n      if (matches) {\n        binding = matches[1] + ':' + matches[2]\n      }\n    } else if (firstChar === '/') {\n      // replace only with a closing comment\n    } else if (firstChar === '{' && lastChar === '}') {\n      binding = 'html:' + this.trim(text.slice(1, -1))\n    } else {\n      binding = 'text:' + this.trim(text)\n    }\n\n    if (binding) {\n      yield ownerDocument.createComment('ko ' + binding)\n    }\n    if (closeComment) {\n      yield ownerDocument.createComment('/ko')\n    }\n  }\n}\n\nclass Text extends Interpolated {\n  asAttr () { return this.text }\n\n  * textNodeReplacement () {\n    yield document.createTextNode(this.text.replace(/\"/g, '\\\\\"'))\n  }\n}\n\n/**\n *          Interpolation Parsing\n */\nexport function * innerParse (text) {\n  const innerMatch = text.match(INNER_EXPRESSION)\n  if (innerMatch) {\n    const [pre, inner, post] = innerMatch.slice(1)\n    yield * innerParse(pre)\n    yield new Text(inner)\n    yield new Expression(post)\n  } else {\n    yield new Expression(text)\n  }\n}\n\nexport function * parseOuterMatch (outerMatch) {\n  if (!outerMatch) { return }\n  let [pre, inner, post] = outerMatch.slice(1)\n  yield new Text(pre)\n  yield * innerParse(inner)\n  yield new Text(post)\n}\n\nexport function * parseInterpolation (text) {\n  for (const textOrExpr of parseOuterMatch(text.match(OUTER_EXPRESSION))) {\n    if (textOrExpr.text) { yield textOrExpr }\n  }\n}\n","\nimport {\n    objectForEach, registerEventHandler, makeArray,\n    throttle as throttleFn, debounce as debounceFn\n} from 'tko.utils'\n\n// For certain common events (currently just 'click'), allow a simplified data-binding syntax\n// e.g. click:handler instead of the usual full-length event:{click:handler}\nexport function makeEventHandlerShortcut (eventName) {\n  return {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n      var newValueAccessor = function () {\n        var result = {}\n        result[eventName] = valueAccessor()\n        return result\n      }\n      eventHandler.init.call(this, element, newValueAccessor, allBindings, viewModel, bindingContext)\n    }\n  }\n}\n\nfunction makeDescriptor (handlerOrObject) {\n  return typeof handlerOrObject === 'function' ? { handler: handlerOrObject } : handlerOrObject || {}\n}\n\nexport const eventHandler = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var eventsToHandle = valueAccessor() || {}\n    objectForEach(eventsToHandle, function (eventName, descriptor) {\n      const {passive, capture, once, debounce, throttle} = makeDescriptor(descriptor)\n      const eventOptions = (capture || passive || once) && {capture, passive, once}\n\n      let eventHandlerFn = (event, ...more) => {\n        var handlerReturnValue\n        const {handler, passive, bubble} = makeDescriptor(valueAccessor()[eventName])\n\n        try {\n          // Take all the event args, and prefix with the viewmodel\n          if (handler) {\n            const possiblyUpdatedViewModel = bindingContext.$data\n            const argsForHandler = [possiblyUpdatedViewModel, event, ...more]\n            handlerReturnValue = handler.apply(possiblyUpdatedViewModel, argsForHandler)\n          }\n        } finally {\n          if (handlerReturnValue !== true) {\n            // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n            // preventDefault will throw an error if the event is passive.\n            if (event.preventDefault) {\n              if (!passive) { event.preventDefault() }\n            } else {\n              event.returnValue = false\n            }\n          }\n        }\n\n        const bubbleMark = allBindings.get(eventName + 'Bubble') !== false\n        if (bubble === false || !bubbleMark) {\n          event.cancelBubble = true\n          if (event.stopPropagation) { event.stopPropagation() }\n        }\n      }\n\n      if (debounce) { eventHandlerFn = debounceFn(eventHandlerFn, debounce) }\n      if (throttle) { eventHandlerFn = throttleFn(eventHandlerFn, throttle) }\n\n      registerEventHandler(element, eventName, eventHandlerFn, eventOptions || false)\n    })\n  }\n}\n\nexport const onHandler = {\n  init: eventHandler.init,\n  preprocess: function (value, key, addBinding) {\n    addBinding(key.replace('on.', ''), '=>' + value)\n  }\n}\n","// index.js\n// --------\n// Fast For Each\n//\n// Employing sound techniques to make a faster Knockout foreach binding.\n// --------\n\nimport {\n  arrayForEach, cleanNode, options, virtualElements,\n  createSymbolOrString, domData, domNodeIsContainedBy\n} from 'tko.utils'\n\nimport {\n  isObservable, unwrap, observable\n} from 'tko.observable'\n\nimport {\n  contextFor, applyBindingsToDescendants, AsyncBindingHandler\n} from 'tko.bind'\n\n//      Utilities\nconst MAX_LIST_SIZE = 9007199254740991\n\n// from https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject (o) {\n  return !!o && typeof o === 'object' && o.constructor === Object\n}\n\nconst supportsDocumentFragment = options.document && typeof options.document.createDocumentFragment === 'function'\n\n// Get a copy of the (possibly virtual) child nodes of the given element,\n// put them into a container, then empty the given node.\nfunction makeTemplateNode (sourceNode) {\n  var container = document.createElement('div')\n  var parentNode\n  if (sourceNode.content) {\n    // For e.g. <template> tags\n    parentNode = sourceNode.content\n  } else if (sourceNode.tagName === 'SCRIPT') {\n    parentNode = document.createElement('div')\n    parentNode.innerHTML = sourceNode.text\n  } else {\n    // Anything else e.g. <div>\n    parentNode = sourceNode\n  }\n  arrayForEach(virtualElements.childNodes(parentNode), function (child) {\n    // FIXME - This cloneNode could be expensive; we may prefer to iterate over the\n    // parentNode children in reverse (so as not to foul the indexes as childNodes are\n    // removed from parentNode when inserted into the container)\n    if (child) {\n      container.insertBefore(child.cloneNode(true), null)\n    }\n  })\n  return container\n}\n\n// Mimic a KO change item 'add'\nfunction valueToChangeAddItem (value, index) {\n  return {\n    status: 'added',\n    value: value,\n    index: index\n  }\n}\n\n// store a symbol for caching the pending delete info index in the data item objects\nconst PENDING_DELETE_INDEX_SYM = createSymbolOrString('_ko_ffe_pending_delete_index')\n\n\nexport class ForEachBinding extends AsyncBindingHandler {\n  // NOTE: valid valueAccessors include:\n  //    []\n  //    observable([])\n  //    observableArray([])\n  //    computed\n  //    {data: array, name: string, as: string}\n\n  constructor (params) {\n    super(params)\n    const settings = {}\n    if (isPlainObject(this.value)) {\n      Object.assign(settings, this.value)\n    }\n\n    this.as = settings.as || this.allBindings.get('as')\n\n    this.data = settings.data || (unwrap(this.$context.$rawData) === this.value ? this.$context.$rawData : this.value)\n\n    this.container = virtualElements.isStartComment(this.$element)\n                     ? this.$element.parentNode : this.$element\n    this.generateContext = this.createContextGenerator(this.as)\n    this.$indexHasBeenRequested = false\n\n    this.templateNode = makeTemplateNode(\n      settings.templateNode || (settings.name\n        ? document.getElementById(settings.name).cloneNode(true)\n        : this.$element)\n    )\n\n    ;['afterAdd', 'beforeRemove', 'afterQueueFlush', 'beforeQueueFlush']\n      .forEach(p => { this[p] = settings[p] || this.allBindings.get(p) })\n\n    this.changeQueue = []\n    this.firstLastNodesList = []\n    this.indexesToDelete = []\n    this.rendering_queued = false\n    this.pendingDeletes = []\n\n    // Expose the conditional so that if the `foreach` data is empty, successive\n    // 'else' bindings will appear.\n    this.isNotEmpty = observable(Boolean(unwrap(this.data).length))\n    domData.set(this.$element, 'conditional', {\n      elseChainSatisfied: this.isNotEmpty\n    })\n\n    // Remove existing content.\n    virtualElements.emptyNode(this.$element)\n\n    // Prime content\n    const primeData = unwrap(this.data)\n    if (primeData.map) {\n      this.onArrayChange(primeData.map(valueToChangeAddItem), true)\n    } else {\n      this.completeBinding()\n    }\n\n    // Watch for changes\n    if (isObservable(this.data)) {\n      if (!this.data.indexOf) {\n        // Make sure the observable is trackable.\n        this.data = this.data.extend({ trackArrayChanges: true })\n      }\n      this.changeSubs = this.data.subscribe(this.onArrayChange, this, 'arrayChange')\n    }\n  }\n\n  dispose () {\n    if (this.changeSubs) {\n      this.changeSubs.dispose()\n    }\n    this.flushPendingDeletes()\n  }\n\n  // If the array changes we register the change.\n  onArrayChange (changeSet, isInitial) {\n    var changeMap = {\n      added: [],\n      deleted: []\n    }\n\n    // knockout array change notification index handling:\n    // - sends the original array indexes for deletes\n    // - sends the new array indexes for adds\n    // - sorts them all by index in ascending order\n    // because of this, when checking for possible batch additions, any delete can be between to adds with neighboring indexes, so only additions should be checked\n    for (var i = 0, len = changeSet.length; i < len; i++) {\n      if (changeMap.added.length && changeSet[i].status === 'added') {\n        var lastAdd = changeMap.added[changeMap.added.length - 1]\n        var lastIndex = lastAdd.isBatch ? lastAdd.index + lastAdd.values.length - 1 : lastAdd.index\n        if (lastIndex + 1 === changeSet[i].index) {\n          if (!lastAdd.isBatch) {\n            // transform the last addition into a batch addition object\n            lastAdd = {\n              isBatch: true,\n              status: 'added',\n              index: lastAdd.index,\n              values: [lastAdd.value]\n            }\n            changeMap.added.splice(changeMap.added.length - 1, 1, lastAdd)\n          }\n          lastAdd.values.push(changeSet[i].value)\n          continue\n        }\n      }\n\n      changeMap[changeSet[i].status].push(changeSet[i])\n    }\n\n    if (changeMap.deleted.length > 0) {\n      this.changeQueue.push.apply(this.changeQueue, changeMap.deleted)\n      this.changeQueue.push({ status: 'clearDeletedIndexes' })\n    }\n\n    this.changeQueue.push.apply(this.changeQueue, changeMap.added)\n    // Once a change is registered, the ticking count-down starts for the processQueue.\n    if (this.changeQueue.length > 0 && !this.rendering_queued) {\n      this.rendering_queued = true\n      if (isInitial) {\n        this.processQueue()\n      } else {\n        ForEachBinding.animateFrame.call(window, () => this.processQueue())\n      }\n    }\n  }\n\n  startQueueFlush () {\n    // Callback so folks can do things before the queue flush.\n    if (typeof this.beforeQueueFlush === 'function') {\n      this.beforeQueueFlush(this.changeQueue)\n    }\n  }\n\n  endQueueFlush () {\n    // Callback so folks can do things.\n    if (typeof this.afterQueueFlush === 'function') {\n      this.afterQueueFlush(this.changeQueue)\n    }\n  }\n\n  // Reflect all the changes in the queue in the DOM, then wipe the queue.\n  processQueue () {\n    var isEmpty = !unwrap(this.data).length\n    var lowestIndexChanged = MAX_LIST_SIZE\n\n    this.startQueueFlush()\n\n    arrayForEach(this.changeQueue, (changeItem) => {\n      if (typeof changeItem.index === 'number') {\n        lowestIndexChanged = Math.min(lowestIndexChanged, changeItem.index)\n      }\n      this[changeItem.status](changeItem)\n    })\n    this.flushPendingDeletes()\n    this.rendering_queued = false\n\n    // Update our indexes.\n    if (this.$indexHasBeenRequested) {\n      this.updateIndexes(lowestIndexChanged)\n    }\n\n    this.endQueueFlush()\n    this.changeQueue = []\n\n    // Update the conditional exposed on the domData\n    if (isEmpty !== !this.isNotEmpty()) {\n      this.isNotEmpty(!isEmpty)\n    }\n  }\n\n  /**\n   * Once the $index has been asked for once, start calculating it.\n   * Note that this significantly degrades performance, from O(1) to O(n)\n   * for arbitrary changes to the list.\n   */\n  _first$indexRequest (ctx$indexRequestedFrom) {\n    this.$indexHasBeenRequested = true\n    for (let i = 0, len = this.firstLastNodesList.length; i < len; ++i) {\n      const ctx = this.getContextStartingFrom(this.firstLastNodesList[i].first)\n      // Overwrite the defineProperty.\n      if (ctx) { ctx.$index = observable(i) }\n    }\n    return ctx$indexRequestedFrom.$index()\n  }\n\n  _contextExtensions ($ctx) {\n    Object.assign($ctx, { $list: this.data })\n    if (this.$indexHasBeenRequested) {\n      $ctx.$index = $ctx.$index || observable()\n    } else {\n      Object.defineProperty($ctx, '$index', {\n        value: () => this._first$indexRequest($ctx),\n        configurable: true,\n        writable: true\n      })\n    }\n    return $ctx\n  }\n\n  /**\n   * Return a function that generates the context for a given node.\n   *\n   * We generate a single function that reduces our inner-loop calculations,\n   * which has a good chance of being optimized by the browser.\n   *\n   * @param  {string} as  The name given to each item in the list\n   * @param  {bool} index Whether to calculate indexes\n   * @return {function}   A function(dataValue) that returns the context\n   */\n  createContextGenerator (as) {\n    const $ctx = this.$context\n    if (as) {\n      return v => this._contextExtensions($ctx.extend({ [as]: v }))\n    } else {\n      return v => $ctx.createChildContext(v, null, ctx => this._contextExtensions(ctx))\n    }\n  }\n\n  updateFirstLastNodesList (index, children) {\n    const first = children[0]\n    const last = children[children.length - 1]\n    this.firstLastNodesList.splice(index, 0, { first, last })\n  }\n\n  // Process a changeItem with {status: 'added', ...}\n  added (changeItem) {\n    var index = changeItem.index\n    var valuesToAdd = changeItem.isBatch ? changeItem.values : [changeItem.value]\n    var referenceElement = this.getLastNodeBeforeIndex(index)\n    // gather all childnodes for a possible batch insertion\n    const allChildNodes = []\n    const asyncBindingResults = []\n    var children\n\n    for (var i = 0, len = valuesToAdd.length; i < len; ++i) {\n      // we check if we have a pending delete with reusable nodesets for this data, and if yes, we reuse one nodeset\n      var pendingDelete = this.getPendingDeleteFor(valuesToAdd[i])\n      if (pendingDelete && pendingDelete.nodesets.length) {\n        children = pendingDelete.nodesets.pop()\n        this.updateFirstLastNodesList(index + i, children)\n      } else {\n        var templateClone = this.templateNode.cloneNode(true)\n        children = virtualElements.childNodes(templateClone)\n        this.updateFirstLastNodesList(index + i, children)\n\n        // Apply bindings first, and then process child nodes,\n        // because bindings can add childnodes.\n        const bindingResult = applyBindingsToDescendants(\n          this.generateContext(valuesToAdd[i]), templateClone\n        )\n        asyncBindingResults.push(bindingResult)\n      }\n\n      allChildNodes.push(...children)\n    }\n\n    if (typeof this.afterAdd === 'function') {\n      this.afterAdd({\n        nodeOrArrayInserted: this.insertAllAfter(allChildNodes, referenceElement),\n        foreachInstance: this\n      })\n    } else {\n      this.insertAllAfter(allChildNodes, referenceElement)\n    }\n\n    this.completeBinding(Promise.all(asyncBindingResults))\n  }\n\n  getNodesForIndex (index) {\n    let result = []\n    let ptr = this.firstLastNodesList[index].first\n    let last = this.firstLastNodesList[index].last\n    result.push(ptr)\n    while (ptr && ptr !== last) {\n      ptr = ptr.nextSibling\n      result.push(ptr)\n    }\n    return result\n  }\n\n  getLastNodeBeforeIndex (index) {\n    if (index < 1 || index - 1 >= this.firstLastNodesList.length) { return null }\n    return this.firstLastNodesList[index - 1].last\n  }\n\n  /**\n   * Get the active (focused) node, if it's a child of the given node.\n   */\n  activeChildElement (node) {\n    var active = document.activeElement\n    if (domNodeIsContainedBy(active, node)) {\n      return active\n    }\n  }\n\n  insertAllAfter (nodeOrNodeArrayToInsert, insertAfterNode) {\n    let frag\n    let len\n    let i\n    let active = null\n    let containerNode = this.$element\n\n    // Poor man's node and array check.\n    if (nodeOrNodeArrayToInsert.nodeType === undefined && nodeOrNodeArrayToInsert.length === undefined) {\n      throw new Error('Expected a single node or a node array')\n    }\n    if (nodeOrNodeArrayToInsert.nodeType !== undefined) {\n      active = this.activeChildElement(nodeOrNodeArrayToInsert)\n      virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert, insertAfterNode)\n      return [nodeOrNodeArrayToInsert]\n    } else if (nodeOrNodeArrayToInsert.length === 1) {\n      active = this.activeChildElement(nodeOrNodeArrayToInsert[0])\n      virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert[0], insertAfterNode)\n    } else if (supportsDocumentFragment) {\n      frag = document.createDocumentFragment()\n      for (i = 0, len = nodeOrNodeArrayToInsert.length; i !== len; ++i) {\n        active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i])\n        frag.appendChild(nodeOrNodeArrayToInsert[i])\n      }\n      virtualElements.insertAfter(containerNode, frag, insertAfterNode)\n    } else {\n      // Nodes are inserted in reverse order - pushed down immediately after\n      // the last node for the previous item or as the first node of element.\n      for (i = nodeOrNodeArrayToInsert.length - 1; i >= 0; --i) {\n        active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i])\n        var child = nodeOrNodeArrayToInsert[i]\n        if (!child) { break }\n        virtualElements.insertAfter(containerNode, child, insertAfterNode)\n      }\n    }\n\n    if (active) { active.focus() }\n\n    return nodeOrNodeArrayToInsert\n  }\n\n  // checks if the deleted data item should be handled with delay for a possible reuse at additions\n  shouldDelayDeletion (data) {\n    return data && (typeof data === 'object' || typeof data === 'function')\n  }\n\n  // gets the pending deletion info for this data item\n  getPendingDeleteFor (data) {\n    var index = data && data[PENDING_DELETE_INDEX_SYM]\n    if (index === undefined) return null\n    return this.pendingDeletes[index]\n  }\n\n  // tries to find the existing pending delete info for this data item, and if it can't, it registeres one\n  getOrCreatePendingDeleteFor (data) {\n    var pd = this.getPendingDeleteFor(data)\n    if (pd) {\n      return pd\n    }\n    pd = {\n      data: data,\n      nodesets: []\n    }\n    data[PENDING_DELETE_INDEX_SYM] = this.pendingDeletes.length\n    this.pendingDeletes.push(pd)\n    return pd\n  }\n\n  // Process a changeItem with {status: 'deleted', ...}\n  deleted (changeItem) {\n    // if we should delay the deletion of this data, we add the nodeset to the pending delete info object\n    if (this.shouldDelayDeletion(changeItem.value)) {\n      let pd = this.getOrCreatePendingDeleteFor(changeItem.value)\n      pd.nodesets.push(this.getNodesForIndex(changeItem.index))\n    } else { // simple data, just remove the nodes\n      this.removeNodes(this.getNodesForIndex(changeItem.index))\n    }\n    this.indexesToDelete.push(changeItem.index)\n  }\n\n  // removes a set of nodes from the DOM\n  removeNodes (nodes) {\n    if (!nodes.length) { return }\n\n    function removeFn () {\n      var parent = nodes[0].parentNode\n      for (var i = nodes.length - 1; i >= 0; --i) {\n        cleanNode(nodes[i])\n        parent.removeChild(nodes[i])\n      }\n    }\n\n    if (this.beforeRemove) {\n      var beforeRemoveReturn = this.beforeRemove({\n        nodesToRemove: nodes, foreachInstance: this\n      }) || {}\n      // If beforeRemove returns a `then`able e.g. a Promise, we remove\n      // the nodes when that thenable completes.  We pass any errors to\n      // ko.onError.\n      if (typeof beforeRemoveReturn.then === 'function') {\n        beforeRemoveReturn.then(removeFn, options.onError)\n      }\n    } else {\n      removeFn()\n    }\n  }\n\n  // flushes the pending delete info store\n  // this should be called after queue processing has finished, so that data items and remaining (not reused) nodesets get cleaned up\n  // we also call it on dispose not to leave any mess\n  flushPendingDeletes () {\n    for (let i = 0, len = this.pendingDeletes.length; i !== len; ++i) {\n      var pd = this.pendingDeletes[i]\n      while (pd.nodesets.length) {\n        this.removeNodes(pd.nodesets.pop())\n      }\n      if (pd.data && pd.data[PENDING_DELETE_INDEX_SYM] !== undefined) { delete pd.data[PENDING_DELETE_INDEX_SYM] }\n    }\n    this.pendingDeletes = []\n  }\n\n  // We batch our deletion of item indexes in our parallel array.\n  // See brianmhunt/knockout-fast-foreach#6/#8\n  clearDeletedIndexes () {\n    // We iterate in reverse on the presumption (following the unit tests) that KO's diff engine\n    // processes diffs (esp. deletes) monotonically ascending i.e. from index 0 -> N.\n    for (let i = this.indexesToDelete.length - 1; i >= 0; --i) {\n      this.firstLastNodesList.splice(this.indexesToDelete[i], 1)\n    }\n    this.indexesToDelete = []\n  }\n\n  updateIndexes (fromIndex) {\n    let ctx\n    for (let i = fromIndex, len = this.firstLastNodesList.length; i < len; ++i) {\n      ctx = this.getContextStartingFrom(this.firstLastNodesList[i].first)\n      if (ctx) { ctx.$index(i) }\n    }\n  }\n\n  getContextStartingFrom (node) {\n    let ctx\n    while (node) {\n      ctx = contextFor(node)\n      if (ctx) { return ctx }\n      node = node.nextSibling\n    }\n  }\n\n  /**\n   * Set whether the binding is always synchronous.\n   * Useful during testing.\n   */\n  static setSync (toggle) {\n    const w = options.global\n    if (toggle) {\n      ForEachBinding.animateFrame = function (frame) { frame() }\n    } else {\n      ForEachBinding.animateFrame = w.requestAnimationFrame || w.webkitRequestAnimationFrame ||\n        w.mozRequestAnimationFrame || w.msRequestAnimationFrame ||\n        function (cb) { return w.setTimeout(cb, 1000 / 60) }\n    }\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n\n  /* TODO: Remove; for legacy/testing */\n  static get ForEach () { return this }\n  static get PENDING_DELETE_INDEX_SYM () { return PENDING_DELETE_INDEX_SYM }\n}\n","\nimport {\n  removeNode, addDisposeCallback\n} from 'tko.utils'\n\nimport {\n  isObservable, unwrap\n} from 'tko.observable'\n\nimport {\n  contextFor, applyBindings\n} from 'tko.bind'\n\nimport {\n  NativeProvider\n} from 'tko.provider.native'\n\nconst ORIGINAL_JSX_SYM = Symbol('Knockout - Original JSX')\nconst NAMESPACES = {\n  svg: 'http://www.w3.org/2000/svg',\n  html: 'http://www.w3.org/1999/xhtml'\n}\n\n/**\n *\n * @param {any} possibleJsx Test whether this value is JSX.\n *\n * True for\n *    { elementName }\n *    [{elementName}]\n *    observable({elementName} | [])\n *\n * Any observable will return truthy if its value is an array that doesn't\n * contain HTML elements.  Template nodes should not be observable unless they\n * are JSX.\n *\n * There's a bit of guesswork here that we could nail down with more test cases.\n */\nexport function maybeJsx (possibleJsx) {\n  if (isObservable(possibleJsx)) { return true }\n  const value = unwrap(possibleJsx)\n  if (!value) { return false }\n  if (value.elementName) { return true }\n  if (!Array.isArray(value) || !value.length) { return false }\n  if (value[0] instanceof window.Node) { return false }\n  return true\n}\n\n/**\n * True when Node is a type suitable for applyBindings\n * @param {Node} node\n */\nfunction canApplyBindings (node) {\n  return node.nodeType === 1 || node.nodeType === 8\n}\n\n/**\n * Clone a node from its original JSX if possible, otherwise using DOM cloneNode\n * This preserves any native attributes set by JSX.\n * @param {HTMLElemen} node\n * @return {HTMLElement} clone of node\n */\nexport function cloneNodeFromOriginal (node) {\n  if (!node) { return [] }\n\n  if (node[ORIGINAL_JSX_SYM]) {\n    const possibleTemplate = jsxToNode(node[ORIGINAL_JSX_SYM])\n    return [...possibleTemplate.content\n      ? possibleTemplate.content.childNodes\n      : possibleTemplate.childNodes]\n  }\n\n  if ('content' in node) {\n    const clone = document.importNode(node.content, true)\n    return [...clone.childNodes]\n  }\n\n  const nodeArray = Array.isArray(node) ? node : [node]\n  return nodeArray.map(n => n.cloneNode(true))\n}\n\n/**\n * Use a JSX transpilation of the format created by babel-plugin-transform-jsx\n * @param {Object} jsx An object of the form\n *    { elementName: node-name e.g. \"div\",\n *      attributes: { \"attr\": \"value\", ... },\n *      children: [string | jsx]\n *    }\n */\nexport function jsxToNode (jsx, xmlns) {\n  const subscriptions = []\n  let node\n  if (isObservable(jsx)) {\n    subscriptions.push(jsx.subscribe(v => {\n      const parentNode = node.parentNode\n      if (parentNode) {\n        const newNode = jsxToNode(v, xmlns)\n        parentNode.replaceChild(newNode, node)\n        node = newNode\n      }\n    }))\n    node = jsxToNode(jsx(), xmlns)\n  } else if (typeof jsx === 'string') {\n    return document.createTextNode(jsx)\n  } else if (!jsx) {\n    return document.createComment('[JSX J]')\n  } else {\n    xmlns = jsx.attributes.xmlns || NAMESPACES[jsx.elementName] || xmlns\n    node = document.createElementNS(xmlns || NAMESPACES.html, jsx.elementName)\n  \n    /** Slots need to be able to replicate with the attributes, which\n     *  are not preserved when cloning from template nodes. */\n    node[ORIGINAL_JSX_SYM] = jsx\n  \n    updateAttributes(node, unwrap(jsx.attributes), subscriptions, xmlns)\n    if (isObservable(jsx.attributes)) {\n      subscriptions.push(jsx.attributes.subscribe(attrs => {\n        updateAttributes(node, unwrap(attrs), subscriptions, xmlns)\n      }))\n    }\n  \n    updateChildren(node, unwrap(jsx.children), subscriptions, xmlns)\n    if (isObservable(jsx.children)) {\n      subscriptions.push(jsx.children.subscribe(children => {\n        updateChildren(node, children, subscriptions, xmlns)\n      }))\n    }\n  }\n\n  if (subscriptions.length) {\n    addDisposeCallback(node, () => subscriptions.map(s => s.dispose()))\n  }\n\n  return node\n}\n\n\nfunction getInsertTarget (possibleTemplateElement) {\n  return 'content' in possibleTemplateElement\n    ? possibleTemplateElement.content : possibleTemplateElement\n}\n\n/**\n *\n * @param {HTMLElement|HTMLTemplateElement} possibleTemplateElement\n * @param {Node} toAppend\n */\nfunction appendChildOrChildren (possibleTemplateElement, toAppend) {\n  if (Array.isArray(toAppend)) {\n    for (const node of toAppend) {\n      appendChildOrChildren(possibleTemplateElement, node)\n    }\n  } else {\n    getInsertTarget(possibleTemplateElement).appendChild(toAppend)\n  }\n}\n\n/**\n *\n * @param {HTMLElement|HTMLTemplateElement} possibleTemplateElement\n * @param {Node} toAppend\n * @param {Node} beforeNode\n */\nfunction insertChildOrChildren (possibleTemplateElement, toAppend, beforeNode) {\n  if (!beforeNode.parentNode) { return }\n\n  if (Array.isArray(toAppend)) {\n    for (const node of toAppend) {\n      insertChildOrChildren(possibleTemplateElement, node, beforeNode)\n    }\n  } else {\n    getInsertTarget(possibleTemplateElement).insertBefore(toAppend, beforeNode)\n  }\n}\n\n/**\n *\n * @param {HTMLElement} node\n * @param {Array} children\n * @param {Array} subscriptions\n */\nfunction updateChildren (node, children, subscriptions, xmlns) {\n  let lastChild = node.lastChild\n  while (lastChild) {\n    removeNode(lastChild)\n    lastChild = node.lastChild\n  }\n\n  for (const child of children || []) {\n    if (isObservable(child)) {\n      subscriptions.push(monitorObservableChild(node, child, xmlns))\n    } else {\n      appendChildOrChildren(node, convertJsxChildToDom(child, xmlns))\n    }\n  }\n}\n\n/**\n *\n * @param {HTMLElement} node\n * @param {string} name\n * @param {any} valueOrObservable\n */\nfunction setNodeAttribute (node, name, valueOrObservable) {\n  const value = unwrap(valueOrObservable)\n  NativeProvider.addValueToNode(node, name, valueOrObservable)\n  if (typeof value === 'string') {\n    node.setAttributeNS(null, name, value)\n  } else if (value === undefined) {\n    node.removeAttributeNS(null, name)\n  }\n}\n\n/**\n *\n * @param {HTMLElement} node\n * @param {Object} attributes\n * @param {Array} subscriptions\n */\nfunction updateAttributes (node, attributes, subscriptions) {\n  while (node.attributes.length) {\n    node.removeAttributeNS(null, node.attributes[0].name)\n  }\n\n  for (const [name, value] of Object.entries(attributes || {})) {\n    if (isObservable(value)) {\n      subscriptions.push(\n        value.subscribe(attr => setNodeAttribute(node, name, value))\n      )\n    }\n    setNodeAttribute(node, name, value)\n  }\n}\n\n/**\n *\n * @param {jsx} newJsx\n * @param {HTMLElement|Array} toReplace\n * @return {HTMLElement|Array} Nodes to replace next time\n *\n * TODO: Use trackArrayChanges to minimize changes to the DOM and state-loss.\n */\nfunction replaceNodeOrNodes (newJsx, toReplace, placeholder, xmlns) {\n  const newNodeOrNodes = convertJsxChildToDom(newJsx, xmlns)\n  const {parentNode} = placeholder\n  const $context = contextFor(parentNode)\n\n  insertChildOrChildren(parentNode, newNodeOrNodes, placeholder)\n\n  if (Array.isArray(toReplace)) {\n    for (const node of toReplace) { removeNode(node) }\n  } else {\n    removeNode(toReplace)\n  }\n\n  if ($context) {\n    if (Array.isArray(newNodeOrNodes)) {\n      for (const node of newNodeOrNodes.filter(canApplyBindings)) {\n        applyBindings($context, node)\n      }\n    } else if (canApplyBindings(newNodeOrNodes)) {\n      applyBindings($context, newNodeOrNodes)\n    }\n  }\n  return newNodeOrNodes\n}\n\n/**\n *\n * @param {HTMLElement} node\n * @param {jsx|Array} child\n */\nfunction monitorObservableChild (node, child, xmlns) {\n  const jsx = unwrap(child)\n  let toReplace = convertJsxChildToDom(jsx, xmlns)\n  const placeholder = document.createComment('[JSX P]')\n  appendChildOrChildren(node, toReplace)\n  getInsertTarget(node).appendChild(placeholder)\n\n  const subscription = child.subscribe(newJsx => {\n    toReplace = replaceNodeOrNodes(newJsx, toReplace, placeholder, xmlns)\n  })\n\n  return subscription\n}\n\n/**\n * Convert a child to the anticipated HTMLElement(s).\n * @param {string|array|jsx} child\n * @return {Array|Comment|HTMLElement}\n */\nfunction convertJsxChildToDom (child, xmlns) {\n  return Array.isArray(child)\n    ? child.map(node => convertJsxChildToDom(node, xmlns))\n    : child ? jsxToNode(child, xmlns)\n      : document.createComment('[JSX C]')\n}\n","//\n// This becomes ko.options\n// --\n//\n// This is the root 'options', which must be extended by others.\n\nvar _global\n\ntry { _global = window } catch (e) { _global = global }\n\nvar options = {\n  deferUpdates: false,\n\n  useOnlyNativeEvents: false,\n\n  protoProperty: '__ko_proto__',\n\n    // Modify the default attribute from `data-bind`.\n  defaultBindingAttribute: 'data-bind',\n\n    // Enable/disable <!-- ko binding: ... -> style bindings\n  allowVirtualElements: true,\n\n    // Global variables that can be accessed from bindings.\n  bindingGlobals: _global,\n\n    // An instance of the binding provider.\n  bindingProviderInstance: null,\n\n  // Whether the `with` binding creates a child context when used with `as`.\n  createChildContextWithAs: false,\n\n    // jQuery will be automatically set to _global.jQuery in applyBindings\n    // if it is (strictly equal to) undefined.  Set it to false or null to\n    // disable automatically setting jQuery.\n  jQuery: _global && _global.jQuery,\n\n  Promise: _global && _global.Promise,\n\n  taskScheduler: null,\n\n  debug: false,\n\n  global: _global,\n  document: _global.document,\n\n    // Filters for bindings\n    //   data-bind=\"expression | filter_1 | filter_2\"\n  filters: {},\n\n  // Used by the template binding.\n  includeDestroyed: false,\n  foreachHidesDestroyed: false,\n\n  onError: function (e) { throw e },\n\n  set: function (name, value) {\n    options[name] = value\n  },\n\n  // Overload getBindingHandler to have a custom lookup function.\n  getBindingHandler (/* key */) {},\n  cleanExternalData (/* node, callback */) {}\n}\n\nObject.defineProperty(options, '$', {\n  get: function () { return options.jQuery }\n})\n\nexport default options\n","//\n// Detection and Workarounds for Internet Explorer\n//\nimport options from './options'\n\nconst ieVersion = options.document && (function () {\n  var version = 3, div = options.document.createElement('div'), iElems = div.getElementsByTagName('i')\n\n    // Keep constructing conditional HTML blocks until we hit one that resolves to an empty fragment\n  while (\n        div.innerHTML = '<!--[if gt IE ' + (++version) + ']><i></i><![endif]-->',\n        iElems[0]\n    ) {}\n\n  if (!version) {\n    const userAgent = window.navigator.userAgent\n    // Detect IE 10/11\n    return ua.match(/MSIE ([^ ]+)/) || ua.match(/rv:([^ )]+)/)\n  }\n  return version > 4 ? version : undefined\n}())\n\nconst isIe6 = ieVersion === 6\nconst isIe7 = ieVersion === 7\n\nexport { ieVersion, isIe6, isIe7 }\n","//\n// jQuery\n//\n// TODO: deprecate in favour of options.$\n\nimport options from './options'\n\nexport var jQueryInstance = options.global && options.global.jQuery\n\nexport function jQuerySetInstance (jquery) {\n  options.jQuery = jQueryInstance = jquery\n}\n","\nimport { ieVersion } from '../ie'\nimport { safeSetTimeout } from '../error'\n\nimport { tagNameLower } from './info'\nimport * as domData from './data'\n\nvar hasDomDataExpandoProperty = Symbol('Knockout selectExtensions hasDomDataProperty')\n\n// Normally, SELECT elements and their OPTIONs can only take value of type 'string' (because the values\n// are stored on DOM attributes). ko.selectExtensions provides a way for SELECTs/OPTIONs to have values\n// that are arbitrary objects. This is very convenient when implementing things like cascading dropdowns.\n//\nexport var selectExtensions = {\n  optionValueDomDataKey: domData.nextKey(),\n\n  readValue: function (element) {\n    switch (tagNameLower(element)) {\n      case 'option':\n        if (element[hasDomDataExpandoProperty] === true) { return domData.get(element, selectExtensions.optionValueDomDataKey) }\n        return element.value\n      case 'select':\n        return element.selectedIndex >= 0 ? selectExtensions.readValue(element.options[element.selectedIndex]) : undefined\n      default:\n        return element.value\n    }\n  },\n\n  writeValue: function (element, value, allowUnset) {\n    switch (tagNameLower(element)) {\n      case 'option':\n        if (typeof value === 'string') {\n          domData.set(element, selectExtensions.optionValueDomDataKey, undefined)\n          if (hasDomDataExpandoProperty in element) { // IE <= 8 throws errors if you delete non-existent properties from a DOM node\n            delete element[hasDomDataExpandoProperty]\n          }\n          element.value = value\n        } else {\n                        // Store arbitrary object using DomData\n          domData.set(element, selectExtensions.optionValueDomDataKey, value)\n          element[hasDomDataExpandoProperty] = true\n                        // Special treatment of numbers is just for backward compatibility. KO 1.2.1 wrote numerical values to element.value.\n          element.value = typeof value === 'number' ? value : ''\n        }\n\n        break\n      case 'select':\n        if (value === '' || value === null) {\n          // A blank string or null value will select the caption\n          value = undefined\n        }\n        var selection = -1\n        for (let i = 0, n = element.options.length, optionValue; i < n; ++i) {\n          optionValue = selectExtensions.readValue(element.options[i])\n          // Include special check to handle selecting a caption with a blank string value\n          if (optionValue === value || (optionValue === '' && value === undefined)) {\n            selection = i\n            break\n          }\n        }\n        if (allowUnset || selection >= 0 || (value === undefined && element.size > 1)) {\n          element.selectedIndex = selection\n          if (ieVersion === 6) {\n            // Workaround for IE6 bug: It won't reliably apply values to SELECT nodes during the same execution thread\n            // right after you've changed the set of OPTION nodes on it. So for that node type, we'll schedule a second thread\n            // to apply the value as well.\n            safeSetTimeout(() => { element.selectedIndex = selection }, 0)\n          }\n        }\n        break\n      default:\n        if ((value === null) || (value === undefined)) { value = '' }\n        element.value = value\n        break\n    }\n  }\n}\n","\nimport {\n  removeDisposeCallback, addDisposeCallback\n} from 'tko.utils'\n\n\nexport default class Subscription {\n  constructor (target, observer, disposeCallback) {\n    this._target = target\n    this._callback = observer.next\n    this._disposeCallback = disposeCallback\n    this._isDisposed = false\n    this._domNodeDisposalCallback = null\n  }\n\n  dispose () {\n    if (this._domNodeDisposalCallback) {\n      removeDisposeCallback(this._node, this._domNodeDisposalCallback)\n    }\n    this._isDisposed = true\n    this._disposeCallback()\n  }\n\n  disposeWhenNodeIsRemoved (node) {\n    this._node = node\n    addDisposeCallback(node, this._domNodeDisposalCallback = this.dispose.bind(this))\n  }\n\n  // TC39 Observable API\n  unsubscribe () { this.dispose() }\n  get closed () { return this._isDisposed }\n}\n","\nimport {\n  unwrap\n} from 'tko.observable'\n\nimport {\n  default as operators,\n  LAMBDA\n} from './operators'\n\nconst IS_EXPR_OR_IDENT = Symbol('Node - Is Expression Or Identifier')\n\nexport default class Node {\n  constructor (lhs, op, rhs) {\n    this.lhs = lhs\n    this.op = op\n    this.rhs = rhs\n  }\n\n  static get operators () { return operators }\n\n  get_leaf_value (leaf, context, globals, node) {\n    if (typeof leaf === 'function') {\n      // Expressions on observables are nonsensical, so we unwrap any\n      // function values (e.g. identifiers).\n      return unwrap(leaf())\n    }\n\n    // primitives\n    if (typeof leaf !== 'object' || leaf === null) { return leaf }\n\n    // Identifiers and Expressions\n    if (leaf[Node.isExpressionOrIdentifierSymbol]) {\n      // lhs is passed in as the parent of the leaf. It will be defined in\n      // cases like a.b.c as 'a' for 'b' then as 'b' for 'c'.\n      return unwrap(leaf.get_value(undefined, context, globals, node))\n    }\n\n    // Plain object/class.\n    return leaf\n  }\n\n  /**\n   * Return a function that calculates and returns an expression's value\n   * when called.\n   * @param  {array} ops  The operations to perform\n   * @return {function}   The function that calculates the expression.\n   *\n   * Note that for a lambda, we do not evaluate the RHS expression until\n   * the lambda is called.\n   */\n  get_value (notused, context, globals, node) {\n    var node = this\n\n    if (node.op === LAMBDA) {\n      return () => node.get_leaf_value(node.rhs, context, globals, node)\n    }\n\n    const lhv = node.get_leaf_value(node.lhs, context, globals, node)\n    const earlyOut = node.op.earlyOut\n\n    if (earlyOut && earlyOut(lhv)) { return lhv }\n    const rhv = node.get_leaf_value(node.rhs, context, globals, node)\n\n    return node.op(lhv, rhv, context, globals)\n  }\n\n  //\n  // Class variables.\n  //\n  static get isExpressionOrIdentifierSymbol () { return IS_EXPR_OR_IDENT }\n  get [IS_EXPR_OR_IDENT] () { return true }\n\n  static value_of (item, context, globals, node) {\n    if (item && item[Node.isExpressionOrIdentifierSymbol]) {\n      return item.get_value(item, context, globals, node)\n    }\n    return item\n  }\n\n  /**\n  *  Convert an array of nodes to an executable tree.\n  *  @return {object} An object with a `lhs`, `rhs` and `op` key, corresponding\n  *                      to the left hand side, right hand side, and\n  *                      operation function.\n  */\n  static create_root (nodes) {\n    var root, leaf, op, value\n\n    // Prime the leaf = root node.\n    leaf = root = new Node(nodes.shift(), nodes.shift(), nodes.shift())\n\n    while (true) {\n      op = nodes.shift()\n      value = nodes.shift()\n      if (!op) {\n        break\n      }\n      if (op.precedence < root.op.precedence) {\n        // rebase\n        root = new Node(root, op, value)\n        leaf = root\n      } else {\n        leaf.rhs = new Node(leaf.rhs, op, value)\n        leaf = leaf.rhs\n      }\n    }\n    // console.log('tree', root)\n    return root\n  }\n}\n\n/**\n * Because of cyclical dependencies on operators <-> Node <-> value_of,\n * we need to patch this in here.\n */\noperators['?'] = function ternary (a, b, context, globals, node) {\n  return Node.value_of(a ? b.yes : b.no, context, globals, node)\n}\noperators['?'].precedence = 4\n","\nimport Node from './Node'\n\nexport default class Expression {\n  constructor (nodes) {\n    this.nodes = nodes\n    this.root = Node.create_root(nodes)\n  }\n\n  /**\n   * Return the value of `this` Expression instance.\n   */\n  get_value (parent, context, globals, node) {\n    if (!this.root) {\n      this.root = Node.create_root(this.nodes)\n    }\n    return this.root.get_value(parent, context, globals, node)\n  }\n}\n\nExpression.prototype[Node.isExpressionOrIdentifierSymbol] = true\n","\nimport Node from './Node'\n\nexport default class Arguments {\n  constructor (parser, args) {\n    this.parser = parser\n    this.args = args\n  }\n\n  get_value (parent, context, globals, node) {\n    var deReffedArgs = []\n    for (var i = 0, j = this.args.length; i < j; ++i) {\n      deReffedArgs.push(Node.value_of(this.args[i], context, globals, node))\n    }\n    return deReffedArgs\n  };\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","/**\n * The following regular expressions were generated by\n *  https://mathiasbynens.be/demo/javascript-identifier-regex\n */\nexport var IDStart = /[\\$A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/\n\nexport var IDContinue = /[\\$0-9A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B4\\u08E3-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0AF9\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D5F-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA8FD\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/\n","\nimport Node from './Node'\nimport Arguments from './Arguments'\n\nimport { hasOwnProperty } from 'tko.utils'\n\nimport {\n  isWriteableObservable, isObservable\n} from 'tko.observable'\n\nimport {\n  IDStart, IDContinue\n} from './identifierExpressions'\n\nexport default class Identifier {\n  constructor (parser, token, dereferences) {\n    this.token = token\n    this.dereferences = dereferences\n    this.parser = parser\n  }\n\n  /**\n   * Apply all () and [] functions on the identifier to the lhs value e.g.\n   * a()[3] has deref functions that are essentially this:\n   *     [_deref_call, _deref_this where this=3]\n   *\n   * @param  {mixed} value  Should be an object.\n   * @return {mixed}        The dereferenced value.\n   *\n   * [1] We want to bind any function that is a method of an object, but not\n   *     corrupt any values (e.g. computed()s).   e.g. Running x.bind(obj) where\n   *     we're given `data-bind='binding: obj.x'` and x is a computed will\n   *     break the computed's `this` and it will stop working as expected.\n   *\n   *     The test `!last_value.hasOwnProperty(member)`\n   *     distinguishes between functions on the prototype chain (prototypal\n   *     members) and value-members added directly to the object.  This may\n   *     not be the canonical test for this relationship, but it succeeds\n   *     in the known test cases.\n   *\n   *     See: `this` tests of our dereference function.\n   */\n  dereference (value, $context, globals, node) {\n    let member\n    let refs = this.dereferences || []\n    const $data = $context.$data || {}\n    let lastValue  // becomes `this` in function calls to object properties.\n    let i, n\n\n    for (i = 0, n = refs.length; i < n; ++i) {\n      member = Node.value_of(refs[i], $context, globals, node)\n\n      if (typeof value === 'function' && refs[i] instanceof Arguments) {\n        // fn(args)\n        value = value.apply(lastValue || $data, member)\n        lastValue = value\n      } else {\n        // obj[x] or obj.x dereference.  Note that obj may be a function.\n        lastValue = value\n        value = Node.value_of(value[member], $context, globals, node)\n      }\n    }\n\n    // [1] See note above.\n    if (typeof value === 'function' && n > 0 && lastValue !== value &&\n        !hasOwnProperty(lastValue, member)) {\n      return value.bind(lastValue)\n    }\n\n    return value\n  };\n\n  /**\n   * Return the value as one would get it from the top-level i.e.\n   * $data.token/$context.token/globals.token; this does not return intermediate\n   * values on a chain of members i.e. $data.hello.there -- requesting the\n   * Identifier('there').value will return $data/$context/globals.there.\n   *\n   * This will dereference using () or [arg] member.\n   * @param  {object | Identifier | Expression} parent\n   * @return {mixed}  Return the primitive or an accessor.\n   */\n  get_value (parent, context, globals, node) {\n    const intermediate = parent && !(parent instanceof Identifier)\n      ? Node.value_of(parent, context, globals, node)[this.token]\n      : context.lookup(this.token, globals, node)\n    return this.dereference(intermediate, context, globals, node)\n  }\n\n  assign (object, property, value) {\n    if (isWriteableObservable(object[property])) {\n      object[property](value)\n    } else if (!isObservable(object[property])) {\n      object[property] = value\n    }\n  };\n\n  /**\n   * Set the value of the Identifier.\n   *\n   * @param {Mixed} new_value The value that Identifier is to be set to.\n   */\n  set_value (new_value, $context, globals) {\n    const $data = $context.$data || {}\n    const refs = this.dereferences || []\n    let leaf = this.token\n    let i, n, root\n\n    if (hasOwnProperty($data, leaf)) {\n      root = $data\n    } else if (hasOwnProperty($context, leaf)) {\n      root = $context\n    } else if (hasOwnProperty(globals, leaf)) {\n      root = globals\n    } else {\n      throw new Error('Identifier::set_value -- ' +\n        \"The property '\" + leaf + \"' does not exist \" +\n        'on the $data, $context, or globals.')\n    }\n\n    // Degenerate case. {$data|$context|global}[leaf] = something;\n    n = refs.length\n    if (n === 0) {\n      this.assign(root, leaf, new_value)\n      return\n    }\n\n    // First dereference is {$data|$context|global}[token].\n    root = root[leaf]\n\n    // We cannot use this.dereference because that gives the leaf; to evoke\n    // the ES5 setter we have to call `obj[leaf] = new_value`\n    for (i = 0; i < n - 1; ++i) {\n      leaf = refs[i]\n      if (leaf instanceof Arguments) {\n        root = root()\n      } else {\n        root = root[Node.value_of(leaf)]\n      }\n    }\n\n    // We indicate that a dereference is a function when it is `true`.\n    if (refs[i] === true) {\n      throw new Error('Cannot assign a value to a function.')\n    }\n\n    // Call the setter for the leaf.\n    if (refs[i]) {\n      this.assign(root, Node.value_of(refs[i]), new_value)\n    }\n  };\n\n  /**\n   * Determine if a character is a valid item in an identifier.\n   * Note that we do not check whether the first item is a number, nor do we\n   * support unicode identifiers here.\n   *\n   * From:  http://stackoverflow.com/a/9337047\n   * @param  {String}  ch  The character\n   * @return {Boolean}     True if this is a valid identifier\n   */\n  // function is_identifier_char(ch) {\n  //   return (ch >= 'A' && ch <= 'Z') ||\n  //          (ch >= 'a' && ch <= 'z') ||\n  //          (ch >= '0' && ch <= 9) ||\n  //           ch === '_' || ch === '$';\n  // }\n  static is_valid_start_char (ch) {\n    return IDStart.test(ch)\n  }\n\n  static is_valid_continue_char (ch) {\n    return IDContinue.test(ch)\n  }\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","\nimport Node from './Node'\n\nexport default class Ternary {\n  constructor (yes, no) {\n    Object.assign(this, {yes, no})\n  }\n\n  get_value () { return this }\n\n  get [Node.isExpressionOrIdentifierSymbol] () { return true }\n}\n","/**\n * Originally based on (public domain):\n * https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n */\n\nimport {\n  options, objectForEach, clonePlainObjectDeep, extend, hasOwnProperty\n} from 'tko.utils'\n\nimport {default as Expression} from './Expression'\nimport {default as Identifier} from './Identifier'\nimport {default as Arguments} from './Arguments'\nimport {default as Ternary} from './Ternary'\nimport {default as Node} from './Node'\nimport {default as operators} from './operators'\n\nconst escapee = {\n  \"'\": \"'\",\n  '\"': '\"',\n  '`': '`',\n  '\\\\': '\\\\',\n  '/': '/',\n  '$': '$',\n  b: '\\b',\n  f: '\\f',\n  n: '\\n',\n  r: '\\r',\n  t: '\\t'\n}\n\n/**\n * Construct a new Parser instance with new Parser(node, context)\n * @param {Node} node    The DOM element from which we parsed the\n *                         content.\n * @param {object} context The Knockout context.\n * @param {object} globals An object containing any desired globals.\n */\nexport default class Parser {\n  white () {\n    var ch = this.ch\n    while (ch && ch <= ' ') {\n      ch = this.next()\n    }\n    return this.comment(ch)\n  }\n\n/**\n * Slurp any C or C++ style comments\n */\n  comment (ch) {\n    if (ch !== '/') { return ch }\n    var p = this.at\n    var second = this.lookahead()\n    if (second === '/') {\n      while (ch) {\n        ch = this.next()\n        if (ch === '\\n' || ch === '\\r') { break }\n      }\n      ch = this.next()\n    } else if (second === '*') {\n      while (ch) {\n        ch = this.next()\n        if (ch === '*' && this.lookahead() === '/') {\n          this.next()\n          break\n        }\n      }\n      if (!ch) {\n        this.error('Unclosed comment, starting at character ' + p)\n      }\n      this.next()\n      return this.white()\n    }\n    return ch\n  };\n\n  next (c) {\n    if (c && c !== this.ch) {\n      this.error(\"Expected '\" + c + \"' but got '\" + this.ch + \"'\")\n    }\n    this.ch = this.text.charAt(this.at)\n    this.at += 1\n    return this.ch\n  }\n\n  lookahead () {\n    return this.text[this.at]\n  }\n\n  error (m) {\n    if (m instanceof Error) { throw m }\n    let [name, msg] = m.name ? [m.name, m.message] : [m, '']\n    const message = `\\n${name} ${msg} of\n    ${this.text}\\n` + Array(this.at).join(' ') + '_/  \\\\_\\n'\n    throw new Error(message)\n  }\n\n  name () {\n  // A name of a binding\n    var name = ''\n    var enclosedBy\n    this.white()\n\n    var ch = this.ch\n\n    if (ch === \"'\" || ch === '\"') {\n      enclosedBy = ch\n      ch = this.next()\n    }\n\n    while (ch) {\n      if (enclosedBy && ch === enclosedBy) {\n        this.white()\n        ch = this.next()\n        if (ch !== ':' && ch !== ',') {\n          this.error(\n          'Object name: ' + name + ' missing closing ' + enclosedBy\n        )\n        }\n        return name\n      } else if (ch === ':' || ch <= ' ' || ch === ',' || ch === '|') {\n        return name\n      }\n      name += ch\n      ch = this.next()\n    }\n\n    return name\n  }\n\n  number () {\n    let number\n    let string = ''\n    let ch = this.ch\n\n    if (ch === '-') {\n      string = '-'\n      ch = this.next('-')\n    }\n    while (ch >= '0' && ch <= '9') {\n      string += ch\n      ch = this.next()\n    }\n    if (ch === '.') {\n      string += '.'\n      ch = this.next()\n      while (ch && ch >= '0' && ch <= '9') {\n        string += ch\n        ch = this.next()\n      }\n    }\n    if (ch === 'e' || ch === 'E') {\n      string += ch\n      ch = this.next()\n      if (ch === '-' || ch === '+') {\n        string += ch\n        ch = this.next()\n      }\n      while (ch >= '0' && ch <= '9') {\n        string += ch\n        ch = this.next()\n      }\n    }\n    number = +string\n    if (!isFinite(number)) {\n      options.onError(new Error('Bad number: ' + number + ' in ' + string))\n    } else {\n      return number\n    }\n  }\n\n/**\n * Add a property to 'object' that equals the given value.\n * @param  {Object} object The object to add the value to.\n * @param  {String} key    object[key] is set to the given value.\n * @param  {mixed}  value  The value, may be a primitive or a function. If a\n *                         function it is unwrapped as a property.\n */\n  objectAddValue (object, key, value) {\n    if (value && value[Node.isExpressionOrIdentifierSymbol]) {\n      Object.defineProperty(object, key, {\n        get: () => Node.value_of(value, ...this.currentContextGlobals),\n        enumerable: true\n      })\n    } else if (Array.isArray(value)) {\n      Object.defineProperty(object, key, {\n        get: () => value.map(v => Node.value_of(v, ...this.currentContextGlobals)),\n        enumerable: true\n      })\n    } else {\n    // primitives\n      object[key] = value\n    }\n  }\n\n  object () {\n    let key\n    let object = {}\n    let ch = this.ch\n\n    if (ch === '{') {\n      this.next('{')\n      ch = this.white()\n      if (ch === '}') {\n        ch = this.next('}')\n        return object\n      }\n      while (ch) {\n        if (ch === '\"' || ch === \"'\" || ch === '`') {\n          key = this.string()\n        } else {\n          key = this.name()\n        }\n        if (hasOwnProperty(object, key)) {\n          this.error('Duplicate key \"' + key + '\"')\n        }\n        if (this.white() === ':') {\n          ch = this.next(':')\n          this.objectAddValue(object, key, this.expression())\n        } else {\n          const objectKeyIsValue = new Identifier(this, key, [])\n          this.objectAddValue(object, key, objectKeyIsValue)\n        }\n\n        ch = this.white()\n        if (ch === '}') {\n          ch = this.next('}')\n          return object\n        }\n\n        this.next(',')\n        ch = this.white()\n      }\n    }\n    this.error('Bad object')\n  }\n\n/**\n * Read up to delim and return the string\n * @param  {string} delim The delimiter, either ' or \"\n * @return {string}       The string read.\n */\n  readString (delim) {\n    let string = ''\n    let nodes = ['']\n    let plusOp = operators['+']\n    let hex\n    let i\n    let uffff\n    let interpolate = delim === '`'\n    let ch = this.next()\n\n    while (ch) {\n      if (ch === delim) {\n        ch = this.next()\n        if (interpolate) { nodes.push(plusOp) }\n        nodes.push(string)\n        return nodes\n      }\n      if (ch === '\\\\') {\n        ch = this.next()\n        if (ch === 'u') {\n          uffff = 0\n          for (i = 0; i < 4; i += 1) {\n            hex = parseInt(ch = this.next(), 16)\n            if (!isFinite(hex)) {\n              break\n            }\n            uffff = uffff * 16 + hex\n          }\n          string += String.fromCharCode(uffff)\n        } else if (typeof escapee[ch] === 'string') {\n          string += escapee[ch]\n        } else {\n          break\n        }\n      } else if (interpolate && ch === '$') {\n        ch = this.next()\n        if (ch === '{') {\n          this.next('{')\n          nodes.push(plusOp)\n          nodes.push(string)\n          nodes.push(plusOp)\n          nodes.push(this.expression())\n          string = ''\n        // this.next('}');\n        } else {\n          string += '$' + ch\n        }\n      } else {\n        string += ch\n      }\n      ch = this.next()\n    }\n\n    this.error('Bad string')\n  }\n\n  string () {\n    var ch = this.ch\n    if (ch === '\"') {\n      return this.readString('\"').join('')\n    } else if (ch === \"'\") {\n      return this.readString(\"'\").join('')\n    } else if (ch === '`') {\n      return Node.create_root(this.readString('`'))\n    }\n\n    this.error('Bad string')\n  }\n\n  array () {\n    let array = []\n    let ch = this.ch\n\n    if (ch === '[') {\n      ch = this.next('[')\n      this.white()\n      if (ch === ']') {\n        ch = this.next(']')\n        return array\n      }\n      while (ch) {\n        array.push(this.expression())\n        ch = this.white()\n        if (ch === ']') {\n          ch = this.next(']')\n          return array\n        }\n        this.next(',')\n        ch = this.white()\n      }\n    }\n    this.error('Bad array')\n  }\n\n  value () {\n    var ch\n    this.white()\n    ch = this.ch\n    switch (ch) {\n      case '{': return this.object()\n      case '[': return this.array()\n      case '\"': case \"'\": case '`': return this.string()\n      case '-': return this.number()\n      default:\n        return ch >= '0' && ch <= '9' ? this.number() : this.identifier()\n    }\n  }\n\n/**\n * Get the function for the given operator.\n * A `.precedence` value is added to the function, with increasing\n * precedence having a higher number.\n * @return {function} The function that performs the infix operation\n */\n  operator (opts) {\n    let op = ''\n    let opFn\n    let ch = this.white()\n    let isIdentifierChar = Identifier.is_valid_start_char\n\n    while (ch) {\n      if (isIdentifierChar(ch) || ch <= ' ' || ch === '' ||\n        ch === '\"' || ch === \"'\" || ch === '{' || ch === '(' ||\n        ch === '`' || ch === ')' || (ch <= '9' && ch >= '0')) {\n        break\n      }\n\n      if (!opts.not_an_array && ch === '[') {\n        break\n      }\n\n      op += ch\n      ch = this.next()\n\n    // An infix followed by the prefix e.g. a + @b\n    // TODO: other prefix unary operators\n      if (ch === '@') {\n        break\n      }\n\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n\n    if (op !== '') {\n      if (opts.prefix && op === '-') { op = '&-' }\n      opFn = operators[op]\n\n      if (!opFn) {\n        this.error(\"Bad operator: '\" + op + \"'.\")\n      }\n    }\n\n    return opFn\n  }\n\n/**\n * Filters\n * Returns what the Node interprets as an \"operator\".\n * e.g.\n *   <span data-bind=\"text: name | fit:20 | uppercase\"></span>\n */\n  filter () {\n    let ch = this.next()\n    let args = []\n    let nextFilter = function (v) { return v }\n    let name = this.name()\n\n    if (!options.filters[name]) {\n      options.onError('Cannot find filter by the name of: ' + name)\n    }\n\n    ch = this.white()\n\n    while (ch) {\n      if (ch === ':') {\n        ch = this.next()\n        args.push(this.expression('|'))\n      }\n\n      if (ch === '|') {\n        nextFilter = this.filter()\n        break\n      }\n\n      if (ch === ',') { break }\n\n      ch = this.white()\n    }\n\n    var filter = function filter (value, ignored, context, globals, node) {\n      var argValues = [value]\n\n      for (var i = 0, j = args.length; i < j; ++i) {\n        argValues.push(Node.value_of(args[i], context, globals, node))\n      }\n\n      return nextFilter(options.filters[name].apply(null, argValues))\n    }\n\n  // Lowest precedence.\n    filter.precedence = 1\n    return filter\n  }\n\n/**\n * Parse an expression  builds an operator tree, in something like\n * Shunting-Yard.\n *   See: http://en.wikipedia.org/wiki/Shunting-yard_algorithm\n *\n * @return {function}   A function that computes the value of the expression\n *                      when called or a primitive.\n */\n  expression (filterable) {\n    let op\n    let nodes = []\n    let ch = this.white()\n\n    while (ch) {\n    // unary prefix operators\n      op = this.operator({ prefix: true })\n      if (op) {\n        nodes.push(undefined)  // LHS Tree node.\n        nodes.push(op)\n        ch = this.white()\n      }\n\n      if (ch === '(') {\n        this.next()\n        nodes.push(this.expression())\n        this.next(')')\n      } else {\n        nodes.push(this.value())\n      }\n      ch = this.white()\n\n      if (ch === ':' || ch === '}' || ch === ',' || ch === ']' ||\n        ch === ')' || ch === '' || ch === '`' || (ch === '|' && filterable === '|')) {\n        break\n      }\n\n    // filters\n      if (ch === '|' && this.lookahead() !== '|' && filterable) {\n        nodes.push(this.filter())\n        nodes.push(undefined)\n        break\n      }\n\n    // infix or postfix operators\n      op = this.operator({ not_an_array: true })\n\n      if (op === operators['?']) {\n        this.ternary(nodes)\n        break\n      } else if (op === operators['.']) {\n        nodes.push(op)\n        nodes.push(this.member())\n        op = null\n      } else if (op === operators['[']) {\n        nodes.push(op)\n        nodes.push(this.expression())\n        ch = this.next(']')\n        op = null\n      } else if (op) {\n        nodes.push(op)\n      }\n\n      ch = this.white()\n\n      if (ch === ']' || (!op && ch === '(')) { break }\n    }\n\n    if (nodes.length === 0) {\n      return undefined\n    }\n\n    var dereferences = this.dereferences()\n\n    if (nodes.length === 1 && !dereferences.length) {\n      return nodes[0]\n    }\n\n    for (var i = 0, j = dereferences.length; i < j; ++i) {\n      var deref = dereferences[i]\n      if (deref.constructor === Arguments) {\n        nodes.push(operators.call)\n      } else {\n        nodes.push(operators['.'])\n      }\n      nodes.push(deref)\n    }\n\n    return new Expression(nodes)\n  }\n\n  ternary (nodes) {\n    var ternary = new Ternary()\n    ternary.yes = this.expression()\n    this.next(':')\n    ternary.no = this.expression()\n    nodes.push(operators['?'])\n    nodes.push(ternary)\n  }\n\n/**\n * Parse the arguments to a function, returning an Array.\n *\n */\n  funcArguments () {\n    let args = []\n    let ch = this.next('(')\n\n    while (ch) {\n      ch = this.white()\n      if (ch === ')') {\n        this.next(')')\n        return new Arguments(this, args)\n      } else {\n        args.push(this.expression())\n        ch = this.white()\n      }\n      if (ch !== ')') { this.next(',') }\n    }\n\n    this.error('Bad arguments to function')\n  }\n\n/**\n * The literal string reference `abc` in an `x.abc` expression.\n */\n  member () {\n    let member = ''\n    let ch = this.white()\n    let isIdentifierChar = Identifier.is_valid_start_char\n\n    while (ch) {\n      if (!isIdentifierChar(ch)) {\n        break\n      }\n      member += ch\n      ch = this.next()\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n    return member\n  }\n\n/**\n * A dereference applies to an identifer, being either a function\n * call \"()\" or a membership lookup with square brackets \"[member]\".\n * @return {fn or undefined}  Dereference function to be applied to the\n *                            Identifier\n */\n  dereference () {\n    let member\n    let ch = this.white()\n\n    while (ch) {\n      if (ch === '(') {\n      // a(...) function call\n        return this.funcArguments()\n      } else if (ch === '[') {\n      // a[x] membership\n        this.next('[')\n        member = this.expression()\n        this.white()\n        this.next(']')\n\n        return member\n      } else if (ch === '.') {\n      // a.x membership\n        this.next('.')\n        return this.member()\n      } else {\n        break\n      }\n    }\n  }\n\n  dereferences () {\n    let ch = this.white()\n    let dereferences = []\n    let deref\n\n    while (ch) {\n      deref = this.dereference()\n      if (deref !== undefined) {\n        dereferences.push(deref)\n      } else {\n        break\n      }\n    }\n    return dereferences\n  }\n\n  identifier () {\n    let token = ''\n    let isIdentifierChar = Identifier.is_valid_start_char\n    let ch = this.white()\n\n    while (ch) {\n      if (!isIdentifierChar(ch)) {\n        break\n      }\n      token += ch\n      ch = this.next()\n      isIdentifierChar = Identifier.is_valid_continue_char\n    }\n    switch (token) {\n      case 'true': return true\n      case 'false': return false\n      case 'null': return null\n      case 'undefined': return void 0\n      case 'function':\n        throw new Error('Knockout: Anonymous functions are no longer supported, but `=>` lambdas are.')\n    // return this.anonymous_fn();\n    }\n    return new Identifier(this, token, this.dereferences())\n  }\n\n  readBindings () {\n    let key\n    let bindings = {}\n    let sep\n    let expr\n    let ch = this.ch\n\n    while (ch) {\n      key = this.name()\n      sep = this.white()\n\n      if (!sep || sep === ',') {\n        if (sep) {\n          ch = this.next(',')\n        } else {\n          ch = ''\n        }\n      // A \"bare\" binding e.g. \"text\"; substitute value of 'null'\n      // so it becomes \"text: null\".\n        bindings[key] = null\n      } else {\n        if (key.indexOf('.') !== -1) {\n        // Namespaced  i.e.\n        //    `attr.css: x` becomes `attr: { css: x }`\n        //     ^^^ - key\n          key = key.split('.')\n          bindings[key[0]] = bindings[key[0]] || {}\n\n          if (key.length !== 2) {\n            options.onError('Binding ' + key + ' should have two parts (a.b).')\n          } else if (bindings[key[0]].constructor !== Object) {\n            options.onError('Binding ' + key[0] + '.' + key[1] + ' paired with a non-object.')\n          }\n\n          ch = this.next(':')\n          this.objectAddValue(bindings[key[0]], key[1], this.expression(true))\n        } else {\n          ch = this.next(':')\n          if (bindings[key] && typeof bindings[key] === 'object' && bindings[key].constructor === Object) {\n          // Extend a namespaced bindings e.g. we've previously seen\n          // on.x, now we're seeing on: { 'abc' }.\n            expr = this.expression(true)\n            if (typeof expr !== 'object' || expr.constructor !== Object) {\n              options.onError('Expected plain object for ' + key + ' value.')\n            } else {\n              extend(bindings[key], expr)\n            }\n          } else {\n            bindings[key] = this.expression(true)\n          }\n        }\n\n        this.white()\n        if (this.ch) {\n          ch = this.next(',')\n        } else {\n          ch = ''\n        }\n      }\n    }\n    return bindings\n  }\n\n  valueAsAccessor (value, context, globals, node) {\n    if (!value) { return () => value }\n    if (typeof value === 'function') { return value }\n\n    if (value[Node.isExpressionOrIdentifierSymbol]) {\n      return () => Node.value_of(value, context, globals, node)\n    }\n\n    if (Array.isArray(value)) {\n      return () => value.map(v => Node.value_of(v, context, globals, node))\n    }\n\n    if (typeof (value) !== 'function') {\n      return () => clonePlainObjectDeep(value)\n    }\n\n    throw new Error('Value has cannot be converted to accessor: ' + value)\n  }\n\n  /**\n  * Convert result[name] from a value to a function (i.e. `valueAccessor()`)\n  * @param  {object} result [Map of top-level names to values]\n  * @return {object}        [Map of top-level names to functions]\n  *\n  * Accessors may be one of (below) constAccessor, identifierAccessor,\n  * expressionAccessor, or nodeAccessor.\n  */\n  convertToAccessors (result, context, globals, node) {\n    objectForEach(result, (name, value) => {\n      if (value instanceof Identifier) {\n        // Return a function that, with no arguments returns\n        // the value of the identifier, otherwise sets the\n        // value of the identifier to the first given argument.\n        Object.defineProperty(result, name, {\n          value: function (optionalValue, options) {\n            const currentValue = value.get_value(undefined, context, globals, node)\n            if (arguments.length === 0) { return currentValue }\n            const unchanged = optionalValue === currentValue\n            if (options && options.onlyIfChanged && unchanged) { return }\n            return value.set_value(optionalValue, context, globals)\n          }\n        })\n      } else {\n        result[name] = this.valueAsAccessor(value, context, globals, node)\n      }\n    })\n    return result\n  }\n\n  preparse (source = '') {\n    const preparsers = options.bindingStringPreparsers || []\n    return preparsers.reduce((acc, fn) => fn(acc), source.trim())\n  }\n\n  runParse (source, fn) {\n    this.text = this.preparse(source)\n    this.at = 0\n    this.ch = ' '\n\n    try {\n      var result = fn()\n      this.white()\n      if (this.ch) {\n        this.error('Syntax Error')\n      }\n      return result\n    } catch (e) {\n      options.onError(e)\n    }\n  }\n\n  /**\n   * Get the bindings as name: accessor()\n   * @param  {string} source The binding string to parse.\n   * @return {object}        Map of name to accessor function.\n   */\n  parse (source, context = {}, globals = {}, node) {\n    if (!source) { return () => null }\n    this.currentContextGlobals = [context, globals, node]\n    const parseFn = () => this.readBindings()\n    const bindingAccessors = this.runParse(source, parseFn)\n    return this.convertToAccessors(bindingAccessors, context, globals, node)\n  }\n\n  /**\n   * Return a function that evaluates and returns the result of the expression.\n   */\n  parseExpression (source, context = {}, globals = {}, node) {\n    if (!source) { return () => '' }\n    this.currentContextGlobals = [context, globals, node]\n    const parseFn = () => this.expression(true)\n    const bindingAccessors = this.runParse(source, parseFn)\n    return this.valueAsAccessor(bindingAccessors, context, globals, node)\n  }\n}\n","import {\n    extenders\n} from 'tko.observable'\n\nimport {\n    computed\n} from './computed.js'\n\nexport function throttleExtender (target, timeout) {\n    // Throttling means two things:\n\n    // (1) For dependent observables, we throttle *evaluations* so that, no matter how fast its dependencies\n    //     notify updates, the target doesn't re-evaluate (and hence doesn't notify) faster than a certain rate\n  target.throttleEvaluation = timeout\n\n    // (2) For writable targets (observables, or writable dependent observables), we throttle *writes*\n    //     so the target cannot change value synchronously or faster than a certain rate\n  var writeTimeoutInstance = null\n  return computed({\n    read: target,\n    write: function (value) {\n      clearTimeout(writeTimeoutInstance)\n      writeTimeoutInstance = setTimeout(function () {\n        target(value)\n      }, timeout)\n    }\n  })\n}\n\nextenders.throttle = throttleExtender\n","'use strict'\n\nimport {\n    addDisposeCallback, createSymbolOrString\n} from 'tko.utils'\n\nimport {\n    computed\n} from 'tko.computed'\n\nconst SUBSCRIPTIONS = createSymbolOrString('LifeCycle Subscriptions List')\nconst ANCHOR_NODE = createSymbolOrString('LifeCycle Anchor Node')\n\nexport default class LifeCycle {\n  // NOTE: For more advanced integration as an ES6 mixin, see e.g.:\n  // http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/\n\n  /**\n   * Copy the properties of the LifeCycle class to the target (or its prototype)\n   *\n   * NOTE: getOwnPropertyNames is needed to copy the non-enumerable properties.\n   */\n  static mixInto (Constructor) {\n    const target = Constructor.prototype || Constructor\n    const mixin = LifeCycle.prototype\n    for (let prop of Object.getOwnPropertyNames(mixin)) {\n      target[prop] = mixin[prop]\n    }\n  }\n\n  subscribe (observable, action) {\n    if (typeof action === 'string') { action = this[action].bind(this) }\n    this.addDisposable(observable.subscribe(action))\n  }\n\n  computed (params) {\n    if (typeof params === 'string') {\n      params = { read: this[params], write: this[params], owner: this }\n    } else if (typeof params === 'object') {\n      // Pass directly.\n    } else if (typeof params === 'function') {\n      params = { read: params, write: params }\n    } else {\n      throw new Error('LifeCycle::computed not given a valid type.')\n    }\n\n    params.disposeWhenNodeIsRemoved = this[ANCHOR_NODE]\n    return this.addDisposable(computed(params))\n  }\n\n  /**\n   * Add an event listener for the given or anchored node.\n   * @param {node} [node] (optional) The target node (otherwise the anchored node)\n   * @param {string} [type] Event type\n   * @param {function|string} [action] Either call the given function or `this[action]`\n   * @param {object} [options] (optional) Passed as `options` to `node.addEventListener`\n   */\n  addEventListener (...args) {\n    const node = args[0].nodeType ? args.shift() : this[ANCHOR_NODE]\n    const [type, act, options] = args\n    const handler = typeof act === 'string' ? this[act].bind(this) : act\n    this.__addEventListener(node, type, handler, options)\n  }\n\n  __addEventListener (node, eventType, handler, options) {\n    node.addEventListener(eventType, handler, options)\n    function dispose () { node.removeEventListener(eventType, handler) }\n    addDisposeCallback(node, dispose)\n    this.addDisposable({ dispose })\n  }\n\n  anchorTo (node) {\n    addDisposeCallback(node, () => this.dispose())\n    this[ANCHOR_NODE] = node\n  }\n\n  dispose () {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    subscriptions.forEach(s => s.dispose())\n    this[SUBSCRIPTIONS] = []\n    this[ANCHOR_NODE] = null\n  }\n\n  addDisposable (subscription) {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    if (!this[SUBSCRIPTIONS]) { this[SUBSCRIPTIONS] = subscriptions }\n    if (typeof subscription.dispose !== 'function') {\n      throw new Error('Lifecycle::addDisposable argument missing `dispose`.')\n    }\n    subscriptions.push(subscription)\n    return subscription\n  }\n}\n","\nimport {\n  domData, removeDisposeCallback, arrayRemoveItem, addDisposeCallback\n} from 'tko.utils'\n\nimport {\n  subscribable\n} from 'tko.observable'\n\nexport const contextAncestorBindingInfo = Symbol('_ancestorBindingInfo')\nconst boundElementDomDataKey = domData.nextKey()\n\nexport const bindingEvent = {\n  childrenComplete: 'childrenComplete',\n  descendantsComplete: 'descendantsComplete',\n\n  subscribe (node, event, callback, context) {\n    const bindingInfo = domData.getOrSet(node, boundElementDomDataKey, {})\n    if (!bindingInfo.eventSubscribable) {\n      bindingInfo.eventSubscribable = new subscribable()\n    }\n    return bindingInfo.eventSubscribable.subscribe(callback, context, event)\n  },\n\n  notify (node, event) {\n    const bindingInfo = domData.get(node, boundElementDomDataKey)\n    if (bindingInfo) {\n      if (bindingInfo.eventSubscribable) {\n        bindingInfo.eventSubscribable.notifySubscribers(node, event)\n      }\n    }\n  }\n}\n\n","\n\nexport class BindingResult {\n  constructor ({asyncBindingsApplied, rootNode, bindingContext}) {\n    Object.assign(this, {\n      rootNode,\n      bindingContext,\n      isSync: asyncBindingsApplied.size === 0,\n      isComplete: this.isSync\n    })\n\n    if (!this.isSync) {\n      this.completionPromise = this.completeWhenBindingsFinish(asyncBindingsApplied)\n    }\n  }\n\n  async completeWhenBindingsFinish (asyncBindingsApplied) {\n    await Promise.all(asyncBindingsApplied)\n    this.isComplete = true\n    return this\n  }\n}\n","\nimport {\n    options\n} from 'tko.utils'\n\nimport {\n    LifeCycle\n} from 'tko.lifecycle'\n\nexport class BindingHandler extends LifeCycle {\n  constructor (params) {\n    super()\n    const {$element, valueAccessor, allBindings, $context} = params\n    Object.assign(this, {\n      valueAccessor,\n      allBindings,\n      $element,\n      $context,\n      $data: $context.$data\n    })\n\n    this.anchorTo($element)\n  }\n\n  get value () { return this.valueAccessor() }\n  set value (v) { return this.valueAccessor(v) }\n\n  get controlsDescendants () { return false }\n\n  static get allowVirtualElements () { return false }\n  static get isBindingHandlerClass () { return true }\n\n  /* Overload this for asynchronous bindings or bindings that recursively\n     apply bindings (e.g. components, foreach, template).\n\n     A binding should be complete when it has run through once, notably\n     in server-side bindings for pre-rendering.\n  */\n  get bindingCompleted () { return true }\n\n  static registerAs (name, provider = options.bindingProviderInstance) {\n    provider.bindingHandlers.set(name, this)\n  }\n}\n\n/**\n * An AsyncBindingHandler shall call `completeBinding` when the binding\n * is to be considered complete.\n */\nconst ResolveSymbol = Symbol('Async Binding Resolved')\n\nexport class AsyncBindingHandler extends BindingHandler {\n  constructor (params) {\n    super(params)\n    this.bindingCompletion = new Promise((resolve) => {\n      this[ResolveSymbol] = resolve\n    })\n    this.completeBinding = bindingResult => this[ResolveSymbol](bindingResult)\n  }\n\n  get bindingCompleted () { return this.bindingCompletion }\n}\n","\nimport {\n  virtualElements, options\n} from 'tko.utils'\n\nimport {\n  dependencyDetection\n} from 'tko.observable'\n\nimport {\n  BindingHandler\n} from './BindingHandler'\n\n/**\n * We have no guarantees, for users employing legacy bindings,\n * that it has not been changed with a modification like\n *\n *    ko.bindingHandlers[name] = { init: ...}\n *\n * ... so we have to keep track by way of a map.\n */\nconst PossibleWeakMap = options.global.WeakMap || Map\nconst legacyBindingMap = new PossibleWeakMap()\n\nexport class LegacyBindingHandler extends BindingHandler {\n  constructor (params) {\n    super(params)\n    const handler = this.handler\n    this.onError = params.onError\n\n    if (typeof handler.dispose === 'function') {\n      this.addDisposable(handler)\n    }\n\n    try {\n      this.initReturn = handler.init && handler.init(...this.legacyArgs)\n    } catch (e) {\n      params.onError('init', e)\n    }\n  }\n\n  onValueChange () {\n    const handler = this.handler\n    if (typeof handler.update !== 'function') { return }\n    try {\n      handler.update(...this.legacyArgs)\n    } catch (e) {\n      this.onError('update', e)\n    }\n  }\n\n  get legacyArgs () {\n    return [\n      this.$element, this.valueAccessor, this.allBindings,\n      this.$data, this.$context\n    ]\n  }\n\n  get controlsDescendants () {\n    const objectToTest = this.initReturn || this.handler || {}\n    return objectToTest.controlsDescendantBindings\n  }\n\n  /**\n   * Create a handler instance from the `origin`, which may be:\n   *\n   * 1. an object (becomes LegacyBindingHandler)\n   * 2. a function (becomes LegacyBindingHandler with `init: function`)\n   *\n   * If given an object (the only kind supported in knockout 3.x and before), it\n   * shall draw the `init`, `update`, and `allowVirtualElements` properties\n   */\n  static getOrCreateFor (key, handler) {\n    if (legacyBindingMap.has(handler)) {\n      return legacyBindingMap.get(handler)\n    }\n    const newLegacyHandler = this.createFor(key, handler)\n    legacyBindingMap.set(handler, newLegacyHandler)\n    return newLegacyHandler\n  }\n\n  static createFor (key, handler) {\n    if (typeof handler === 'function') {\n      const [initFn, disposeFn] = [handler, handler.dispose]\n      return class extends LegacyBindingHandler {\n        get handler () {\n          const init = initFn.bind(this)\n          const dispose = disposeFn ? disposeFn.bind(this) : null\n          return { init, dispose }\n        }\n        static get after () { return handler.after }\n        static get allowVirtualElements () {\n          return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n        }\n      }\n    }\n\n    if (typeof handler === 'object') {\n      return class extends LegacyBindingHandler {\n        get handler () { return handler }\n        static get after () { return handler.after }\n        static get allowVirtualElements () {\n          return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n        }\n      }\n    }\n\n    throw new Error('The given handler is not an appropriate type.')\n  }\n}\n","\n\nimport {\n  applyBindingsToDescendants\n} from './applyBindings'\n\nimport {\n  AsyncBindingHandler\n} from './BindingHandler'\n\n/**\n * This DescendantBindingHandler is a base class for bindings that control\n * descendants, such as the `if`, `with`, `component`, `foreach` and `template`\n * bindings.\n */\nexport class DescendantBindingHandler extends AsyncBindingHandler {\n  get controlsDescendants () { return true }\n\n  async applyBindingsToDescendants (childContext, callback) {\n    const bindingResult = applyBindingsToDescendants(childContext, this.$element)\n    if (bindingResult.isSync) {\n      this.bindingCompletion = bindingResult\n    } else {\n      await bindingResult.completionPromise\n    }\n    if (callback) { callback(bindingResult) }\n    this.completeBinding(bindingResult)\n  }\n}\n","\nimport {\n  unwrap, peek\n} from 'tko.observable'\n\nimport {\n    nativeTemplateEngine\n} from './nativeTemplateEngine'\n\nimport {\n  TemplateBindingHandler\n} from './templating'\n\n// \"foreach: someExpression\" is equivalent to \"template: { foreach: someExpression }\"\n// \"foreach: { data: someExpression, afterAdd: myfn }\" is equivalent to \"template: { foreach: someExpression, afterAdd: myfn }\"\nexport class TemplateForEachBindingHandler extends TemplateBindingHandler {\n  get value () {\n    const modelValue = this.valueAccessor()\n    const unwrappedValue = peek(modelValue)    // Unwrap without setting a dependency here\n\n        // If unwrappedValue is the array, pass in the wrapped value on its own\n        // The value will be unwrapped and tracked within the template binding\n        // (See https://github.com/SteveSanderson/knockout/issues/523)\n    if (!unwrappedValue || typeof unwrappedValue.length === 'number') {\n      return { foreach: modelValue, templateEngine: nativeTemplateEngine.instance }\n    }\n\n    // If unwrappedValue.data is the array, preserve all relevant options and unwrap again value so we get updates\n    unwrap(modelValue)\n    return {\n      foreach: unwrappedValue.data,\n      as: unwrappedValue.as,\n      includeDestroyed: unwrappedValue.includeDestroyed,\n      afterAdd: unwrappedValue.afterAdd,\n      beforeRemove: unwrappedValue.beforeRemove,\n      afterRender: unwrappedValue.afterRender,\n      beforeMove: unwrappedValue.beforeMove,\n      afterMove: unwrappedValue.afterMove,\n      templateEngine: nativeTemplateEngine.instance\n    }\n  }\n}\n","/**\n * A class to create the global knockout instance (ko).\n */\n\nimport {\n  addDisposeCallback,\n  addOrRemoveItem,\n  arrayFilter,\n  arrayFirst,\n  arrayForEach,\n  arrayGetDistinctValues,\n  arrayIndexOf,\n  arrayMap,\n  arrayPushAll,\n  arrayRemoveItem,\n  addCleaner,\n  cleanNode,\n  cloneNodes,\n  compareArrays,\n  createSymbolOrString,\n  domData,\n  extend,\n  memoization,\n  objectForEach,\n  objectMap,\n  options,\n  parseHtmlFragment,\n  parseJson,\n  range,\n  registerEventHandler,\n  removeCleaner,\n  removeDisposeCallback,\n  removeNode,\n  selectExtensions,\n  setHtml,\n  setTextContent,\n  tasks,\n  toggleDomNodeCssClass,\n  triggerEvent,\n  virtualElements\n} from 'tko.utils'\n\nimport {\n  parseObjectLiteral\n} from 'tko.utils.parser'\n\nimport {\n  LifeCycle\n} from 'tko.lifecycle'\n\nimport {\n    // applyExtenders,\n    // arrayChangeEventName,\n    // deferUpdates,\n    dependencyDetection,\n    extenders as defaultExtenders,\n    isObservable,\n    isSubscribable,\n    isWriteableObservable,\n    observable,\n    observableArray,\n    isObservableArray,\n    peek,\n    subscribable,\n    toJS,\n    toJSON,\n    unwrap\n} from 'tko.observable'\n\nimport {\n    computed,\n    isComputed,\n    isPureComputed,\n    proxy,\n    pureComputed,\n    when\n} from 'tko.computed'\n\nimport {\n    applyBindingAccessorsToNode,\n    applyBindings,\n    applyBindingsToDescendants,\n    applyBindingsToNode,\n    contextFor,\n    dataFor,\n    bindingEvent,\n    BindingHandler,\n    AsyncBindingHandler,\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind'\n\nimport {\n    anonymousTemplate,\n    domElement,\n    nativeTemplateEngine,\n    renderTemplate,\n    setTemplateEngine,\n    templateEngine\n    // templateSources\n} from 'tko.binding.template'\n\nconst domNodeDisposal = {\n  addDisposeCallback,\n  removeDisposeCallback,\n  removeNode,\n  addCleaner,\n  removeCleaner,\n  get cleanExternalData () {\n    return options.cleanExternalData\n  },\n  set cleanExternalData (cleanerFn) {\n    options.set('cleanExternalData', cleanerFn)\n  }\n}\n\nconst utils = Object.assign({\n  addOrRemoveItem,\n  arrayFilter,\n  arrayFirst,\n  arrayForEach,\n  arrayGetDistinctValues,\n  arrayIndexOf,\n  arrayMap,\n  arrayPushAll,\n  arrayRemoveItem,\n  cloneNodes,\n  compareArrays,\n  createSymbolOrString,\n  domData,\n  domNodeDisposal,\n  extend,\n  filters: options.filters,\n  objectForEach,\n  objectMap,\n  parseHtmlFragment,\n  parseJson,\n  parseObjectLiteral,\n  peekObservable: peek,\n  range,\n  registerEventHandler,\n  setDomNodeChildrenFromArrayMapping,\n  setHtml,\n  setTextContent,\n  toggleDomNodeCssClass,\n  triggerEvent,\n  unwrapObservable: unwrap\n})\n\nconst knockout = {\n  // --- Utilities ---\n  cleanNode,\n  dependencyDetection,\n  computedContext: dependencyDetection,\n  filters: options.filters,\n  ignoreDependencies: dependencyDetection.ignore,\n  memoization,\n  options,\n  removeNode,\n  selectExtensions,\n  tasks,\n  utils,\n  LifeCycle,\n\n    // -- Observable ---\n  isObservable,\n  isSubscribable,\n  isWriteableObservable,\n  isWritableObservable: isWriteableObservable,\n  observable,\n  observableArray,\n  isObservableArray,\n  peek,\n  subscribable,\n  unwrap,\n  toJS,\n  toJSON,\n  proxy,\n\n    // ... Computed ...\n  computed,\n  dependentObservable: computed,\n  isComputed,\n  isPureComputed,\n  pureComputed,\n  when: when,\n\n    // --- Templates ---\n  nativeTemplateEngine,\n  renderTemplate,\n  setTemplateEngine,\n  templateEngine,\n  templateSources: { domElement, anonymousTemplate },\n\n    // --- Binding ---\n  applyBindingAccessorsToNode,\n  applyBindings,\n  applyBindingsToDescendants,\n  applyBindingsToNode,\n  contextFor,\n  dataFor,\n  BindingHandler,\n  AsyncBindingHandler,\n  virtualElements,\n  domNodeDisposal,\n  bindingEvent,\n}\n\nexport class Builder {\n  constructor ({ provider, bindings, extenders, filters, options }) {\n    Object.assign(knockout.options, options, {\n      filters,\n      bindingProviderInstance: provider\n    })\n\n    provider.setGlobals(knockout.options.bindingGlobals)\n\n    if (Array.isArray(bindings)) {\n      for (const bindingsObject of bindings) {\n        provider.bindingHandlers.set(bindingsObject)\n      }\n    } else {\n      provider.bindingHandlers.set(bindings)\n    }\n\n    this.providedProperties = {\n      extenders: Object.assign(defaultExtenders, extenders),\n      bindingHandlers: provider.bindingHandlers,\n      bindingProvider: provider\n    }\n  }\n\n  /**\n   * @return {Object} An instance of Knockout.\n   */\n  create (...additionalProperties) {\n    const instance = Object.assign({\n      get getBindingHandler () { return options.getBindingHandler },\n      set getBindingHandler (fn) { options.set('getBindingHandler', fn) }\n    },\n    knockout,\n    this.providedProperties,\n    ...additionalProperties)\n    instance.options.knockoutInstance = instance\n    return instance\n  }\n}\n","\nimport {\n  options\n} from 'tko.utils'\n\nexport default class BindingHandlerObject {\n  set (nameOrObject, value) {\n    if (typeof nameOrObject === 'string') {\n      this[nameOrObject] = value\n    } else if (typeof nameOrObject === 'object') {\n      if (value !== undefined) {\n        options.onError(\n          new Error('Given extraneous `value` parameter (first param should be a string, but it was an object).' + nameOrObject))\n      }\n      Object.assign(this, nameOrObject)\n    } else {\n      options.onError(\n        new Error('Given a bad binding handler type: ' + nameOrObject))\n    }\n  }\n\n  /**\n   * The handler may have a `.` in it, e.g. `attr.title`, in which case the\n   * handler is `attr`.  Otherwise it's the name given\n   */\n  get (nameOrDotted) {\n    const [name] = nameOrDotted.split('.')\n    return this[name]\n  }\n}\n","\nimport {\n  objectMap\n} from 'tko.utils'\n\nimport {\n  dependencyDetection\n} from 'tko.observable'\n\nimport BindingHandlerObject from './BindingHandlerObject'\n\nexport default class Provider {\n  constructor (params = {}) {\n    if (this.constructor === Provider) {\n      throw new Error('Provider is an abstract base class.')\n    }\n    if (!('FOR_NODE_TYPES' in this)) {\n      // FOR_NODE_TYPES must return a list of integers corresponding to the\n      // node.nodeType's that the provider handles.\n      throw new Error('Providers must have FOR_NODE_TYPES property')\n    }\n    this.bindingHandlers = params.bindingHandlers || new BindingHandlerObject()\n    this.globals = params.globals || {}\n  }\n\n  setGlobals (globals) {\n    this.globals = globals\n  }\n  nodeHasBindings (/* node */) {}\n  getBindingAccessors (/* node, context */) {}\n\n  /**\n   * Preprocess a given node.\n   * @param {HTMLElement} node\n   * @returns {[HTMLElement]|undefined}\n   */\n  preprocessNode (node) {}\n  postProcess (/* node */) {}\n\n  /** For legacy binding provider assignments to\n   *  ko.bindingProvider.instance = ... */\n  get instance () { return this._overloadInstance || this }\n  set instance (provider) {\n    if (!provider || provider === this) {\n      this._overloadInstance = undefined\n    } else {\n      this._overloadInstance = new LegacyProvider(provider, this)\n    }\n  }\n\n  // Given a function that returns bindings, create and return a new object that contains\n  // binding value-accessors functions. Each accessor function calls the original function\n  // so that it always gets the latest value and all dependencies are captured. This is used\n  // by ko.applyBindingsToNode and getBindingsAndMakeAccessors.\n  makeAccessorsFromFunction (callback) {\n    return objectMap(dependencyDetection.ignore(callback),\n      (value, key) => () => callback()[key]\n    )\n  }\n\n  // Returns the valueAccessor function for a binding value\n  makeValueAccessor (value) {\n    return () => value\n  }\n\n  // Given a bindings function or object, create and return a new object that contains\n  // binding value-accessors functions. This is used by ko.applyBindingsToNode.\n  makeBindingAccessors (bindings, context, node) {\n    if (typeof bindings === 'function') {\n      return this.makeAccessorsFromFunction(bindings.bind(null, context, node))\n    } else {\n      return objectMap(bindings, this.makeValueAccessor)\n    }\n  }\n}\n\n/**\n * LegacyProvider class is created when ko.bindingProvider.instance assigned to\n * an object that were once used for binding pre-4.0 binding providers e.g.\n * {  getBindings: function () { ... },\n *    nodeHasBindings: function () { ... }\n *    preprocessNode: function () { ... }\n * }\n */\nclass LegacyProvider extends Provider {\n  get FOR_NODE_TYPES () { return [1, 3, 8] }\n\n  constructor (providerObject, parentProvider) {\n    super()\n    Object.assign(this, {providerObject})\n    this.bindingHandlers = providerObject.bindingHandlers || parentProvider.bindingHandlers\n  }\n\n  // This function is used if the binding provider doesn't include a getBindingAccessors function.\n  // It must be called with 'this' set to the provider instance.\n  getBindingsAndMakeAccessors (node, context) {\n    const bindingsFn = this.providerObject.getBindings.bind(this.providerObject, node, context)\n    return this.makeAccessorsFromFunction(bindingsFn)\n  }\n\n  getBindingAccessors (node, context) {\n    return this.providerObject.getBindingAccessors\n      ? this.providerObject.getBindingAccessors(node, context)\n      : this.getBindingsAndMakeAccessors(node, context)\n  }\n\n  nodeHasBindings (node) {\n    return this.providerObject.nodeHasBindings(node)\n  }\n\n  preprocessNode (node) {\n    if (this.providerObject.preprocessNode) {\n      return this.providerObject.preprocessNode(node)\n    }\n  }\n}\n","import {\n  Parser, parseObjectLiteral\n} from 'tko.utils.parser'\n\nimport {\n   Provider\n } from 'tko.provider'\n\n/**\n * BindingStringProvider is an abstract base class parses a binding string.\n *\n * Children must implement `nodeHasBindings` and `getBindingString`.\n */\nexport default class BindingStringProvider extends Provider {\n  /** Call bindingHandler.preprocess on each respective binding string.\n   *\n   * The `preprocess` property of bindingHandler must be a static\n   * function (i.e. on the object or constructor).\n   */\n  * processBinding (key, value) {\n    // Get the \"on\" binding from \"on.click\"\n    const [handlerName, property] = key.split('.')\n    const handler = this.bindingHandlers.get(handlerName)\n\n    if (handler && handler.preprocess) {\n      const bindingsAddedByHandler = []\n      const chainFn = (...args) => bindingsAddedByHandler.push(args)\n      value = handler.preprocess(value, key, chainFn)\n      for (const [key, value] of bindingsAddedByHandler) {\n        yield * this.processBinding(key, value)\n      }\n    } else if (property) {\n      value = `{${property}:${value}}`\n    }\n\n    yield `'${handlerName}':${value}`\n  }\n\n  * generateBindingString (bindingStringOrObjects) {\n    const bindingObjectsArray = typeof bindingStringOrObjects === 'string'\n      ? parseObjectLiteral(bindingStringOrObjects) : bindingStringOrObjects\n    for (const {key, unknown, value} of bindingObjectsArray) {\n      yield * this.processBinding(key || unknown, value)\n    }\n  }\n\n  preProcessBindings (bindingStringOrObjects) {\n    return Array.from(this.generateBindingString(bindingStringOrObjects))\n      .join(',')\n  }\n\n  getBindingAccessors (node, context) {\n    const bindingString = node && this.getBindingString(node)\n    if (!bindingString) { return }\n    const processed = this.preProcessBindings(bindingString)\n    return new Parser().parse(processed, context, this.globals, node)\n  }\n\n  getBindingString () { throw new Error('Overload getBindingString.') }\n}\n","import {\n  virtualElements\n} from 'tko.utils'\n\nimport {\n  BindingStringProvider\n} from 'tko.provider.bindingstring'\n\nexport default class VirtualProvider extends BindingStringProvider {\n  get FOR_NODE_TYPES () { return [ 1, 8 ] }\n\n  /**\n   * Convert <ko binding='...'> into <!-- ko binding: ... -->\n   * @param {HTMLElement} node\n   */\n  preprocessNode (node) {\n    if (node.tagName === 'KO') {\n      const parent = node.parentNode\n      const childNodes = [...node.childNodes]\n      const virtualBindingString = [...this.genElementBindingStrings(node)].join(',')\n      const openNode = document.createComment('ko ' + virtualBindingString)\n      const closeNode = document.createComment('/ko')\n      parent.insertBefore(openNode, node)\n      for (const child of childNodes) {\n        parent.insertBefore(child, node)\n      }\n      parent.insertBefore(closeNode, node)\n      node.remove()\n      return [openNode, ...childNodes, closeNode]\n    }\n  }\n\n  * genElementBindingStrings (node) {\n    for (const {name, value} of node.attributes) {\n      yield `${name.replace(/^ko-/, '')}: ${value}`\n    }\n  }\n\n  getBindingString (node) {\n    if (node.nodeType === document.COMMENT_NODE) {\n      return virtualElements.virtualNodeBindingValue(node)\n    }\n  }\n\n  nodeHasBindings (node) {\n    if (node.nodeType === document.COMMENT_NODE) {\n      return virtualElements.isStartComment(node)\n    }\n  }\n}\n","\nimport {\n   BindingStringProvider\n } from 'tko.provider.bindingstring'\n\nexport default class DataBindProvider extends BindingStringProvider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  get BIND_ATTRIBUTE () {\n    return 'data-bind'\n  }\n\n  getBindingString (node) {\n    if (node.nodeType === document.ELEMENT_NODE) {\n      return node.getAttribute(this.BIND_ATTRIBUTE)\n    }\n  }\n\n  nodeHasBindings (node) {\n    if (node.nodeType === document.ELEMENT_NODE) {\n      return node.hasAttribute(this.BIND_ATTRIBUTE)\n    }\n  }\n}\n","/**\n * Component --- Abstract Base Class\n *\n * This simplifies and compartmentalizes Components.  Use this:\n *\n *    class CompX extends ComponentABC {\n *    \tstatic get element () { return 'comp-x-id' }\n *    \tstatic get sync () { return false }\n *    \tstatic get elementName () { return 'comp-x' }\n *    }\n *    CompX.register()\n *\n * instead of:\n *\n *   class CompX {}\n *\n *   ko.components.register('comp-x', {\n *     viewModel: CompX,\n *     synchronous: false,\n *     template: { element: 'comp-x' }\n *   })\n *\n * As well, gain all the benefits of a LifeCycle, namely automated\n * event and subscription addition/removal.\n *\n * NOTE: A Component created this way can add events to the component node\n * with `this.addEventListener(type, action)`.\n */\nimport {LifeCycle} from 'tko.lifecycle'\nimport {register, VIEW_MODEL_FACTORY} from './loaders'\n\nexport class ComponentABC extends LifeCycle {\n\t/**\n   * The tag name of the custom element.  For example 'my-component'.\n   * By default converts the class name from camel case to kebab case.\n\t * @return {string} The custom node name of this component.\n\t */\n  static get customElementName () {\n    return this.name.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase()\n  }\n\n\t/**\n\t * Overload this to return:\n\t * 1. A string of markup\n\t * 2. An array of DOM nodes\n\t * 3. A document fragment\n\t * 4. An AMD module (with `{require: 'some/template'}`)\n\t * @return {mixed} One of the accepted template types for the ComponentBinding.\n\t */\n  static get template () {\n    if ('template' in this.prototype) { return }\n    return { element: this.element }\n  }\n\n\t/**\n\t * This is called by the default `template`.  Overload this to return:\n\t * 1. The element ID\n\t * 2. A DOM node itself\n\t * @return {string|HTMLElement} either the element ID or actual element.\n\t */\n  static get element () {\n    throw new Error('[ComponentABC] `element` must be overloaded.')\n  }\n\n\t/**\n\t * @return {bool} True if the component shall load synchronously\n\t */\n  static get sync () { return true }\n\n  /**\n   * Construct a new instance of the model.  When using ComponentABC as a\n   * base class, we do pass in the $element and $componentTemplateNodes.\n   * @param {Object} params\n   * @param {{element: HTMLElement, templateNodes: [HTMLElement]}} componentInfo\n   */\n  static [VIEW_MODEL_FACTORY] (params, componentInfo) {\n    return new this(params, componentInfo)\n  }\n\n  static register (name = this.customElementName) {\n    const viewModel = this\n    const {template} = this\n    const synchronous = this.sync\n    register(name, { viewModel, template, synchronous })\n  }\n}\n","\nimport {registry} from './registry'\n\nimport { ComponentABC } from './ComponentABC'\n\nimport {\n  register,\n  isRegistered,\n  unregister,\n  defaultLoader,\n  defaultConfigRegistry\n} from './loaders'\n\nexport default {\n  ComponentABC,\n  // -- Registry --\n  get: registry.get,\n  clearCachedDefinition: registry.clearCachedDefinition,\n\n  // -- Loader --\n  register,\n  isRegistered,\n  unregister,\n  defaultLoader,\n  // \"Privately\" expose the underlying config registry for use in old-IE shim\n  _allRegisteredComponents: defaultConfigRegistry,\n\n  get loaders () { return registry.loaders },\n  set loaders (loaders) { registry.loaders = loaders }\n}\n","\nimport {\n  tagNameLower, objectMap\n} from 'tko.utils'\n\nimport registry from 'tko.utils.component'\n\nimport {\n  unwrap, isWriteableObservable\n} from 'tko.observable'\n\nimport {\n  computed\n} from 'tko.computed'\n\nimport {\n  Provider\n} from 'tko.provider'\n\nimport {\n  Parser\n} from 'tko.utils.parser'\n\nexport default class ComponentProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  /**\n   * Convert <slot name='X'> to <!-- ko slot: 'X' --><!-- /ko -->\n   * @param {HTMLElement} node\n   */\n  preprocessNode (node) {\n    if (node.tagName === 'SLOT') {\n      const parent = node.parentNode\n      const slotName = node.getAttribute('name') || ''\n      const openNode = document.createComment(`ko slot: \"${slotName}\"`)\n      const closeNode = document.createComment('/ko')\n      parent.insertBefore(openNode, node)\n      parent.insertBefore(closeNode, node)\n      parent.removeChild(node)\n      return [openNode, closeNode]\n    }\n  }\n\n  nodeHasBindings (node) {\n    return Boolean(this.getComponentNameForNode(node))\n  }\n\n  getBindingAccessors (node, context) {\n    const componentName = this.getComponentNameForNode(node)\n    if (!componentName) { return }\n    const component = () => ({\n      name: componentName,\n      params: this.getComponentParams(node, context)\n    })\n    return { component }\n  }\n\n  getComponentNameForNode (node) {\n    if (node.nodeType !== node.ELEMENT_NODE) { return }\n    const tagName = tagNameLower(node)\n    if (registry.isRegistered(tagName)) {\n      const hasDash = tagName.includes('-')\n      const isUnknownEntity = ('' + node) === '[object HTMLUnknownElement]'\n      if (hasDash || isUnknownEntity) { return tagName }\n    }\n  }\n\n  getComponentParams (node, context) {\n    const parser = new Parser(node, context, this.globals)\n    const paramsString = (node.getAttribute('params') || '').trim()\n    const accessors = parser.parse(paramsString, context, node)\n    if (!accessors || Object.keys(accessors).length === 0) {\n      return { $raw: {} }\n    }\n    const $raw = objectMap(accessors,\n      (value) => computed(value, null, { disposeWhenNodeIsRemoved: node })\n    )\n    const params = objectMap($raw, (v) => this.makeParamValue(node, v))\n    return Object.assign({ $raw }, params)\n  }\n\n  makeParamValue (node, paramValueComputed) {\n    const paramValue = paramValueComputed.peek()\n    // Does the evaluation of the parameter value unwrap any observables?\n    if (!paramValueComputed.isActive()) {\n      // No it doesn't, so there's no need for any computed wrapper. Just pass through the supplied value directly.\n      // Example: \"someVal: firstName, age: 123\" (whether or not firstName is an observable/computed)\n      return paramValue\n    }\n    // Yes it does. Supply a computed property that unwraps both the outer (binding expression)\n    // level of observability, and any inner (resulting model value) level of observability.\n    // This means the component doesn't have to worry about multiple unwrapping. If the value is a\n    // writable observable, the computed will also be writable and pass the value on to the observable.\n    const isWriteable = isWriteableObservable(paramValue)\n\n    return computed({\n      read: () => unwrap(paramValueComputed()),\n      write: isWriteable ? (v) => paramValueComputed()(v) : null,\n      disposeWhenNodeIsRemoved: node\n    })\n  }\n}\n","\nimport {\n  Provider\n} from 'tko.provider'\n\n/**\n * Convert attributes with ko-* to bindings.\n *\n * e.g.\n * <div ko-visible='value'></div>\n */\nexport default class AttrProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  get PREFIX () { return 'ko-' }\n\n  getBindingAttributesList (node) {\n    if (!node.hasAttributes()) { return [] }\n    return Array.from(node.attributes)\n      .filter(attr => attr.name.startsWith(this.PREFIX))\n  }\n\n  nodeHasBindings (node) {\n    return this.getBindingAttributesList(node).length > 0\n  }\n\n  getBindingAccessors (node, context) {\n    return Object.assign({}, ...this.handlersFromAttributes(node, context))\n  }\n\n  * handlersFromAttributes (node, context) {\n    for (const attr of this.getBindingAttributesList(node)) {\n      const name = attr.name.substr(this.PREFIX.length)\n      yield {[name]: () => this.getValue(attr.value, context, node)}\n    }\n  }\n\n  getValue (token, $context, node) {\n    /* FIXME: This duplicates Identifier.prototype.lookup_value; it should\n       be refactored into e.g. a BindingContext method */\n    if (!token) { return }\n    const $data = $context.$data\n\n    switch (token) {\n      case '$element': return node\n      case '$context': return $context\n      case 'this': case '$data': return $context.$data\n    }\n\n    if ($data instanceof Object && token in $data) { return $data[token] }\n    if (token in $context) { return $context[token] }\n    if (token in this.globals) { return this.globals[token] }\n\n    throw new Error(`The variable '${token} not found.`)\n  }\n}\n","\nimport {\n  Provider\n} from 'tko.provider'\n\nexport default class MultiProvider extends Provider {\n  get FOR_NODE_TYPES () { return this.nodeTypes }\n\n  constructor (params = {}) {\n    super(params)\n    const providers = params.providers || []\n    this.nodeTypeMap = {}\n    this.nodeTypes = []\n    this.providers = []\n    providers.forEach(p => this.addProvider(p))\n  }\n\n  setGlobals (globals) {\n    [this, ...this.providers].forEach(p => (p.globals = globals))\n  }\n\n  addProvider (provider) {\n    this.providers.push(provider)\n    provider.bindingHandlers = this.bindingHandlers\n    provider.globals = this.globals\n    const nodeTypeMap = this.nodeTypeMap\n    for (const nodeType of provider.FOR_NODE_TYPES) {\n      if (!nodeTypeMap[nodeType]) { nodeTypeMap[nodeType] = [] }\n      nodeTypeMap[nodeType].push(provider)\n    }\n    this.nodeTypes = Object.keys(this.nodeTypeMap).map(k => parseInt(k, 10))\n  }\n\n  providersFor (node) {\n    return this.nodeTypeMap[node.nodeType] || []\n  }\n\n  nodeHasBindings (node) {\n    return this.providersFor(node).some(p => p.nodeHasBindings(node))\n  }\n\n  preprocessNode (node) {\n    for (const provider of this.providersFor(node)) {\n      const newNodes = provider.preprocessNode(node)\n      if (newNodes) { return newNodes }\n    }\n  }\n\n  * enumerateProviderBindings (node, ctx) {\n    for (const provider of this.providersFor(node)) {\n      const bindings = provider.getBindingAccessors(node, ctx) || {}\n      for (const [key, accessor] of Object.entries(bindings || {})) {\n        yield [key, accessor]\n      }\n    }\n  }\n\n  getBindingAccessors (node, ctx) {\n    const bindings = {}\n    for (const [key, accessor] of this.enumerateProviderBindings(node, ctx)) {\n      if (key in bindings) {\n        throw new Error(`The binding \"${key}\" is duplicated by multiple providers`)\n      }\n      bindings[key] = accessor\n    }\n    return bindings\n  }\n}\n","\nimport {\n  unwrap\n} from 'tko.observable'\n\nimport {\n  Provider\n} from 'tko.provider'\n\nimport {\n  parseInterpolation\n} from './mustacheParser'\n\n/**\n * These are bindings that are mapped specific attributes, such as\n * two-way communication (value/checked) or which have anti-collision\n * properties (css).\n */\nconst DEFAULT_ATTRIBUTE_BINDING_MAP = {\n  value: 'value',\n  checked: 'checked',\n  class: 'css'\n}\n\n/**\n *  Interpret {{ }} inside DOM attributes e.g. <div class='{{ classes }}'>\n */\nexport default class AttributeMustacheProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  constructor (params = {}) {\n    super(params)\n    this.ATTRIBUTES_TO_SKIP = new Set(params.attributesToSkip || ['data-bind'])\n    this.ATTRIBUTES_BINDING_MAP = params.attributesBindingMap || DEFAULT_ATTRIBUTE_BINDING_MAP\n  }\n\n  * attributesToInterpolate (attributes) {\n    for (const attr of Array.from(attributes)) {\n      if (this.ATTRIBUTES_TO_SKIP.has(attr.name)) { continue }\n      if (attr.specified && attr.value.includes('{{')) { yield attr }\n    }\n  }\n\n  nodeHasBindings (node) {\n    return !this.attributesToInterpolate(node.attributes).next().done\n  }\n\n  partsTogether (parts, context, node, ...valueToWrite) {\n    if (parts.length > 1) {\n      return parts\n        .map(p => unwrap(p.asAttr(context, this.globals, node))).join('')\n    }\n    // It may be a writeable observable e.g. value=\"{{ value }}\".\n    const part = parts[0].asAttr(context, this.globals)\n    if (valueToWrite.length) { part(valueToWrite[0]) }\n    return part\n  }\n\n  attributeBinding (name, parts) {\n    return [name, parts]\n  }\n\n  * bindingParts (node, context) {\n    for (const attr of this.attributesToInterpolate(node.attributes)) {\n      const parts = Array.from(parseInterpolation(attr.value))\n      if (parts.length) { yield this.attributeBinding(attr.name, parts) }\n    }\n  }\n\n  getPossibleDirectBinding (attrName) {\n    const bindingName = this.ATTRIBUTES_BINDING_MAP[attrName]\n    return bindingName && this.bindingHandlers.get(attrName)\n  }\n\n  * bindingObjects (node, context) {\n    for (const [attrName, parts] of this.bindingParts(node, context)) {\n      const bindingForAttribute = this.getPossibleDirectBinding(attrName)\n      const handler = bindingForAttribute ? attrName : `attr.${attrName}`\n      const accessorFn = bindingForAttribute\n        ? (...v) => this.partsTogether(parts, context, node, ...v)\n        : (...v) => ({[attrName]: this.partsTogether(parts, context, node, ...v)})\n      node.removeAttribute(attrName)\n      yield { [handler]: accessorFn }\n    }\n  }\n\n  getBindingAccessors (node, context) {\n    return Object.assign({}, ...this.bindingObjects(node, context))\n  }\n}\n","import {\n  Provider\n} from 'tko.provider'\n\nimport {\n  parseInterpolation\n} from './mustacheParser'\n\n/**\n * Interpret {{ }}, {{{ }}}, {{# /}}, and {{# }} ... {{/ }} inside text nodes.\n *\n * This binding must come before the VirtualProvider.\n */\nexport default class TextMustacheProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 3 ] } // document.TEXT_NODE\n\n  * textToNodes (textNode) {\n    const parent = textNode.parentNode\n    const isTextarea = parent && parent.nodeName === 'TEXTAREA'\n    const hasStash = textNode.nodeValue && textNode.nodeValue.includes('{{')\n\n    if (!hasStash || isTextarea) { return }\n\n    for (const part of parseInterpolation(textNode.nodeValue)) {\n      yield * part.textNodeReplacement(textNode)\n    }\n  }\n\n  textInterpolation (textNode) {\n    const newNodes = Array.from(this.textToNodes(textNode))\n\n    if (newNodes.length === 0) { return }\n\n    if (textNode.parentNode) {\n      const parent = textNode.parentNode\n      const n = newNodes.length\n      for (let i = 0; i < n; ++i) {\n        parent.insertBefore(newNodes[i], textNode)\n      }\n      parent.removeChild(textNode)\n    }\n\n    return newNodes\n  }\n\n  /**\n   * We convert as follows:\n   *\n   *   {{# ... }} into <!-- ko ... -->\n   *   {{/ ... }} into <!-- /ko -->\n   *   {{# ... /}} into <!-- ko ... --><!-- /ko -->\n   *   {{ ... }} into <!-- ko text: ... --><!-- /ko -->\n   *   {{{ ... }}} into <!-- ko html: ... --><!-- /ko -->\n   *\n   * VirtualProvider can then pick up and do the actual binding.\n   */\n  preprocessNode (node) {\n    return this.textInterpolation(node)\n  }\n}\n","\nimport {\n  isObservable\n} from 'tko.observable'\n\nimport {\n  Provider\n} from 'tko.provider'\n\nexport const NATIVE_BINDINGS = Symbol('Knockout native bindings')\n\n/**\n * Retrieve the binding accessors that are already attached to\n * a node under the `NATIVE_BINDINGS` symbol.\n *\n * Used by the jsxToNode function.\n */\nexport default class NativeProvider extends Provider {\n  get FOR_NODE_TYPES () { return [ 1 ] } // document.ELEMENT_NODE\n\n  nodeHasBindings (node) {\n    return Object.keys(node[NATIVE_BINDINGS] || {})\n      .some(key => key.startsWith('ko-'))\n  }\n\n  onlyBindings ([name]) {\n    return name.startsWith('ko-')\n  }\n\n  valueAsAccessor ([name, value]) {\n    const bindingName = name.replace(/^ko-/, '')\n    const valueFn = isObservable(value) ? value : () => value\n    return {[bindingName]: valueFn}\n  }\n\n  /**\n   * Return as valueAccessor function all the entries matching `ko-*`\n   * @param {HTMLElement} node\n   */\n  getBindingAccessors (node) {\n    return Object.assign({},\n      ...Object.entries(node[NATIVE_BINDINGS] || {})\n        .filter(this.onlyBindings)\n        .map(this.valueAsAccessor)\n    )\n  }\n\n  /**\n   * Add a named-value to the given node.\n   * @param {HTMLElement} node\n   * @param {string} name\n   * @param {any} value\n   */\n  static addValueToNode (node, name, value) {\n    const obj = node[NATIVE_BINDINGS] || (node[NATIVE_BINDINGS] = {})\n    obj[name] = value\n  }\n\n  /**\n   *\n   * @param {HTMLElement} node\n   * @return {object} the stored values\n   */\n  static getNodeValues (node) {\n    return node[NATIVE_BINDINGS]\n  }\n}\n","\nimport {\n    makeEventHandlerShortcut\n} from './event.js'\n\n// 'click' is just a shorthand for the usual full-length event:{click:handler}\nexport var click = makeEventHandlerShortcut('click')\n","\nimport {\n    createSymbolOrString, toggleDomNodeCssClass, objectForEach, stringTrim\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nexport var css = {\n  aliases: ['class'],\n  update: function (element, valueAccessor) {\n    var value = unwrap(valueAccessor())\n    if (value !== null && typeof value === 'object') {\n      objectForEach(value, function (className, shouldHaveClass) {\n        shouldHaveClass = unwrap(shouldHaveClass)\n        toggleDomNodeCssClass(element, className, shouldHaveClass)\n      })\n    } else {\n      value = stringTrim(String(value || '')) // Make sure we don't try to store or set a non-string value\n      toggleDomNodeCssClass(element, element[css.classesWrittenByBindingKey], false)\n      element[css.classesWrittenByBindingKey] = value\n      toggleDomNodeCssClass(element, value, true)\n    }\n  },\n  classesWrittenByBindingKey: createSymbolOrString('__ko__cssValue')\n}\n","/**\n * A simple callback binding.\n */\nimport {\n  BindingHandler\n} from 'tko.bind'\n\nexport default class DescendantsCompleteHandler extends BindingHandler {\n  onDescendantsComplete () {\n    if (typeof this.value === 'function') {\n      this.value(this.$element)\n    }\n  }\n\n  static get allowVirtualElements () { return true }\n}\n","\nimport {\n    unwrap\n} from 'tko.observable'\n\nexport var enable = {\n  update: function (element, valueAccessor) {\n    var value = unwrap(valueAccessor())\n    if (value && element.disabled) {\n      element.removeAttribute('disabled')\n    } else if ((!value) && (!element.disabled)) {\n      element.disabled = true\n    }\n  }\n}\n\nexport var disable = {\n  update: function (element, valueAccessor) {\n    enable.update(element, function () { return !unwrap(valueAccessor()) })\n  }\n}\n","\nimport {\n    createSymbolOrString, triggerEvent, registerEventHandler\n} from 'tko.utils'\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable'\n\nvar hasfocusUpdatingProperty = createSymbolOrString('__ko_hasfocusUpdating')\nvar hasfocusLastValue = createSymbolOrString('__ko_hasfocusLastValue')\n\nexport var hasfocus = {\n  init: function (element, valueAccessor /*, allBindings */) {\n    var handleElementFocusChange = function (isFocused) {\n            // Where possible, ignore which event was raised and determine focus state using activeElement,\n            // as this avoids phantom focus/blur events raised when changing tabs in modern browsers.\n            // However, not all KO-targeted browsers (Firefox 2) support activeElement. For those browsers,\n            // prevent a loss of focus when changing tabs/windows by setting a flag that prevents hasfocus\n            // from calling 'blur()' on the element when it loses focus.\n            // Discussion at https://github.com/SteveSanderson/knockout/pull/352\n      element[hasfocusUpdatingProperty] = true\n      var ownerDoc = element.ownerDocument\n      if ('activeElement' in ownerDoc) {\n        var active\n        try {\n          active = ownerDoc.activeElement\n        } catch (e) {\n                    // IE9 throws if you access activeElement during page load (see issue #703)\n          active = ownerDoc.body\n        }\n        isFocused = (active === element)\n      }\n            // var modelValue = valueAccessor();\n      valueAccessor(isFocused, {onlyIfChanged: true})\n\n            // cache the latest value, so we can avoid unnecessarily calling focus/blur in the update function\n      element[hasfocusLastValue] = isFocused\n      element[hasfocusUpdatingProperty] = false\n    }\n    var handleElementFocusIn = handleElementFocusChange.bind(null, true)\n    var handleElementFocusOut = handleElementFocusChange.bind(null, false)\n\n    registerEventHandler(element, 'focus', handleElementFocusIn)\n    registerEventHandler(element, 'focusin', handleElementFocusIn) // For IE\n    registerEventHandler(element, 'blur', handleElementFocusOut)\n    registerEventHandler(element, 'focusout', handleElementFocusOut) // For IE\n  },\n  update: function (element, valueAccessor) {\n    var value = !!unwrap(valueAccessor())\n\n    if (!element[hasfocusUpdatingProperty] && element[hasfocusLastValue] !== value) {\n      value ? element.focus() : element.blur()\n\n            // In IE, the blur method doesn't always cause the element to lose focus (for example, if the window is not in focus).\n            // Setting focus to the body element does seem to be reliable in IE, but should only be used if we know that the current\n            // element was focused already.\n      if (!value && element[hasfocusLastValue]) {\n        element.ownerDocument.body.focus()\n      }\n\n            // For IE, which doesn't reliably fire \"focus\" or \"blur\" events synchronously\n      dependencyDetection.ignore(triggerEvent, null, [element, value ? 'focusin' : 'focusout'])\n    }\n  }\n}\n","\nimport {\n    tagNameLower, arrayFilter, arrayMap, setTextContent, arrayIndexOf,\n    setOptionNodeSelectionState, triggerEvent, domData,\n    ensureSelectElementIsRenderedCorrectly, selectExtensions\n} from 'tko.utils'\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable'\n\nimport {\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind'\n\nvar captionPlaceholder = {}\n\nexport var options = {\n  init: function (element) {\n    if (tagNameLower(element) !== 'select') { throw new Error('options binding applies only to SELECT elements') }\n\n        // Remove all existing <option>s.\n    while (element.length > 0) {\n      element.remove(0)\n    }\n\n        // Ensures that the binding processor doesn't try to bind the options\n    return { 'controlsDescendantBindings': true }\n  },\n  update: function (element, valueAccessor, allBindings) {\n    function selectedOptions () {\n      return arrayFilter(element.options, function (node) { return node.selected })\n    }\n\n    var selectWasPreviouslyEmpty = element.length == 0,\n      multiple = element.multiple,\n      previousScrollTop = (!selectWasPreviouslyEmpty && multiple) ? element.scrollTop : null,\n      unwrappedArray = unwrap(valueAccessor()),\n      valueAllowUnset = allBindings.get('valueAllowUnset') && allBindings['has']('value'),\n      includeDestroyed = allBindings.get('optionsIncludeDestroyed'),\n      arrayToDomNodeChildrenOptions = {},\n      captionValue,\n      filteredArray,\n      previousSelectedValues = []\n\n    if (!valueAllowUnset) {\n      if (multiple) {\n        previousSelectedValues = arrayMap(selectedOptions(), selectExtensions.readValue)\n      } else if (element.selectedIndex >= 0) {\n        previousSelectedValues.push(selectExtensions.readValue(element.options[element.selectedIndex]))\n      }\n    }\n\n    if (unwrappedArray) {\n      if (typeof unwrappedArray.length === 'undefined') // Coerce single value into array\n        { unwrappedArray = [unwrappedArray] }\n\n            // Filter out any entries marked as destroyed\n      filteredArray = arrayFilter(unwrappedArray, function (item) {\n        return includeDestroyed || item === undefined || item === null || !unwrap(item['_destroy'])\n      })\n\n            // If caption is included, add it to the array\n      if (allBindings['has']('optionsCaption')) {\n        captionValue = unwrap(allBindings.get('optionsCaption'))\n                // If caption value is null or undefined, don't show a caption\n        if (captionValue !== null && captionValue !== undefined) {\n          filteredArray.unshift(captionPlaceholder)\n        }\n      }\n    } else {\n            // If a falsy value is provided (e.g. null), we'll simply empty the select element\n    }\n\n    function applyToObject (object, predicate, defaultValue) {\n      var predicateType = typeof predicate\n      if (predicateType == 'function')    // Given a function; run it against the data value\n              { return predicate(object) } else if (predicateType == 'string') // Given a string; treat it as a property name on the data value\n              { return object[predicate] } else                                // Given no optionsText arg; use the data value itself\n                { return defaultValue }\n    }\n\n        // The following functions can run at two different times:\n        // The first is when the whole array is being updated directly from this binding handler.\n        // The second is when an observable value for a specific array entry is updated.\n        // oldOptions will be empty in the first case, but will be filled with the previously generated option in the second.\n    var itemUpdate = false\n    function optionForArrayItem (arrayEntry, index, oldOptions) {\n      if (oldOptions.length) {\n        previousSelectedValues = !valueAllowUnset && oldOptions[0].selected ? [ selectExtensions.readValue(oldOptions[0]) ] : []\n        itemUpdate = true\n      }\n      var option = element.ownerDocument.createElement('option')\n      if (arrayEntry === captionPlaceholder) {\n        setTextContent(option, allBindings.get('optionsCaption'))\n        selectExtensions.writeValue(option, undefined)\n      } else {\n                // Apply a value to the option element\n        var optionValue = applyToObject(arrayEntry, allBindings.get('optionsValue'), arrayEntry)\n        selectExtensions.writeValue(option, unwrap(optionValue))\n\n                // Apply some text to the option element\n        var optionText = applyToObject(arrayEntry, allBindings.get('optionsText'), optionValue)\n        setTextContent(option, optionText)\n      }\n      return [option]\n    }\n\n        // By using a beforeRemove callback, we delay the removal until after new items are added. This fixes a selection\n        // problem in IE<=8 and Firefox. See https://github.com/knockout/knockout/issues/1208\n    arrayToDomNodeChildrenOptions['beforeRemove'] =\n            function (option) {\n              element.removeChild(option)\n            }\n\n    function setSelectionCallback (arrayEntry, newOptions) {\n      if (itemUpdate && valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n                // There is no need to use dependencyDetection.ignore since setDomNodeChildrenFromArrayMapping does so already.\n        selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */)\n      } else if (previousSelectedValues.length) {\n                // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.\n                // That's why we first added them without selection. Now it's time to set the selection.\n        var isSelected = arrayIndexOf(previousSelectedValues, selectExtensions.readValue(newOptions[0])) >= 0\n        setOptionNodeSelectionState(newOptions[0], isSelected)\n\n                // If this option was changed from being selected during a single-item update, notify the change\n        if (itemUpdate && !isSelected) {\n          dependencyDetection.ignore(triggerEvent, null, [element, 'change'])\n        }\n      }\n    }\n\n    var callback = setSelectionCallback\n    if (allBindings['has']('optionsAfterRender') && typeof allBindings.get('optionsAfterRender') === 'function') {\n      callback = function (arrayEntry, newOptions) {\n        setSelectionCallback(arrayEntry, newOptions)\n        dependencyDetection.ignore(allBindings.get('optionsAfterRender'), null, [newOptions[0], arrayEntry !== captionPlaceholder ? arrayEntry : undefined])\n      }\n    }\n\n    setDomNodeChildrenFromArrayMapping(element, filteredArray, optionForArrayItem, arrayToDomNodeChildrenOptions, callback)\n\n    dependencyDetection.ignore(function () {\n      if (valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n        selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */)\n      } else {\n                // Determine if the selection has changed as a result of updating the options list\n        var selectionChanged\n        if (multiple) {\n                    // For a multiple-select box, compare the new selection count to the previous one\n                    // But if nothing was selected before, the selection can't have changed\n          selectionChanged = previousSelectedValues.length && selectedOptions().length < previousSelectedValues.length\n        } else {\n                    // For a single-select box, compare the current value to the previous value\n                    // But if nothing was selected before or nothing is selected now, just look for a change in selection\n          selectionChanged = (previousSelectedValues.length && element.selectedIndex >= 0)\n                        ? (selectExtensions.readValue(element.options[element.selectedIndex]) !== previousSelectedValues[0])\n                        : (previousSelectedValues.length || element.selectedIndex >= 0)\n        }\n\n                // Ensure consistency between model value and selected option.\n                // If the dropdown was changed so that selection is no longer the same,\n                // notify the value or selectedOptions binding.\n        if (selectionChanged) {\n          triggerEvent(element, 'change')\n        }\n      }\n    })\n\n        // Workaround for IE bug\n    ensureSelectElementIsRenderedCorrectly(element)\n\n    if (previousScrollTop && Math.abs(previousScrollTop - element.scrollTop) > 20) { element.scrollTop = previousScrollTop }\n  }\n}\n","\nimport {\n    objectForEach, options\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nconst {jQueryInstance} = options\n\nexport var style = {\n  update: function (element, valueAccessor) {\n    var value = unwrap(valueAccessor() || {})\n    objectForEach(value, function (styleName, styleValue) {\n      styleValue = unwrap(styleValue)\n\n      if (styleValue === null || styleValue === undefined || styleValue === false) {\n        // Empty string removes the value, whereas null/undefined have no effect\n        styleValue = ''\n      }\n\n      if (jQueryInstance) {\n        jQueryInstance(element).css(styleName, styleValue)\n      } else {\n        styleName = styleName.replace(/-(\\w)/g, (all, letter) => letter.toUpperCase())\n        const previousStyle = element.style[styleName]\n        element.style[styleName] = styleValue\n        if (styleValue !== previousStyle && element.style[styleName] === previousStyle && !isNaN(styleValue)) {\n          element.style[styleName] = styleValue + 'px'\n        }\n      }\n    })\n  }\n}\n","\nimport {\n    domData, registerEventHandler, ieVersion, safeSetTimeout, options,\n    arrayForEach, tagNameLower\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n  BindingHandler\n} from 'tko.bind'\n\nvar parseVersion, operaVersion, safariVersion, firefoxVersion\n\n\n/**\n * TextInput binding handler for modern browsers (legacy below).\n * @extends BindingHandler\n */\nclass TextInput extends BindingHandler {\n  get aliases () { return 'textinput' }\n\n  constructor (...args) {\n    super(...args)\n    this.previousElementValue = this.$element.value\n\n    if (options.debug && this.constructor._forceUpdateOn) {\n      // Provide a way for tests to specify exactly which events are bound\n      arrayForEach(this.constructor._forceUpdateOn, (eventName) => {\n        if (eventName.slice(0, 5) === 'after') {\n          this.addEventListener(eventName.slice(5), 'deferUpdateModel')\n        } else {\n          this.addEventListener(eventName, 'updateModel')\n        }\n      })\n    }\n\n    for (const eventName of this.eventsIndicatingSyncValueChange()) {\n      this.addEventListener(eventName, 'updateModel')\n    }\n    for (const eventName of this.eventsIndicatingDeferValueChange()) {\n      this.addEventListener(eventName, 'deferUpdateModel')\n    }\n    this.computed('updateView')\n  }\n\n  eventsIndicatingSyncValueChange () {\n    // input: Default, modern handler\n    // change: Catch programmatic updates of the value that fire this event.\n    // blur: To deal with browsers that don't notify any kind of event for some changes (IE, Safari, etc.)\n    return ['input', 'change', 'blur']\n  }\n\n  eventsIndicatingDeferValueChange () {\n    return []\n  }\n\n  updateModel (event) {\n    const element = this.$element\n    clearTimeout(this.timeoutHandle)\n    this.elementValueBeforeEvent = this.timeoutHandle = undefined\n    const elementValue = element.value\n    if (this.previousElementValue !== elementValue) {\n              // Provide a way for tests to know exactly which event was processed\n      if (options.debug && event) {\n        element._ko_textInputProcessedEvent = event.type\n      }\n      this.previousElementValue = elementValue\n      this.value = elementValue\n    }\n  }\n\n  deferUpdateModel (event) {\n    const element = this.$element\n    if (!this.timeoutHandle) {\n      // The elementValueBeforeEvent variable is set *only* during the brief gap between an\n      // event firing and the updateModel function running. This allows us to ignore model\n      // updates that are from the previous state of the element, usually due to techniques\n      // such as rateLimit. Such updates, if not ignored, can cause keystrokes to be lost.\n      this.elementValueBeforeEvent = element.value\n      const handler = options.debug ? this.updateModel.bind(this, { type: event.type }) : this.updateModel\n      this.timeoutHandle = safeSetTimeout(handler, 4)\n    }\n  }\n\n  updateView () {\n    let modelValue = unwrap(this.value)\n    if (modelValue === null || modelValue === undefined) {\n      modelValue = ''\n    }\n    if (this.elementValueBeforeEvent !== undefined\n               && modelValue === this.elementValueBeforeEvent) {\n      setTimeout(this.updateView.bind(this), 4)\n    } else if (this.$element.value !== modelValue) {\n      // Update the element only if the element and model are different. On some browsers, updating the value\n      // will move the cursor to the end of the input, which would be bad while the user is typing.\n      this.previousElementValue = modelValue // Make sure we ignore events (propertychange) that result from updating the value\n      this.$element.value = modelValue\n      this.previousElementValue = this.$element.value // In case the browser changes the value (see #2281)\n    }\n  }\n}\n\n/**\n * Legacy Input Classes, below\n */\nclass TextInputIE extends TextInput {\n  constructor (...args) {\n    super(...args)\n\n    if (ieVersion < 11) {\n      // Internet Explorer <= 8 doesn't support the 'input' event, but does include 'propertychange' that fires whenever\n      // any property of an element changes. Unlike 'input', it also fires if a property is changed from JavaScript code,\n      // but that's an acceptable compromise for this binding. IE 9 and 10 support 'input', but since they don't always\n      // fire it when using autocomplete, we'll use 'propertychange' for them also.\n      this.addEventListener('propertychange', event =>\n        event.propertyName === 'value' && this.updateModel(event)\n      )\n    }\n\n    if (ieVersion >= 8 && ieVersion < 10) {\n      this.watchForSelectionChangeEvent()\n      this.addEventListener('dragend', 'deferUpdateModel')\n    }\n  }\n\n  eventsIndicatingSyncValueChange () {\n    // keypress: All versions (including 11) of Internet Explorer have a bug that they don't generate an input or propertychange event when ESC is pressed\n    return [...super.eventsIndicatingValueChange(), 'keypress']\n  }\n\n  // IE 8 and 9 have bugs that prevent the normal events from firing when the value changes.\n  // But it does fire the 'selectionchange' event on many of those, presumably because the\n  // cursor is moving and that counts as the selection changing. The 'selectionchange' event is\n  // fired at the document level only and doesn't directly indicate which element changed. We\n  // set up just one event handler for the document and use 'activeElement' to determine which\n  // element was changed.\n  selectionChangeHandler (event) {\n      const target = this.activeElement\n      const handler = target && domData.get(target, selectionChangeHandlerName)\n      if (handler) { handler(event) }\n  }\n\n  watchForSelectionChangeEvent (element, ieUpdateModel) {\n    const ownerDoc = element.ownerDocument;\n    if (!domData.get(ownerDoc, selectionChangeRegisteredName)) {\n        domData.set(ownerDoc, selectionChangeRegisteredName, true)\n        registerEventHandler(ownerDoc, 'selectionchange', this.selectionChangeHandler.bind(ownerDoc))\n    }\n    domData.set(element, selectionChangeHandlerName, handler)\n  }\n}\n\n\n// IE 8 and 9 have bugs that prevent the normal events from firing when the value changes.\n// But it does fire the 'selectionchange' event on many of those, presumably because the\n// cursor is moving and that counts as the selection changing. The 'selectionchange' event is\n// fired at the document level only and doesn't directly indicate which element changed. We\n// set up just one event handler for the document and use 'activeElement' to determine which\n// element was changed.\nclass TextInputIE9 extends TextInputIE {\n  updateModel (...args) {\n    // IE9 will mess up the DOM if you handle events synchronously which results in DOM changes (such as other bindings);\n    // so we'll make sure all updates are asynchronous\n    this.deferUpdateModel(...args)\n  }\n}\n\n\nclass TextInputIE8 extends TextInputIE {\n  eventsIndicatingValueChange () {\n    // IE 8 has a bug where it fails to fire 'propertychange' on the first update following a value change from\n    // JavaScript code. It also doesn't fire if you clear the entire value. To fix this, we bind to the following\n    // events too.\n    // keypress: All versions (including 11) of Internet Explorer have a bug that they don't generate an input or propertychange event when ESC is pressed\n    // keyup: A single keystoke\n    // keydown: First character when a key is held down\n    return [...super.eventsIndicatingValueChange(), 'keyup', 'keydown']\n  }\n}\n\n\n// Safari <5 doesn't fire the 'input' event for <textarea> elements (it does fire 'textInput'\n// but only when typing). So we'll just catch as much as we can with keydown, cut, and paste.\nclass TextInputLegacySafari extends TextInput {\n  eventsIndicatingDeferValueChange () {\n    return ['keydown', 'paste', 'cut']\n  }\n}\n\n\nclass TextInputLegacyOpera extends TextInput {\n  eventsIndicatingDeferValueChange () {\n    // Opera 10 doesn't always fire the 'input' event for cut, paste, undo & drop operations.\n    // We can try to catch some of those using 'keydown'.\n    return ['keydown']\n  }\n}\n\n\nclass TextInputLegacyFirefox extends TextInput {\n  eventsIndicatingValueChange () {\n    return [\n      ...super.eventsIndicatingSyncValueChange(),\n      // Firefox <= 3.6 doesn't fire the 'input' event when text is filled in through autocomplete\n      'DOMAutoComplete',\n      // Firefox <=3.5 doesn't fire the 'input' event when text is dropped into the input.\n      'dragdrop', // < 3.5\n      'drop' // 3.5\n    ]\n  }\n}\n\n\nconst w = options.global // window / global\nif (w.navigator) {\n  const parseVersion = (matches) => matches && parseFloat(matches[1])\n  const userAgent = w.navigator.userAgent\n  const isChrome = userAgent.match(/Chrome\\/([^ ]+)/)\n  // Detect various browser versions because some old versions don't fully support the 'input' event\n  operaVersion = w.opera && w.opera.version && parseInt(w.opera.version())\n  safariVersion = parseVersion(userAgent.match(/Version\\/([^ ]+) Safari/))\n  firefoxVersion = parseVersion(userAgent.match(/Firefox\\/([^ ]*)/))\n}\n\n\nexport const textInput =\n  ieVersion === 8 ? TextInputIE8\n  : ieVersion === 9 ? TextInputIE9\n  : ieVersion ? TextInputIE\n  : safariVersion && safariVersion < 5 ? TextInputLegacySafari\n  : operaVersion < 11 ? TextInputLegacyOpera\n  : firefoxVersion && firefoxVersion < 4 ? TextInputLegacyFirefox\n  : TextInput\n","\nimport {\n    setElementName\n} from 'tko.utils'\n\nexport var uniqueName = {\n  init: function (element, valueAccessor) {\n    if (valueAccessor()) {\n      var name = 'ko_unique_' + (++uniqueName.currentIndex)\n      setElementName(element, name)\n    }\n  },\n  currentIndex: 0\n}\n","\nimport {\n    arrayPushAll, arrayGetDistinctValues, ieVersion, arrayIndexOf,\n    stringStartsWith, safeSetTimeout,\n    tagNameLower, triggerEvent, arrayForEach, selectExtensions\n} from 'tko.utils'\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable'\n\nimport {\n    computed\n} from 'tko.computed'\n\nimport {\n    applyBindingAccessorsToNode, BindingHandler\n} from 'tko.bind'\n\nexport class value extends BindingHandler {\n  static get after () { return ['options', 'foreach', 'template'] }\n\n  constructor (...args) {\n    super(...args)\n\n    // If the value binding is placed on a radio/checkbox, then just pass through to checkedValue and quit\n    if (this.isCheckboxOrRadio) {\n      applyBindingAccessorsToNode(this.$element,\n        { checkedValue: this.valueAccessor })\n      return\n    }\n\n    this.propertyChangedFired = false\n    this.elementValueBeforeEvent = null\n\n    if (this.ieAutoCompleteHackNeeded) {\n      this.addEventListener('propertyChange', () => this.propertyChangedFired = true)\n      this.addEventListener('focus', () => this.propertyChangedFired = false)\n      this.addEventListner('blur', () => this.propertyChangeFired &&\n        this.valueUpdateHandler())\n    }\n\n    arrayForEach(this.eventsToCatch, eventName => this.registerEvent(eventName))\n\n    if (this.isInput && this.$element.type === 'file') {\n      this.updateFromModel = this.updateFromModelForFile\n    } else {\n      this.updateFromModel = this.updateFromModelForValue\n    }\n\n    this.computed('updateFromModel')\n  }\n\n  get eventsToCatch () {\n    const requestedEventsToCatch = this.allBindings.get('valueUpdate')\n    const requestedEventsArray = typeof requestedEventsToCatch === 'string' ?\n      [requestedEventsToCatch] : requestedEventsToCatch || []\n    return [...new Set(['change', ...requestedEventsArray])]\n  }\n\n  get isInput () {\n    return tagNameLower(this.$element) === 'input'\n  }\n\n  get isCheckboxOrRadio () {\n    const e = this.$element\n    return this.isInput && (e.type == 'checkbox' || e.type == 'radio')\n  }\n\n  // Workaround for https://github.com/SteveSanderson/knockout/issues/122\n  // IE doesn't fire \"change\" events on textboxes if the user selects a value from its autocomplete list\n  get ieAutoCompleteHackNeeded () {\n    return ieVersion && isInputElement &&\n      this.$element.type == 'text' && this.$element.autocomplete != 'off' &&\n      (!this.$element.form || this.$element.form.autocomplete != 'off')\n  }\n\n  valueUpdateHandler () {\n    this.elementValueBeforeEvent = null\n    this.propertyChangedFired = false\n    this.value = selectExtensions.readValue(this.$element)\n  }\n\n  registerEvent (eventName) {\n    // The syntax \"after<eventname>\" means \"run the handler asynchronously after the event\"\n    // This is useful, for example, to catch \"keydown\" events after the browser has updated the control\n    // (otherwise, selectExtensions.readValue(this) will receive the control's value *before* the key event)\n    var handler = this.valueUpdateHandler.bind(this)\n    if (stringStartsWith(eventName, 'after')) {\n      handler = () => {\n        // The elementValueBeforeEvent variable is non-null *only* during the brief gap between\n        // a keyX event firing and the valueUpdateHandler running, which is scheduled to happen\n        // at the earliest asynchronous opportunity. We store this temporary information so that\n        // if, between keyX and valueUpdateHandler, the underlying model value changes separately,\n        // we can overwrite that model value change with the value the user just typed. Otherwise,\n        // techniques like rateLimit can trigger model changes at critical moments that will\n        // override the user's inputs, causing keystrokes to be lost.\n        this.elementValueBeforeEvent = selectExtensions.readValue(this.$element)\n        safeSetTimeout(this.valueUpdateHandler.bind(this), 0)\n      }\n      eventName = eventName.substring(5 /* 'after'.length */)\n    }\n    this.addEventListener(eventName, handler)\n  }\n\n  updateFromModelForFile () {\n    // For file input elements, can only write the empty string\n    var newValue = unwrap(this.value)\n    if (newValue === null || newValue === undefined || newValue === '') {\n      this.$element.value = ''\n    } else {\n      dependencyDetection.ignore(this.valueUpdateHandler, this)   // reset the model to match the element\n    }\n  }\n\n  updateFromModelForValue () {\n    const element = this.$element\n    var newValue = unwrap(this.value)\n    var elementValue = selectExtensions.readValue(element)\n\n    if (this.elementValueBeforeEvent !== null && newValue === this.elementValueBeforeEvent) {\n      safeSetTimeout(this.updateFromModel.bind(this), 0)\n      return\n    }\n\n    if (newValue === elementValue && elementValue !== undefined) { return }\n\n    if (tagNameLower(element) === 'select') {\n      const allowUnset = this.allBindings.get('valueAllowUnset')\n      selectExtensions.writeValue(element, newValue, allowUnset)\n\n      if (!allowUnset && newValue !== selectExtensions.readValue(element)) {\n       // If you try to set a model value that can't be represented in an already-populated dropdown, reject that change,\n       // because you're not allowed to have a model value that disagrees with a visible UI selection.\n        dependencyDetection.ignore(this.valueUpdateHandler, this)\n      }\n    } else {\n      selectExtensions.writeValue(element, newValue)\n    }\n  }\n}\n","import {\n    unwrap\n} from 'tko.observable'\n\nexport var visible = {\n  update: function (element, valueAccessor) {\n    var value = unwrap(valueAccessor())\n    var isCurrentlyVisible = !(element.style.display === 'none')\n    if (value && !isCurrentlyVisible) {\n      element.style.display = ''\n    } else if (!value && isCurrentlyVisible) {\n      element.style.display = 'none'\n    }\n  }\n}\n\nexport var hidden = {\n  update: function (element, valueAccessor) {\n    visible.update.call(this, element, () => !unwrap(valueAccessor()))\n  }\n}\n","import {\n    cloneNodes, virtualElements, cleanNode, domData\n} from 'tko.utils'\n\nimport {\n    dependencyDetection, observable\n} from 'tko.observable'\n\nimport {\n    applyBindingsToDescendants, AsyncBindingHandler\n} from 'tko.bind'\n\n/**\n * Create a DOMbinding that controls DOM nodes presence\n *\n * Covers e.g.\n *\n * 1. DOM Nodes contents\n *\n * <div data-bind='if: x'>\n * <!-- else --> ... an optional 'if'\n * </div>\n *\n * 2. Virtual elements\n *\n * <!-- ko if: x -->\n * <!-- else -->\n * <!-- /ko -->\n *\n * 3. Else binding\n * <div data-bind='if: x'></div>\n * <div data-bind='else'></div>\n *\n * Requires `renderStatus` and `get bindingContext` to be overloaded,\n * and this.computed('render') must be called in the child constructor.\n */\nexport default class ConditionalBindingHandler extends AsyncBindingHandler {\n  constructor (params) {\n    super(params)\n    this.hasElse = this.detectElse(this.$element)\n    const elseChainSatisfied = this.completesElseChain = observable()\n    domData.set(this.$element, 'conditional', { elseChainSatisfied })\n  }\n\n  getIfElseNodes () {\n    if (this.ifElseNodes) { return this.ifElseNodes }\n    if (dependencyDetection.getDependenciesCount() || this.hasElse) {\n      return this.cloneIfElseNodes(this.$element, this.hasElse)\n    }\n  }\n\n  render () {\n    const isFirstRender = !this.ifElseNodes\n    const {shouldDisplay} = this.renderStatus()\n\n    // Save the nodes before we possibly remove them from the DOM.\n    this.ifElseNodes = this.getIfElseNodes() || {}\n\n    if (shouldDisplay) {\n      const useOriginalNodes = isFirstRender && !this.hasElse\n      this.renderAndApplyBindings(this.ifElseNodes.ifNodes, useOriginalNodes)\n    } else if (this.hasElse) {\n      this.renderAndApplyBindings(this.ifElseNodes.elseNodes)\n    } else {\n      virtualElements.emptyNode(this.$element)\n    }\n  }\n\n  async renderAndApplyBindings (nodes, useOriginalNodes) {\n    if (!useOriginalNodes) {\n      virtualElements.setDomNodeChildren(this.$element, cloneNodes(nodes))\n    }\n    const bound = await applyBindingsToDescendants(this.bindingContext, this.$element)\n    this.completeBinding(bound)\n  }\n\n  /**\n   * This may be truthy for the `else` binding.\n   */\n  get elseChainIsAlreadySatisfied () { return false }\n\n  /**\n   * Test a node for whether it represents an 'else' condition.\n   * @param  {HTMLElement}  node to be tested\n   * @return {Boolean}      true when\n   *\n   * Matches <!-- else -->\n   */\n  isElseNode (node) {\n    return node.nodeType === 8 &&\n          node.nodeValue.trim().toLowerCase() === 'else'\n  }\n\n  detectElse (element) {\n    var children = virtualElements.childNodes(element)\n    for (var i = 0, j = children.length; i < j; ++i) {\n      if (this.isElseNode(children[i])) { return true }\n    }\n    return false\n  }\n\n  /**\n   * Clone the nodes, returning `ifNodes`, `elseNodes`\n   * @param  {HTMLElement} element The nodes to be cloned\n   * @param  {boolean}    hasElse short-circuit to speed up the inner-loop.\n   * @return {object}         Containing the cloned nodes.\n   */\n  cloneIfElseNodes (element, hasElse) {\n    const children = virtualElements.childNodes(element)\n    const ifNodes = []\n    const elseNodes = []\n    let target = ifNodes\n\n    for (var i = 0, j = children.length; i < j; ++i) {\n      if (hasElse && this.isElseNode(children[i])) {\n        target = elseNodes\n        hasElse = false\n      } else {\n        target.push(cleanNode(children[i].cloneNode(true)))\n      }\n    }\n\n    return { ifNodes, elseNodes }\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n","\nimport {\n    unwrap\n} from 'tko.observable'\n\nimport ConditionalBindingHandler from './ConditionalBindingHandler'\n\n/**\n * For the `if:` binding.\n */\nexport class IfBindingHandler extends ConditionalBindingHandler {\n  constructor (...args) {\n    super(...args)\n    this.ifCondition = this.computed(() => !!unwrap(this.value))\n    this.computed('render')\n  }\n\n  shouldDisplayIf () {\n    return this.ifCondition()\n  }\n\n  get bindingContext () {\n    return this.ifCondition.isActive()\n      ? this.$context.extend(() => {\n        // Ensure that this context is dependant upon the conditional, so the\n        // order of binding application is: conditional before its children.\n        // See https://github.com/knockout/kn\n        // ockout/pull/2226\n        this.ifCondition()\n        return null\n      })\n      : this.$context\n  }\n\n  renderStatus () {\n    let shouldDisplay = this.shouldDisplayIf()\n\n    if (this.elseChainIsAlreadySatisfied) {\n      shouldDisplay = false\n      // needsRefresh = isFirstRender || this.didDisplayOnLastUpdate FIXME\n      this.completesElseChain(true)\n    } else {\n      this.completesElseChain(shouldDisplay)\n    }\n    return {shouldDisplay}\n  }\n}\n\nexport class UnlessBindingHandler extends IfBindingHandler {\n  shouldDisplayIf () { return !super.shouldDisplayIf() }\n}\n","\nimport {\n  options\n} from 'tko.utils'\n\nimport {\n  unwrap\n} from 'tko.observable'\n\nimport ConditionalBindingHandler from './ConditionalBindingHandler'\n\n/**\n * The following fails somewhere in the `limit` functions of Observables i.e.\n * it's an issue related to async/deferUpdates.\n */\nexport class WithBindingHandler extends ConditionalBindingHandler {\n  constructor (...args) {\n    super(...args)\n    this.asOption = this.allBindings.get('as')\n\n    // If given `as`, reduce the condition to a boolean, so it does not\n    // change & refresh when the value is updated.\n    const conditionalFn = this.asOption && !options.createChildContextWithAs\n      ? () => Boolean(unwrap(this.value)) : () => unwrap(this.value)\n    this.conditional = this.computed(conditionalFn)\n\n    this.computed('render')\n  }\n\n  get bindingContext () {\n    if (!this.asOption) {\n      return this.$context.createChildContext(this.valueAccessor)\n    }\n    return options.createChildContextWithAs\n      ? this.$context.createChildContext(this.value, this.asOption)\n      : this.$context.extend({[this.asOption]: this.value})\n  }\n\n  renderStatus () {\n    const shouldDisplay = Boolean(this.conditional())\n    return { shouldDisplay }\n  }\n}\n","import {\n    virtualElements, domData\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nimport {\n  IfBindingHandler\n} from './ifUnless.js'\n\n/**\n * The `else` binding\n * (not to be mistaken for `<!-- else -->` inside if bindings.\n */\nexport class ElseBindingHandler extends IfBindingHandler {\n  shouldDisplayIf () {\n    return super.shouldDisplayIf() || this.value === undefined\n  }\n\n  /**\n   * Return any conditional that precedes the given node.\n   * @return {object}      { elseChainSatisfied: observable }\n   */\n  get elseChainIsAlreadySatisfied () {\n    if (!this._elseChain) { this._elseChain = this.readElseChain() }\n    return unwrap(this._elseChain.elseChainSatisfied)\n  }\n\n  readElseChain () {\n    let node = this.$element\n    do {\n      node = node.previousSibling\n    } while (node && node.nodeType !== 1 && node.nodeType !== 8)\n\n    if (!node) { return false }\n\n    if (node.nodeType === 8) {\n      node = virtualElements.previousSibling(node)\n    }\n\n    return domData.get(node, 'conditional') || {}\n  }\n}\n","import { ForEachBinding } from './foreach.js'\n\nexport var bindings = {\n  foreach: ForEachBinding\n}\n\n// By default, foreach will be async.\nForEachBinding.setSync(false)\n","//\n// Binding Handler for Components\n//\n\nimport {\n  virtualElements, makeArray, cloneNodes\n} from 'tko.utils'\n\nimport {\n  unwrap, isObservable\n} from 'tko.observable'\n\nimport {\n  DescendantBindingHandler, applyBindingsToDescendants\n} from 'tko.bind'\n\nimport {\n  jsxToNode, maybeJsx\n} from 'tko.utils.jsx'\n\nimport {\n  NativeProvider\n} from 'tko.provider.native'\n\nimport {LifeCycle} from 'tko.lifecycle'\n\nimport registry from 'tko.utils.component'\n\nvar componentLoadingOperationUniqueId = 0\n\nexport default class ComponentBinding extends DescendantBindingHandler {\n  constructor (params) {\n    super(params)\n    this.originalChildNodes = makeArray(\n      virtualElements.childNodes(this.$element)\n    )\n    this.computed('computeApplyComponent')\n  }\n\n  setDomNodesFromJsx (jsx, element) {\n    const jsxArray = Array.isArray(jsx) ? jsx : [jsx]\n    const domNodeChildren = jsxArray.map(j => jsxToNode(j))\n    virtualElements.setDomNodeChildren(element, domNodeChildren)\n  }\n\n  cloneTemplateIntoElement (componentName, template, element) {\n    if (!template) {\n      throw new Error('Component \\'' + componentName + '\\' has no template')\n    }\n\n    if (maybeJsx(template)) {\n      if (isObservable(template)) {\n        this.subscribe(template, jsx => {\n          this.setDomNodesFromJsx(jsx, element)\n          applyBindingsToDescendants(this.childBindingContext, this.$element)\n        })\n      }\n      this.setDomNodesFromJsx(unwrap(template), element)\n    } else {\n      const clonedNodesArray = cloneNodes(template)\n      virtualElements.setDomNodeChildren(element, clonedNodesArray)\n    }\n  }\n\n  createViewModel (componentDefinition, element, originalChildNodes, componentParams) {\n    const componentViewModelFactory = componentDefinition.createViewModel\n    return componentViewModelFactory\n      ? componentViewModelFactory.call(componentDefinition, componentParams, { element: element, templateNodes: originalChildNodes })\n      : componentParams // Template-only component\n  }\n\n  /**\n   * Return the $componentTemplateSlotNodes for the given template\n   * @param {HTMLElement|jsx} template\n   */\n  makeTemplateSlotNodes (originalChildNodes) {\n    return Object.assign({}, ...this.genSlotsByName(originalChildNodes))\n  }\n\n  /**\n   * Iterate over the templateNodes, yielding each '<element slot=name>'\n   * as an object * of {name: element}.\n   * @param {HTMLElement} templateNodes\n   */\n  * genSlotsByName (templateNodes) {\n    for (const node of templateNodes) {\n      if (node.nodeType !== 1) { continue }\n      const slotName = node.getAttribute('slot')\n      if (!slotName) { continue }\n      yield {[slotName]: node}\n    }\n  }\n\n  computeApplyComponent () {\n    const value = unwrap(this.value)\n    let componentName\n    let componentParams\n\n    if (typeof value === 'string') {\n      componentName = value\n    } else {\n      componentName = unwrap(value.name)\n      componentParams = NativeProvider.getNodeValues(this.$element) ||\n        unwrap(value.params)\n    }\n\n    this.latestComponentName = componentName\n\n    if (!componentName) {\n      throw new Error('No component name specified')\n    }\n\n    this.loadingOperationId = this.currentLoadingOperationId = ++componentLoadingOperationUniqueId\n    registry.get(componentName, (defn) => this.applyComponentDefinition(componentName, componentParams, defn))\n  }\n\n  applyComponentDefinition (componentName, componentParams, componentDefinition) {\n    // If this is not the current load operation for this element, ignore it.\n    if (this.currentLoadingOperationId !== this.loadingOperationId ||\n        this.latestComponentName !== componentName) { return }\n\n    // Clean up previous state\n    this.cleanUpState()\n\n    const element = this.$element\n\n    // Instantiate and bind new component. Implicitly this cleans any old DOM nodes.\n    if (!componentDefinition) {\n      throw new Error('Unknown component \\'' + componentName + '\\'')\n    }\n\n    if (componentDefinition.template) {\n      this.cloneTemplateIntoElement(componentName, componentDefinition.template, element)\n    }\n\n    const componentViewModel = this.createViewModel(componentDefinition, element, this.originalChildNodes, componentParams)\n\n    const viewTemplate = componentViewModel && componentViewModel.template\n\n    if (!viewTemplate && !componentDefinition.template) {\n      throw new Error('Component \\'' + componentName + '\\' has no template')\n    }\n\n    if (!componentDefinition.template) {\n      this.cloneTemplateIntoElement(componentName, viewTemplate, element)\n    }\n\n    if (componentViewModel instanceof LifeCycle) {\n      componentViewModel.anchorTo(this.$element)\n    }\n\n    const ctxExtender = (ctx) => Object.assign(ctx, {\n      $component: componentViewModel,\n      $componentTemplateNodes: this.originalChildNodes,\n      $componentTemplateSlotNodes: this.makeTemplateSlotNodes(\n        this.originalChildNodes)\n    })\n\n    this.childBindingContext = this.$context.createChildContext(componentViewModel, /* dataItemAlias */ undefined, ctxExtender)\n    this.currentViewModel = componentViewModel\n\n    const onBinding = this.onBindingComplete.bind(this, componentViewModel)\n    this.applyBindingsToDescendants(this.childBindingContext, onBinding)\n  }\n\n  onBindingComplete (componentViewModel, bindingResult) {\n    if (componentViewModel && componentViewModel.koDescendantsComplete) {\n      componentViewModel.koDescendantsComplete(this.$element)\n    }\n    this.completeBinding(bindingResult)\n  }\n\n  cleanUpState () {\n    const currentView = this.currentViewModel\n    const currentViewDispose = currentView && currentView.dispose\n    if (typeof currentViewDispose === 'function') {\n      currentViewDispose.call(currentView)\n    }\n    this.currentViewModel = null\n    // Any in-flight loading operation is no longer relevant, so make sure we ignore its completion\n    this.currentLoadingOperationId = null\n  }\n\n  dispose () {\n    this.cleanUpState()\n    super.dispose()\n  }\n\n  get controlsDescendants () { return true }\n  static get allowVirtualElements () { return true }\n}\n","/**\n * Slots work as follows (you'll note a similarity to vue).\n *\n * Component template definitions have <slot name='abc'> tags.\n *\n *    <template id='custom-component-template'>\n *      <slot name='abc'>\n *\n * Component use these slots with e.g.\n *\n *    <custom-component>\n *       <template slot='abc'>\n *\n * When the component template is rendered, the `slot` binding will map\n * every binding to its respective slot.\n */\nimport {\n  virtualElements\n} from 'tko.utils'\n\nimport {\n  cloneNodeFromOriginal\n} from 'tko.utils.jsx'\n\nimport {\n  DescendantBindingHandler, contextFor\n} from 'tko.bind'\n\n/**\n * SlotBinding replaces a slot with\n */\nexport default class SlotBinding extends DescendantBindingHandler {\n  constructor (...params) {\n    super(...params)\n    const slotNode = this.getSlot(this.value)\n    const $slotContext = contextFor(slotNode)\n\n    const childContext = this.$context.extend({\n      $slotContext,\n      $slotData: $slotContext && $slotContext.$data\n    })\n\n    this.replaceSlotWithNode(this.$element, slotNode)\n\n    this.applyBindingsToDescendants(childContext)\n  }\n\n  /**\n   *\n   * @param {HTMLElement} nodeToReplace\n   * @param {HTMLElement}} slotValue\n   */\n  replaceSlotWithNode (nodeInComponentTemplate, slotNode) {\n    const nodesForSlot = cloneNodeFromOriginal(slotNode)\n    virtualElements.setDomNodeChildren(nodeInComponentTemplate, nodesForSlot)\n  }\n\n  getSlot (slotName) {\n    const {$componentTemplateSlotNodes} = this.$context\n\n    if (!slotName) {\n      return $componentTemplateSlotNodes[''] ||\n        [...this.$context.$componentTemplateNodes]\n          .filter(n => !n.getAttribute || !n.getAttribute('slot'))\n    }\n\n    return $componentTemplateSlotNodes[slotName]\n  }\n\n  static get allowVirtualElements () { return true }\n}\n","\nimport {\n    unwrap, toJS\n} from 'tko.observable'\n\nvar sproto = String.prototype\n\nvar filters = {}\n\n// Convert value to uppercase\nfilters.uppercase = function (value) {\n  return sproto.toUpperCase.call(unwrap(value))\n}\n\n// Convert value to lowercase\nfilters.lowercase = function (value) {\n  return sproto.toLowerCase.call(unwrap(value))\n}\n\n// Return default value if the input value is empty or null\nfilters['default'] = function (value, defaultValue) {\n  value = unwrap(value)\n  if (typeof value === 'function') {\n    return value\n  }\n  if (typeof value === 'string') {\n    return sproto.trim.call(value) === '' ? defaultValue : value\n  }\n  return value == null || value.length == 0 ? defaultValue : value\n}\n\n// Return the value with the search string replaced with the replacement string\nfilters.replace = function (value, search, replace) {\n  return sproto.replace.call(unwrap(value), search, replace)\n}\n\nfilters.fit = function (value, length, replacement, trimWhere) {\n  value = unwrap(value)\n  if (length && ('' + value).length > length) {\n    replacement = '' + (replacement || '...')\n    length = length - replacement.length\n    value = '' + value\n    switch (trimWhere) {\n      case 'left':\n        return replacement + value.slice(-length)\n      case 'middle':\n        var leftLen = Math.ceil(length / 2)\n        return value.substr(0, leftLen) + replacement + value.slice(leftLen - length)\n      default:\n        return value.substr(0, length) + replacement\n    }\n  } else {\n    return value\n  }\n}\n\n// Convert a model object to JSON\nfilters.json = function (rootObject, space, replacer) {\n       // replacer and space are optional\n  return JSON.stringify(toJS(rootObject), replacer, space)\n}\n\n// Format a number using the browser's toLocaleString\nfilters.number = function (value) {\n  return (+unwrap(value)).toLocaleString()\n}\n\n// Export the filters object for general access\nexport { filters }\n","import { Builder } from 'tko.builder'\n\nimport { VirtualProvider } from 'tko.provider.virtual'\nimport { DataBindProvider } from 'tko.provider.databind'\nimport { ComponentProvider } from 'tko.provider.component'\nimport { AttributeProvider } from 'tko.provider.attr'\nimport { MultiProvider } from 'tko.provider.multi'\nimport {\n  TextMustacheProvider, AttributeMustacheProvider\n} from 'tko.provider.mustache'\nimport {\n  NativeProvider\n} from 'tko.provider.native'\n\nimport { bindings as coreBindings } from 'tko.binding.core'\nimport { bindings as templateBindings } from 'tko.binding.template'\nimport { bindings as ifBindings } from 'tko.binding.if'\nimport { bindings as foreachBindings } from 'tko.binding.foreach'\nimport { bindings as componentBindings } from 'tko.binding.component'\n\nimport { filters } from 'tko.filter.punches'\n\nimport components from 'tko.utils.component'\n\nconst builder = new Builder({\n  filters,\n  provider: new MultiProvider({\n    providers: [\n      new AttributeMustacheProvider(),\n      new TextMustacheProvider(),\n      new ComponentProvider(),\n      new DataBindProvider(),\n      new VirtualProvider(),\n      new AttributeProvider(),\n      new NativeProvider()\n    ]\n  }),\n  bindings: [\n    coreBindings,\n    templateBindings,\n    ifBindings,\n    foreachBindings,\n    componentBindings,\n    { each: foreachBindings.foreach }\n  ]\n})\n\nexport default builder.create({\n  version: '{{VERSION}}',\n  components,\n  Component: components.ComponentABC\n})\n","\nimport {attr} from './attr.js'\nimport {checked, checkedValue} from './checked.js'\nimport {click} from './click.js'\nimport {css} from './css.js'\nimport descendantsComplete from './descendantsComplete'\nimport {enable, disable} from './enableDisable.js'\nimport {eventHandler, onHandler} from './event.js'\nimport {hasfocus} from './hasfocus.js'\nimport {html} from './html.js'\nimport $let from './let.js'\nimport {options} from './options.js'\nimport {selectedOptions} from './selectedOptions.js'\nimport {style} from './style.js'\nimport {submit} from './submit.js'\nimport {text} from './text.js'\nimport {textInput} from './textInput.js'\nimport {uniqueName} from './uniqueName.js'\nimport {value} from './value.js'\nimport {visible, hidden} from './visible.js'\nimport {using} from './using.js'\n\nexport var bindings = {\n  attr,\n  checked,\n  checkedValue,\n  click,\n  css,\n  'class': css,\n  descendantsComplete,\n  enable,\n  'event': eventHandler,\n  disable,\n  hasfocus,\n  hasFocus: hasfocus,\n  hidden,\n  html,\n  'let': $let,\n  on: onHandler,\n  options,\n  selectedOptions,\n  style,\n  submit,\n  text,\n  textInput,\n  textinput: textInput,\n  uniqueName,\n  using,\n  value,\n  visible\n}\n","\nimport {\n  setElementName, objectForEach\n} from 'tko.utils'\n\nimport {\n  unwrap\n} from 'tko.observable'\n\nexport var attr = {\n  update: function (element, valueAccessor, allBindings) {\n    var value = unwrap(valueAccessor()) || {}\n    objectForEach(value, function (attrName, attrValue) {\n      attrValue = unwrap(attrValue)\n\n      // Find the namespace of this attribute, if any.\n      var prefixLen = attrName.indexOf(':')\n      var namespace = prefixLen > 0 && element.lookupNamespaceURI(attrName.substr(0, prefixLen))\n\n      // To cover cases like \"attr: { checked:someProp }\", we want to remove the attribute entirely\n      // when someProp is a \"no value\"-like value (strictly null, false, or undefined)\n      // (because the absence of the \"checked\" attr is how to mark an element as not checked, etc.)\n      const toRemove = attrValue === false || attrValue === null || attrValue === undefined\n\n      if (toRemove) {\n        if (namespace) {\n          element.removeAttributeNS(namespace, attrName)\n        } else {\n          element.removeAttribute(attrName)\n        }\n      } else {\n        attrValue = attrValue.toString()\n        if (namespace) {\n          element.setAttributeNS(namespace, attrName, attrValue)\n        } else {\n          element.setAttribute(attrName, attrValue)\n        }\n      }\n\n      // Treat \"name\" specially - although you can think of it as an attribute, it also needs\n      // special handling on older versions of IE (https://github.com/SteveSanderson/knockout/pull/333)\n      // Deliberately being case-sensitive here because XHTML would regard \"Name\" as a different thing\n      // entirely, and there's no strong reason to allow for such casing in HTML.\n      if (attrName === 'name') {\n        setElementName(element, toRemove ? '' : attrValue)\n      }\n    })\n  }\n}\n","\nimport {\n    registerEventHandler, arrayIndexOf, addOrRemoveItem\n} from 'tko.utils'\n\nimport {\n    unwrap, dependencyDetection, isWriteableObservable\n} from 'tko.observable'\n\nimport {\n    computed, pureComputed\n} from 'tko.computed'\n\nexport var checked = {\n  after: ['value', 'attr'],\n  init: function (element, valueAccessor, allBindings) {\n    var checkedValue = pureComputed(function () {\n      // Treat \"value\" like \"checkedValue\" when it is included with \"checked\" binding\n      if (allBindings.has('checkedValue')) {\n        return unwrap(allBindings.get('checkedValue'))\n      } else if (useElementValue) {\n        if (allBindings.has('value')) {\n          return unwrap(allBindings.get('value'))\n        } else {\n          return element.value\n        }\n      }\n    })\n\n    function updateModel () {\n      // This updates the model value from the view value.\n      // It runs in response to DOM events (click) and changes in checkedValue.\n      var isChecked = element.checked,\n        elemValue = checkedValue()\n\n      // When we're first setting up this computed, don't change any model state.\n      if (dependencyDetection.isInitial()) {\n        return\n      }\n\n      // We can ignore unchecked radio buttons, because some other radio\n      // button will be checked, and that one can take care of updating state.\n      // button will be checked, and that one can take care of updating state\n      if (!isChecked && (isRadio || dependencyDetection.getDependenciesCount())) {\n        return\n      }\n\n      var modelValue = dependencyDetection.ignore(valueAccessor)\n      if (valueIsArray) {\n        var writableValue = rawValueIsNonArrayObservable ? modelValue.peek() : modelValue,\n          saveOldValue = oldElemValue\n        oldElemValue = elemValue\n\n        if (saveOldValue !== elemValue) {\n          // When we're responding to the checkedValue changing, and the element is\n          // currently checked, replace the old elem value with the new elem value\n          // in the model array.\n          if (isChecked) {\n            addOrRemoveItem(writableValue, elemValue, true)\n            addOrRemoveItem(writableValue, saveOldValue, false)\n          }\n\n          oldElemValue = elemValue\n        } else {\n          // When we're responding to the user having checked/unchecked a checkbox,\n          // add/remove the element value to the model array.\n          addOrRemoveItem(writableValue, elemValue, isChecked)\n        }\n        if (rawValueIsNonArrayObservable && isWriteableObservable(modelValue)) {\n          modelValue(writableValue)\n        }\n      } else {\n        if (isCheckbox) {\n          if (elemValue === undefined) {\n            elemValue = isChecked\n          } else if (!isChecked) {\n            elemValue = undefined\n          }\n        }\n        valueAccessor(elemValue, {onlyIfChanged: true})\n      }\n    };\n\n    function updateView () {\n            // This updates the view value from the model value.\n            // It runs in response to changes in the bound (checked) value.\n      var modelValue = modelValue = unwrap(valueAccessor())\n      var elemValue = checkedValue()\n\n      if (valueIsArray) {\n                // When a checkbox is bound to an array, being checked represents its value being present in that array\n        element.checked = arrayIndexOf(modelValue, elemValue) >= 0\n        oldElemValue = elemValue\n      } else if (isCheckbox && elemValue === undefined) {\n                                 // When a checkbox is bound to any other value (not an array) and \"checkedValue\" is not defined,\n                                 // being checked represents the value being trueish\n        element.checked = !!modelValue\n      } else {\n        // Otherwise, being checked means that the checkbox or radio button's value corresponds to the model value\n        element.checked = (checkedValue() === modelValue)\n      }\n    };\n\n    var isCheckbox = element.type == 'checkbox',\n      isRadio = element.type == 'radio'\n\n        // Only bind to check boxes and radio buttons\n    if (!isCheckbox && !isRadio) {\n      return\n    }\n\n    var rawValue = valueAccessor(),\n      valueIsArray = isCheckbox && (unwrap(rawValue) instanceof Array),\n      rawValueIsNonArrayObservable = !(valueIsArray && rawValue.push && rawValue.splice),\n      useElementValue = isRadio || valueIsArray,\n      oldElemValue = valueIsArray ? checkedValue() : undefined\n\n        // Set up two computeds to update the binding:\n\n        // The first responds to changes in the checkedValue value and to element clicks\n    computed(updateModel, null, { disposeWhenNodeIsRemoved: element })\n    registerEventHandler(element, 'click', updateModel)\n\n        // The second responds to changes in the model value (the one associated with the checked binding)\n    computed(updateView, null, { disposeWhenNodeIsRemoved: element })\n\n    rawValue = undefined\n  }\n}\n\nexport var checkedValue = {\n  update: function (element, valueAccessor) {\n    element.value = unwrap(valueAccessor())\n  }\n}\n","import {\n    setHtml, parseHtmlFragment, virtualElements\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nexport var html = {\n  init: function () {\n        // Prevent binding on the dynamically-injected HTML (as developers are unlikely to expect that, and it has security implications)\n    return {\n      'controlsDescendantBindings': true\n    }\n  },\n    //\n    // Modify internal, per ko.punches and :\n    //      http://stackoverflow.com/a/15348139\n  update: function (element, valueAccessor) {\n    setHtml(element, valueAccessor())\n  },\n  allowVirtualElements: true\n}\n","\nimport {\n    applyBindingsToDescendants\n} from 'tko.bind'\n\nexport default {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        // Make a modified binding context, with extra properties, and apply it to descendant elements\n    var innerContext = bindingContext['extend'](valueAccessor)\n    applyBindingsToDescendants(innerContext, element)\n\n    return { 'controlsDescendantBindings': true }\n  },\n  allowVirtualElements: true\n}\n","\nimport {\n    arrayForEach, setOptionNodeSelectionState, arrayIndexOf,\n    registerEventHandler, tagNameLower, selectExtensions\n} from 'tko.utils'\n\nimport {\n    unwrap\n} from 'tko.observable'\n\nexport var selectedOptions = {\n  after: ['options', 'foreach'],\n\n  init: function (element, valueAccessor, allBindings) {\n    registerEventHandler(element, 'change', function () {\n      var value = valueAccessor(), valueToWrite = []\n      arrayForEach(element.getElementsByTagName('option'), function (node) {\n        if (node.selected) { valueToWrite.push(selectExtensions.readValue(node)) }\n      })\n      valueAccessor(valueToWrite)\n    })\n  },\n\n  update: function (element, valueAccessor) {\n    if (tagNameLower(element) != 'select') { throw new Error('values binding applies only to SELECT elements') }\n\n    var newValue = unwrap(valueAccessor()),\n      previousScrollTop = element.scrollTop\n\n    if (newValue && typeof newValue.length === 'number') {\n      arrayForEach(element.getElementsByTagName('option'), function (node) {\n        var isSelected = arrayIndexOf(newValue, selectExtensions.readValue(node)) >= 0\n        if (node.selected != isSelected) {      // This check prevents flashing of the select element in IE\n          setOptionNodeSelectionState(node, isSelected)\n        }\n      })\n    }\n\n    element.scrollTop = previousScrollTop\n  }\n}\n","\nimport {\n    registerEventHandler\n} from 'tko.utils'\n\nexport var submit = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    if (typeof valueAccessor() !== 'function') { throw new Error('The value for a submit binding must be a function') }\n    registerEventHandler(element, 'submit', function (event) {\n      var handlerReturnValue\n      var value = valueAccessor()\n      try { handlerReturnValue = value.call(bindingContext['$data'], element) } finally {\n        if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n          if (event.preventDefault) { event.preventDefault() } else { event.returnValue = false }\n        }\n      }\n    })\n  }\n}\n","import {\n    setTextContent\n} from 'tko.utils'\n\nexport var text = {\n  init: function () {\n    // Prevent binding on the dynamically-injected text node (as developers are unlikely to expect that, and it has security implications).\n    // It should also make things faster, as we no longer have to consider whether the text node might be bindable.\n    return { controlsDescendantBindings: true }\n  },\n  update: function (element, valueAccessor) {\n    setTextContent(element, valueAccessor())\n  },\n  allowVirtualElements: true\n}\n","import {\n  applyBindingsToDescendants\n} from 'tko.bind'\n\nexport var using = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var innerContext = bindingContext.createChildContext(valueAccessor)\n    applyBindingsToDescendants(innerContext, element)\n    return { controlsDescendantBindings: true }\n  },\n  allowVirtualElements: true\n}\n","\nimport {\n  TemplateForEachBindingHandler\n} from './foreach'\n\nimport {\n  TemplateBindingHandler\n} from './templating'\n//    'let': letBinding,\n//    template: template,\n\nexport const bindings = {\n  foreach: TemplateForEachBindingHandler,\n  template: TemplateBindingHandler\n}\n\nexport * from './nativeTemplateEngine'\nexport * from './templateEngine'\nexport * from './templating'\nexport * from './templateSources'\n","\nimport {\n  IfBindingHandler,\n  UnlessBindingHandler\n} from './ifUnless'\n\nimport {\n  WithBindingHandler\n} from './with'\n\nimport {\n  ElseBindingHandler\n} from './else'\n\nexport const bindings = {\n  'if': IfBindingHandler,\n  'with': WithBindingHandler,\n  ifnot: UnlessBindingHandler,\n  unless: UnlessBindingHandler,\n  'else': ElseBindingHandler,\n  'elseif': ElseBindingHandler\n}\n","\nimport component from './componentBinding'\nimport slot from './slotBinding'\nexport var bindings = { component, slot }\n"],"names":["length","bind","indexOf","find","Array","from","splice","shift","filter","push","apply","peek","reverse","onError","setTimeout","clearTimeout","Object","prototype","hasOwnProperty","call","constructor","defineProperty","trim","toString","replace","substring","Symbol","classList","match","className","join","nodeType","contains","parentNode","compareDocumentPosition","ownerDocument","documentElement","tagName","toLowerCase","window","HTMLElement","DocumentFragment","domData.get","domData.set","slice","domData.clear","cleanExternalData","childNodes","Error","getElementsByTagName","removeChild","type","useOnlyNativeEvents","on","addEventListener","attachEvent","detachEvent","trigger","document","createEvent","dispatchEvent","initEvent","global","click","fireEvent","createElement","appendChild","cloneNode","insertBefore","name","mergeAttributes","firstChild","nextSibling","setAttribute","selected","style","zoom","width","test","text","nodeValue","setRegularDomNodeChildren","outerHTML","previousSibling","innerHTML","lastChild","content","parseHTML","clean","parentElement","html","virtualElements.emptyNode","virtualElements.setDomNodeChildren","virtualElements.firstChild","virtualElements.nextSibling","createTextNode","data","Math","random","domNode","memoId","taskScheduler","pop","callback","callbackTarget","_id","computed","getDependenciesCount","getDependencies","isInitial","_deferUpdates","limit","tasks.cancel","tasks.schedule","notifySubscribers","setPrototypeOf","init","isDifferent","arguments","valueWillMutate","valueHasMutated","dependencyDetection.registerDependency","value","fn","deferUpdates","_limitBeforeChange","_origNotifySubscribers","_limitChange","observablePrototypes","has","isWriteable","concat","subscribe","hasSubscriptionsForEvent","compareArrays","compareArrayOptions","options","sparse","cacheDiffForKnownOperation","beforeSubscriptionAdd","afterSubscriptionRemove","dispose","get","remove","RegExp","Date","String","Number","Boolean","save","keys","values","charCodeAt","key","substr","evaluatorFunctionTarget","isDisposed","isDirty","isSleeping","haveDependenciesChanged","evaluateImmediate","latestValue","read","write","isStale","isBeingEvaluated","suppressDisposalUntilDisposeWhenReturnsFalse","pure","readFunction","owner","disposeWhenNodeIsRemoved","disposeWhen","domNodeDisposalCallback","dependencyTracking","dependenciesCount","evaluationTimeoutInstance","deferEvaluation","koOptions","deferred","debug","_options","isActive","computedObservable","disposalCount","disposalCandidates","addDependencyTracking","_target","subscribeToDependency","subscribable","_notificationIsPending","_notifyNextChangeIfValueIsDifferent","extend","isArray","Proxy","set","deleteProperty","assign","getPrototypeOf","preventExtensions","isExtensible","ownKeys","getOwnPropertyNames","getOwnPropertySymbols","notify","$parents","$root","$data","$rawData","ko","knockoutInstance","exportDependencies","context","bindingProviderInstance","instance","FOR_NODE_TYPES","includes","isBindingHandlerClass","getOrCreateFor","getBindingHandler","bindingHandlers","preprocessNode","childrenComplete","nodeHasBindings","virtualElements.normaliseVirtualElementDomStructure","shouldBindDescendants","after","domData.getOrSet","alreadyBound","during","errorCaptured","element","getBindingAccessors","bindingContext","$component","virtualElements.childNodes","Set","bindings","allBindings","bindingKey","valueAccessor","allowVirtualElements","dependencyDetection.ignore","$element","$context","onValueChange","controlsDescendants","bindingCompleted","Promise","add","descendantsComplete","size","all","then","asyncBindingsApplied","rootNode","jQuery","body","message","stack","mappedNodes","dependentObservable","arrayEntry","indexObservable","virtualElements.insertAfter","initialized","domElement","tagNameLower","tagNameLowerFn","templateType","memoization.unmemoizeDomNodeAndDescendants","templateEngine","renderTemplate","afterRender","memoization.memoize","as","createChildContextWithAs","createChildContext","$index","includeDestroyed","foreachHidesDestroyed","beforeRemove","iterator","_destroy","synchronous","definition","isSynchronousComponent","loaders","suppressLoaderExceptions","ignoreCustomElementWarning","console","log","_getFirstResultFromLoaders","getElementById","elementName","require","amdRequire","handler","status","index","Node","importNode","map","replaceChild","createComment","attributes","xmlns","createElementNS","children","addValueToNode","setAttributeNS","removeAttributeNS","entries","max","min","protoProperty","defaultBindingAttribute","bindingGlobals","filters","navigator","userAgent","ua","getTime","getDataForNode","clear","getDataforNode","domData.nextKey","cleanData","optionValueDomDataKey","readValue","selectedIndex","writeValue","MutationObserver","standalone","observe","toggle","onreadystatechange","_callback","next","_disposeCallback","_isDisposed","_domNodeDisposalCallback","_node","unsubscribe","closed","equalityComparer","rateLimit","timeout","method","observable","_subscriptions","change","_versionNumber","updateVersion","_changeSubscriptions","dependencyDetection.begin","dependencyDetection.end","getVersion","hasChanged","getSubscriptionsCount","once","when","resolve","yet","Function","_evalIfChanged","_notifyNextChange","_recordUpdate","trackArrayChanges","removeAll","destroy","destroyAll","sorted","sort","reversed","precedence","earlyOut","lhs","op","rhs","operators","get_leaf_value","isExpressionOrIdentifierSymbol","get_value","value_of","create_root","yes","no","nodes","root","parser","args","token","dereferences","dereference","lookup","set_value","is_valid_start_char","is_valid_continue_char","b","f","n","r","t","white","ch","comment","at","lookahead","error","charAt","number","isFinite","objectAddValue","currentContextGlobals","enumerable","object","string","expression","readString","parseInt","fromCharCode","array","identifier","operator","not_an_array","prefix","ternary","member","funcArguments","readBindings","split","valueAsAccessor","convertToAccessors","onlyIfChanged","preparse","bindingStringPreparsers","reduce","runParse","parse","parseExpression","_order","_version","_evalDelayed","markDirty","respondToChange","evaluatePossiblyAsync","throttleEvaluation","evaluateImmediate_CallReadWithDependencyDetection","evaluateImmediate_CallReadThenEndDependencyDetection","_latestValue","throttle","getObservable","isProxied","mixInto","addDisposable","__addEventListener","removeEventListener","anchorTo","forEach","eventSubscribable","boundElementDomDataKey","$parentContext","$parent","unshift","createStaticChildContext","isSync","isComplete","completionPromise","completeWhenBindingsFinish","registerAs","bindingCompletion","completeBinding","WeakMap","Map","initReturn","legacyArgs","update","controlsDescendantBindings","createFor","virtualElements.allowedBindings","applyBindingsToDescendants","containerData","alwaysCheckText","textData","renderTemplateSource","createJavaScriptEvaluatorBlock","makeTemplateSource","elseChainSatisfied","bindNamedTemplate","bindNodeTemplate","bindAnonymousTemplate","if","ifnot","foreach","disposeOldComputedAndStoreNewOne","afterAdd","beforeMove","afterMove","addDisposeCallback","removeDisposeCallback","removeNode","addCleaner","removeCleaner","addOrRemoveItem","arrayFilter","arrayFirst","arrayForEach","arrayGetDistinctValues","arrayIndexOf","arrayMap","arrayPushAll","arrayRemoveItem","cloneNodes","createSymbolOrString","domData","domNodeDisposal","objectForEach","objectMap","parseHtmlFragment","parseJson","JSON","parseObjectLiteral","peekObservable","range","registerEventHandler","setDomNodeChildrenFromArrayMapping","setHtml","setTextContent","toggleDomNodeCssClass","triggerEvent","unwrapObservable","cleanNode","dependencyDetection","computedContext","ignoreDependencies","memoization","selectExtensions","tasks","utils","LifeCycle","isObservable","isSubscribable","isWriteableObservable","isWritableObservable","observableArray","isObservableArray","unwrap","toJS","toJSON","stringify","proxy","isComputed","isPureComputed","pureComputed","nativeTemplateEngine","setTemplateEngine","templateSources","anonymousTemplate","applyBindingAccessorsToNode","applyBindings","applyBindingsToNode","makeBindingAccessors","contextFor","dataFor","BindingHandler","AsyncBindingHandler","virtualElements","bindingEvent","globals","setGlobals","postProcess","_overloadInstance","makeAccessorsFromFunction","makeValueAccessor","providerObject","getBindingsAndMakeAccessors","getBindings","processBinding","preprocess","generateBindingString","unknown","preProcessBindings","getBindingString","genElementBindingStrings","COMMENT_NODE","virtualElements.virtualNodeBindingValue","virtualElements.isStartComment","BIND_ATTRIBUTE","ELEMENT_NODE","getAttribute","hasAttribute","clearCachedDefinition","getConfig","loadComponent","loadTemplate","loadViewModel","customElementName","template","sync","register","viewModel","ComponentABC","isRegistered","unregister","defaultLoader","_allRegisteredComponents","getComponentNameForNode","component","params","getComponentParams","registry","$raw","makeParamValue","PREFIX","getBindingAttributesList","hasAttributes","startsWith","handlersFromAttributes","getValue","nodeTypes","providers","nodeTypeMap","addProvider","providersFor","some","enumerateProviderBindings","asAttr","textNodeReplacement","checked","class","ATTRIBUTES_TO_SKIP","attributesToSkip","ATTRIBUTES_BINDING_MAP","attributesBindingMap","attributesToInterpolate","specified","done","partsTogether","attributeBinding","bindingParts","getPossibleDirectBinding","bindingObjects","removeAttribute","textToNodes","nodeName","textInterpolation","onlyBindings","getNodeValues","passive","capture","bubble","preventDefault","returnValue","cancelBubble","stopPropagation","debounceFn","throttleFn","aliases","classesWrittenByBindingKey","onDescendantsComplete","disabled","activeElement","focus","blur","previousElementValue","_forceUpdateOn","eventsIndicatingSyncValueChange","eventsIndicatingDeferValueChange","updateModel","timeoutHandle","elementValueBeforeEvent","_ko_textInputProcessedEvent","deferUpdateModel","updateView","propertyName","watchForSelectionChangeEvent","eventsIndicatingValueChange","selectionChangeHandler","selectionChangeHandlerName","selectionChangeRegisteredName","w","parseFloat","opera","version","currentIndex","isCheckboxOrRadio","checkedValue","propertyChangedFired","ieAutoCompleteHackNeeded","addEventListner","propertyChangeFired","valueUpdateHandler","eventsToCatch","registerEvent","updateFromModel","isInput","updateFromModelForFile","updateFromModelForValue","isInputElement","autocomplete","form","display","hasElse","detectElse","completesElseChain","getIfElseNodes","ifElseNodes","dependencyDetection.getDependenciesCount","cloneIfElseNodes","render","shouldDisplay","renderStatus","renderAndApplyBindings","ifNodes","elseNodes","elseChainIsAlreadySatisfied","isElseNode","ifCondition","shouldDisplayIf","asOption","conditional","_elseChain","readElseChain","virtualElements.previousSibling","createDocumentFragment","container","generateContext","createContextGenerator","$indexHasBeenRequested","templateNode","changeQueue","firstLastNodesList","indexesToDelete","rendering_queued","pendingDeletes","isNotEmpty","onArrayChange","changeSubs","flushPendingDeletes","added","deleted","isBatch","processQueue","animateFrame","startQueueFlush","beforeQueueFlush","endQueueFlush","afterQueueFlush","updateIndexes","_first$indexRequest","getContextStartingFrom","first","_contextExtensions","$list","configurable","writable","updateFirstLastNodesList","last","getLastNodeBeforeIndex","getPendingDeleteFor","nodesets","nodeOrArrayInserted","insertAllAfter","foreachInstance","getNodesForIndex","activeChildElement","shouldDelayDeletion","getOrCreatePendingDeleteFor","removeNodes","nodesToRemove","clearDeletedIndexes","setSync","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","ForEach","PENDING_DELETE_INDEX_SYM","svg","originalChildNodes","setDomNodesFromJsx","cloneTemplateIntoElement","childBindingContext","createViewModel","templateNodes","makeTemplateSlotNodes","genSlotsByName","computeApplyComponent","latestComponentName","loadingOperationId","currentLoadingOperationId","applyComponentDefinition","cleanUpState","$componentTemplateNodes","$componentTemplateSlotNodes","currentViewModel","onBindingComplete","koDescendantsComplete","getSlot","$slotContext","$slotData","replaceSlotWithNode","uppercase","toUpperCase","lowercase","fit","ceil","json","toLocaleString","provider","providedProperties","extenders","bindingProvider","create","attr","lookupNamespaceURI","dependencyDetection.isInitial","css","enable","disable","hasfocus","hasFocus","hidden","multiple","scrollTop","abs","selectedOptions","jQueryInstance","isNaN","submit","textInput","textinput","uniqueName","using","visible","unless","each","foreachBindings","Component","components"],"mappings":"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"}